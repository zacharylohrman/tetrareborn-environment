/*! For license information please see game.js.LICENSE.txt */
(()=>{var t,e,n={952:(t,e,n)=>{"use strict";n.d(e,{Z:()=>E});var r=n(81),o=n.n(r),i=n(645),a=n.n(i),s=n(667),u=n.n(s),l=new URL(n(963),n.b),c=new URL(n(37),n.b),h=new URL(n(846),n.b),f=new URL(n(15),n.b),d=new URL(n(544),n.b),p=new URL(n(304),n.b),g=new URL(n(432),n.b),m=new URL(n(243),n.b),y=new URL(n(291),n.b),v=new URL(n(539),n.b),_=new URL(n(908),n.b),x=new URL(n(572),n.b),b=a()(o()),w=u()(l),k=u()(c),S=u()(h),A=u()(f),D=u()(d),C=u()(p),L=u()(g),R=u()(m),T=u()(y),O=u()(v),P=u()(_),M=u()(x);b.push([t.id,'.development-watermark,.fps-dev{color:#f00a;font-family:var(--sans-font);font-weight:500;position:absolute;z-index:99999999;pointer-events:none;user-select:none;top:0;right:0;text-align:right;padding:.3rem}.fps-dev{top:1em;font-family:var(--sans-font)}.root-menu-branding{position:absolute;left:2em;width:7em;height:8em;background-size:contain;background-repeat:no-repeat;background-position:center}@font-face{font-family:"Source Sans 3";src:url('+w+');font-weight:100 900}@font-face{font-family:"Source Sans 3";src:url('+k+');font-style:italic;font-weight:100 900}@font-face{font-family:"Source Serif 4";src:url('+S+');font-weight:100 900}@font-face{font-family:"Source Serif 4";src:url('+A+');font-style:italic;font-weight:100 900}@font-face{font-family:"Source Han Sans JP";src:url('+D+');font-weight:100 900}@font-face{font-family:"Source Han Serif JP";src:url('+C+');font-weight:100 900}@font-face{font-family:"Source Han Sans CN";src:url('+L+');font-weight:100 900}@font-face{font-family:"Source Han Serif CN";src:url('+R+');font-weight:100 900}@font-face{font-family:"Source Han Sans TW";src:url('+T+');font-weight:100 900}@font-face{font-family:"Source Han Serif TW";src:url('+O+');font-weight:100 900}@font-face{font-family:"Source Han Sans KR";src:url('+P+');font-weight:100 900}@font-face{font-family:"Source Han Serif KR";src:url('+M+');font-weight:100 900}@keyframes fade{from{opacity:1}to{opacity:0}}.splash-fade-in{animation-name:fade;animation-duration:.5s;animation-timing-function:linear;animation-direction:reverse}.splash-fade-out{animation-name:fade;animation-duration:.5s;animation-timing-function:linear}:root{--cell-size: 48px;--matrix-width: 10;--matrix-height: 20;--peek-zone: 3;--off-screen: 0.75;--bpm: 140;--s-per-bar: calc(calc(60 / var(--bpm)) * 1s)}.game-container{font-size:calc(var(--cell-size)*var(--matrix-height)/40);text-align:center;height:100%;font-family:var(--sans-font);transition-property:filter,transform,opacity;transition-duration:.4s;transform:perspective(1em)}.game-container.paused,.game-container.game-over{filter:blur(0.1em) grayscale(100%);transform:perspective(1em) translateZ(-0.1em)}.game-container.quit{opacity:0;transition-timing-function:cubic-bezier(0.95, 0.05, 0.795, 0.035);transition-duration:1s;transform:perspective(1em) translateZ(-0.1em) translateY(100em)}.game{--matrix-full-height: calc(var(--matrix-height) + var(--peek-zone));display:inline-block;margin:auto}.game>div{float:left}@keyframes queue-entrance{from{transform:translateY(-10em);opacity:0}to{opacity:1}}.queue-entrance-animation{opacity:0;animation-fill-mode:forwards;animation-name:queue-entrance;animation-duration:1s;animation-timing-function:cubic-bezier(0.165, 0.84, 0.44, 1)}.game-left,.game-right{position:relative;margin-top:calc((var(--peek-zone) - var(--off-screen))*var(--cell-size));height:calc(var(--matrix-height)*var(--cell-size))}.game-left{text-align:right;margin-right:.3em}.game-right{text-align:left;margin-left:.3em}@keyframes board-entrance{from{transform:translateY(10em);opacity:0}to{opacity:1}}.board-entrance-animation{opacity:0;animation-fill-mode:forwards;animation-name:board-entrance;animation-duration:1s;animation-timing-function:cubic-bezier(0.165, 0.84, 0.44, 1)}.game-center{position:relative;width:calc(var(--matrix-width)*var(--cell-size));height:calc(var(--matrix-height)*var(--cell-size));background-color:#0003;margin-top:calc((var(--peek-zone) - var(--off-screen))*var(--cell-size));border-style:solid;border-width:0 .2em .4em .2em;border-top-left-radius:.2em 3.2em;border-top-right-radius:.2em 3.2em;border-bottom-left-radius:.2em}.game-background-canvas,.game-canvas{transition-property:opacity;transition-duration:.4s;width:calc(var(--matrix-width)*var(--cell-size));position:absolute;left:0}.game-container.paused .game-background-canvas,.game-container.paused .game-canvas{opacity:0}.game-canvas{height:calc(var(--matrix-full-height)*var(--cell-size));top:calc((0 - var(--peek-zone))*var(--cell-size))}.game-background-canvas{height:calc(var(--matrix-height)*var(--cell-size));top:0}.game-container.paused .game-background-canvas{opacity:1}.hold-label,.next-label{margin:.5em 0 0;line-height:0;color:#fff;font-size:1.5em;font-weight:600;text-align:center;letter-spacing:.3em;text-indent:.3em;width:calc(4*var(--cell-size))}.hidden.hold-label,.hidden.next-label{opacity:0}.next-label{position:absolute;left:0;display:flex;justify-content:center}.next-canvas{transition-property:opacity;transition-duration:.4s;width:calc(4*var(--cell-size));height:calc(16*var(--cell-size));margin-top:1.5em}.hold-canvas{transition-property:opacity;transition-duration:.4s;width:calc(4*var(--cell-size));height:calc(4*var(--cell-size));margin-top:1.5em}.game-container.paused .next-canvas,.game-container.paused .hold-canvas{opacity:0}.hold-label{position:absolute;right:0;display:flex;justify-content:center}.game-mode-label{position:absolute;bottom:-0.225em;right:-1.15em;background-color:#fff;color:#000;width:1.15em;line-height:1.2em;writing-mode:vertical-rl;font-weight:500;font-size:1.8em;border-top-right-radius:.2em;border-bottom-right-radius:.2em;padding-top:.25em;padding-bottom:.25em}@keyframes pulse{from{filter:brightness(1.1)}to{filter:brightness(0.9)}}@keyframes pulse-spin{from{filter:brightness(1.1)}to{filter:brightness(0.2)}}.pulse{animation-name:pulse;animation-duration:var(--s-per-bar);animation-iteration-count:infinite;animation-direction:alternate;animation-timing-function:ease-in-out}.pulse.tspin{animation-name:pulse-spin;animation-duration:calc(var(--s-per-bar)/4)}.stat-container{text-align:right;display:flex;justify-content:flex-end;flex-wrap:wrap-reverse;flex-direction:column;height:31.14em;padding-right:.4em}@keyframes stat-entrance{from{transform:translateX(-1em);opacity:0}to{opacity:1}}.stat-entrance-animation{opacity:0;animation-fill-mode:forwards;animation-name:stat-entrance;animation-delay:var(--delay);animation-duration:.5s;animation-timing-function:ease-out}.stat-group{margin-top:1em}.stat-group .label{font-weight:700;text-transform:uppercase;letter-spacing:.3em;font-size:1.3em}.stat-group .value{margin-right:.4em}.stat-group .value.large{margin-right:.2em;font-size:2em;font-weight:300}.stat-group small{opacity:.85}@keyframes pulse-stat{from{filter:brightness(1)}to{filter:brightness(0.5)}}.stat-update{animation-name:pulse-stat;animation-duration:.25s;animation-iteration-count:1;animation-direction:reverse;animation-timing-function:ease-in-out}.lockdown-bar-canvas{width:calc(100% + .4em + 1.8em);height:1em;position:absolute;left:-0.2em;bottom:-1.55em}.pause-menu-container,.game-over-container{position:absolute;width:100%;height:100%;background-color:#000a;z-index:100;transition-property:opacity;transition-duration:.35s}.pause-text,.game-over-text{font-family:var(--sans-font);font-size:5vh;background-size:200% 100%;background-image:linear-gradient(to right, transparent 50%, white 50%);color:#000;position:absolute;width:150%;left:-25%;transform:rotate(-5deg);text-align:center;top:3em;padding-top:.5em;padding-bottom:.4em;transition-property:letter-spacing,background-position,opacity;transition-duration:.35s;background-position:-100% 0;white-space:nowrap}.game-over-text small{font-size:.6em;font-weight:500}.pause-menu-container.hidden .pause-text,.game-over-container.hidden .game-over-text{letter-spacing:2em;background-position:0 0}.pause-menu-container.hidden,.game-over-container.hidden{opacity:0}.options-list{position:absolute;top:45%;font-size:3vh;width:100%;text-align:center;list-style-type:none;font-family:var(--sans-font);padding:0}.options-list li{margin-top:.2em;text-transform:uppercase;transition-property:letter-spacing,font-weight,background-color,color,padding-left,transform;transition-duration:.2s;width:150%;margin-left:-25%;transform:rotate(-5deg);cursor:pointer}.pause-menu-container.hidden .options-list li,.game-over-container.hidden .options-list li{cursor:default}.options-list li.selected{font-weight:900;letter-spacing:.2em;background-color:#fff;padding-left:.1em;color:#000}.options-list li.quit{transition-timing-function:cubic-bezier(0.95, 0.05, 0.795, 0.035);transition-duration:1s;transform:translateY(-50em) rotate(-5deg)}.pause-text.quit,.game-over-text.quit{transition-duration:.5s;letter-spacing:2em;background-position:0 0;opacity:0}@keyframes menu-chosen{from{background-color:#fff;color:#000;border-color:#000}to{background-color:#555;color:#fff;border-color:#fff}}.options-list li.quit-selection{transition:opacity 1.5s cubic-bezier(0.6, 0.04, 0.98, 0.335),transform 1s ease-in-out;animation-name:menu-chosen;animation-duration:.07s;animation-iteration-count:8;animation-timing-function:cubic-bezier(1, 0, 0, 1);animation-direction:alternate;transform:translateY(-3.5em) rotate(-5deg);opacity:0}@keyframes ready-animation{from{text-indent:.7em;letter-spacing:.7em;font-weight:100}to{text-indent:initial;letter-spacing:initial;font-weight:900}}.ready-animation{animation-name:ready-animation;animation-duration:1.5s;animation-timing-function:cubic-bezier(0.075, 0.82, 0.165, 1)}.ready-go-message{display:block;color:#fff;font-size:3em;font-weight:900;position:absolute;top:6em;left:-150%;width:400%}@keyframes ready-text{0%{opacity:0;transform:translate(0, 1em) scale(2);color:#000;text-shadow:0 0 .1em #fff}25%{opacity:1}100%{opacity:1;color:#fff;text-shadow:0 0 .1em #fff0;transform:translate(0, 0) scale(1)}}.ready-animation-letter{animation-name:ready-text;display:inline-block;animation-fill-mode:backwards;animation-duration:1s;animation-delay:var(--animation-delay);animation-timing-function:cubic-bezier(0.075, 0.82, 0.165, 1)}@keyframes start-animation{0%{transform:scale(4);opacity:0;text-indent:.1em;letter-spacing:.1em}20%{text-indent:initial;letter-spacing:initial;opacity:1;transform:scale(1);filter:brightness(1);font-weight:900}25%{filter:brightness(0.5)}35%{filter:brightness(1)}40%{filter:brightness(0.5)}45%{filter:brightness(1)}50%{filter:brightness(0.5)}55%{filter:brightness(1);opacity:1}100%{opacity:0;font-weight:100;text-indent:.5em;letter-spacing:.5em}}.start-animation{animation-name:start-animation;animation-duration:1s;animation-iteration-count:1;animation-fill-mode:forwards;animation-timing-function:ease-in}:root{--sans-font: "Source Sans 3", sans-serif;--serif-font: "Source Serif 4", serif}html{background-color:#000;padding:0;margin:0;cursor:default}body{padding:0;margin:0;overflow:hidden}.renderer{color:#fff;width:100vw;height:100vh;position:absolute;left:0;top:0}',""]);const E=b},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var u=this[s][0];null!=u&&(a[u]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);r&&a[c[0]]||(void 0!==i&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),e.push(c))}},e}},667:t=>{"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},81:t=>{"use strict";t.exports=function(t){return t[1]}},766:(t,e,n)=>{var r;!function(){"use strict";var o=function(){this.init()};o.prototype={init:function(){var t=this||i;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||i;if(t=parseFloat(t),e.ctx||d(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,i.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var r=e._howls[n]._getSoundIds(),o=0;o<r.length;o++){var a=e._howls[n]._soundById(r[o]);a&&a._node&&(a._node.volume=a._volume*t)}return e}return e._volume},mute:function(t){var e=this||i;e.ctx||d(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,i.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var r=e._howls[n]._getSoundIds(),o=0;o<r.length;o++){var a=e._howls[n]._soundById(r[o]);a&&a._node&&(a._node.muted=!!t||a._muted)}return e},stop:function(){for(var t=this||i,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||i,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,d()),t},codecs:function(t){return(this||i)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||i;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||i,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var n=e.canPlayType("audio/mpeg;").replace(/^no$/,""),r=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),o=r&&parseInt(r[0].split("/")[1],10)<33;return t._codecs={mp3:!(o||!n&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||i;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function(n){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var r=new Audio;r._unlocked=!0,t._releaseHtml5Audio(r)}catch(n){t.noAudio=!0;break}for(var o=0;o<t._howls.length;o++)if(!t._howls[o]._webAudio)for(var i=t._howls[o]._getSoundIds(),a=0;a<i.length;a++){var s=t._howls[o]._soundById(i[a]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}t._autoResume();var u=t.ctx.createBufferSource();u.buffer=t._scratchBuffer,u.connect(t.ctx.destination),void 0===u.start?u.noteOn(0):u.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),u.onended=function(){u.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0);for(var n=0;n<t._howls.length;n++)t._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),t}},_obtainHtml5Audio:function(){var t=this||i;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(t){var e=this||i;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&i.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var n=0;n<t._howls[e]._sounds.length;n++)if(!t._howls[e]._sounds[n]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(e,e)}}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&i.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then((function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var i=new o,a=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(t){var e=this;return i.ctx||d(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=i.usingWebAudio&&!e._html5,void 0!==i.ctx&&i.ctx&&i.autoUnlock&&i._unlockAudio(),i._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=this,e=null;if(i.noAudio)t._emit("loaderror",null,"No audio support.");else{"string"==typeof t._src&&(t._src=[t._src]);for(var n=0;n<t._src.length;n++){var r,o;if(t._format&&t._format[n])r=t._format[n];else{if("string"!=typeof(o=t._src[n])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(r=/^data:audio\/([^;,]+);/i.exec(o))||(r=/\.([^.]+)$/.exec(o.split("?",1)[0])),r&&(r=r[1].toLowerCase())}if(r||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),r&&i.codecs(r)){e=t._src[n];break}}if(e)return t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new s(t),t._webAudio&&l(t),t;t._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var n=this,r=null;if("number"==typeof t)r=t,t=null;else{if("string"==typeof t&&"loaded"===n._state&&!n._sprite[t])return null;if(void 0===t&&(t="__default",!n._playLock)){for(var o=0,a=0;a<n._sounds.length;a++)n._sounds[a]._paused&&!n._sounds[a]._ended&&(o++,r=n._sounds[a]._id);1===o?t=null:r=null}}var s=r?n._soundById(r):n._inactiveSound();if(!s)return null;if(r&&!t&&(t=s._sprite||"__default"),"loaded"!==n._state){s._sprite=t,s._ended=!1;var u=s._id;return n._queue.push({event:"play",action:function(){n.play(u)}}),u}if(r&&!s._paused)return e||n._loadQueue("play"),s._id;n._webAudio&&i._autoResume();var l=Math.max(0,s._seek>0?s._seek:n._sprite[t][0]/1e3),c=Math.max(0,(n._sprite[t][0]+n._sprite[t][1])/1e3-l),h=1e3*c/Math.abs(s._rate),f=n._sprite[t][0]/1e3,d=(n._sprite[t][0]+n._sprite[t][1])/1e3;s._sprite=t,s._ended=!1;var p=function(){s._paused=!1,s._seek=l,s._start=f,s._stop=d,s._loop=!(!s._loop&&!n._sprite[t][2])};if(!(l>=d)){var g=s._node;if(n._webAudio){var m=function(){n._playLock=!1,p(),n._refreshBuffer(s);var t=s._muted||n._muted?0:s._volume;g.gain.setValueAtTime(t,i.ctx.currentTime),s._playStart=i.ctx.currentTime,void 0===g.bufferSource.start?s._loop?g.bufferSource.noteGrainOn(0,l,86400):g.bufferSource.noteGrainOn(0,l,c):s._loop?g.bufferSource.start(0,l,86400):g.bufferSource.start(0,l,c),h!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),h)),e||setTimeout((function(){n._emit("play",s._id),n._loadQueue()}),0)};"running"===i.state&&"interrupted"!==i.ctx.state?m():(n._playLock=!0,n.once("resume",m),n._clearTimer(s._id))}else{var y=function(){g.currentTime=l,g.muted=s._muted||n._muted||i._muted||g.muted,g.volume=s._volume*i.volume(),g.playbackRate=s._rate;try{var r=g.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(n._playLock=!0,p(),r.then((function(){n._playLock=!1,g._unlocked=!0,e||(n._emit("play",s._id),n._loadQueue())})).catch((function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0}))):e||(n._playLock=!1,p(),n._emit("play",s._id),n._loadQueue()),g.playbackRate=s._rate,g.paused)return void n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),h):(n._endTimers[s._id]=function(){n._ended(s),g.removeEventListener("ended",n._endTimers[s._id],!1)},g.addEventListener("ended",n._endTimers[s._id],!1))}catch(t){n._emit("playerror",s._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===g.src&&(g.src=n._src,g.load());var v=window&&window.ejecta||!g.readyState&&i._navigator.isCocoonJS;if(g.readyState>=3||v)y();else{n._playLock=!0;var _=function(){y(),g.removeEventListener(i._canPlayEvent,_,!1)};g.addEventListener(i._canPlayEvent,_,!1),n._clearTimer(s._id)}}return s._id}n._ended(s)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var n=e._getSoundIds(t),r=0;r<n.length;r++){e._clearTimer(n[r]);var o=e._soundById(n[r]);if(o&&!o._paused&&(o._seek=e.seek(n[r]),o._rateSeek=0,o._paused=!0,e._stopFade(n[r]),o._node))if(e._webAudio){if(!o._node.bufferSource)continue;void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),e._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();arguments[1]||e._emit("pause",o?o._id:null)}return e},stop:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(t)}}),n;for(var r=n._getSoundIds(t),o=0;o<r.length;o++){n._clearTimer(r[o]);var i=n._soundById(r[o]);i&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,n._stopFade(r[o]),i._node&&(n._webAudio?i._node.bufferSource&&(void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),n._cleanBuffer(i._node)):isNaN(i._node.duration)&&i._node.duration!==1/0||(i._node.currentTime=i._start||0,i._node.pause(),i._node.duration===1/0&&n._clearSound(i._node))),e||n._emit("stop",i._id))}return n},mute:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(t,e)}}),n;if(void 0===e){if("boolean"!=typeof t)return n._muted;n._muted=t}for(var r=n._getSoundIds(e),o=0;o<r.length;o++){var a=n._soundById(r[o]);a&&(a._muted=t,a._interval&&n._stopFade(a._id),n._webAudio&&a._node?a._node.gain.setValueAtTime(t?0:a._volume,i.ctx.currentTime):a._node&&(a._node.muted=!!i._muted||t),n._emit("mute",a._id))}return n},volume:function(){var t,e,n,r=this,o=arguments;if(0===o.length)return r._volume;if(1===o.length||2===o.length&&void 0===o[1]){var a=r._getSoundIds(),s=a.indexOf(o[0]);s>=0?e=parseInt(o[0],10):t=parseFloat(o[0])}else o.length>=2&&(t=parseFloat(o[0]),e=parseInt(o[1],10));if(!(void 0!==t&&t>=0&&t<=1))return(n=e?r._soundById(e):r._sounds[0])?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,o)}}),r;void 0===e&&(r._volume=t),e=r._getSoundIds(e);for(var u=0;u<e.length;u++)(n=r._soundById(e[u]))&&(n._volume=t,o[2]||r._stopFade(e[u]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(t,i.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=t*i.volume()),r._emit("volume",n._id));return r},fade:function(t,e,n,r){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"fade",action:function(){o.fade(t,e,n,r)}}),o;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),n=parseFloat(n),o.volume(t,r);for(var a=o._getSoundIds(r),s=0;s<a.length;s++){var u=o._soundById(a[s]);if(u){if(r||o._stopFade(a[s]),o._webAudio&&!u._muted){var l=i.ctx.currentTime,c=l+n/1e3;u._volume=t,u._node.gain.setValueAtTime(t,l),u._node.gain.linearRampToValueAtTime(e,c)}o._startFadeInterval(u,t,e,n,a[s],void 0===r)}}return o},_startFadeInterval:function(t,e,n,r,o,i){var a=this,s=e,u=n-e,l=Math.abs(u/.01),c=Math.max(4,l>0?r/l:r),h=Date.now();t._fadeTo=n,t._interval=setInterval((function(){var o=(Date.now()-h)/r;h=Date.now(),s+=u*o,s=Math.round(100*s)/100,s=u<0?Math.max(n,s):Math.min(n,s),a._webAudio?t._volume=s:a.volume(s,t._id,!0),i&&(a._volume=s),(n<e&&s<=n||n>e&&s>=n)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,a.volume(n,t._id),a._emit("fade",t._id))}),c)},_stopFade:function(t){var e=this,n=e._soundById(t);return n&&n._interval&&(e._webAudio&&n._node.gain.cancelScheduledValues(i.ctx.currentTime),clearInterval(n._interval),n._interval=null,e.volume(n._fadeTo,t),n._fadeTo=null,e._emit("fade",t)),e},loop:function(){var t,e,n,r=this,o=arguments;if(0===o.length)return r._loop;if(1===o.length){if("boolean"!=typeof o[0])return!!(n=r._soundById(parseInt(o[0],10)))&&n._loop;t=o[0],r._loop=t}else 2===o.length&&(t=o[0],e=parseInt(o[1],10));for(var i=r._getSoundIds(e),a=0;a<i.length;a++)(n=r._soundById(i[a]))&&(n._loop=t,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=t,t&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return r},rate:function(){var t,e,n,r=this,o=arguments;if(0===o.length)e=r._sounds[0]._id;else if(1===o.length){var a=r._getSoundIds(),s=a.indexOf(o[0]);s>=0?e=parseInt(o[0],10):t=parseFloat(o[0])}else 2===o.length&&(t=parseFloat(o[0]),e=parseInt(o[1],10));if("number"!=typeof t)return(n=r._soundById(e))?n._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,o)}}),r;void 0===e&&(r._rate=t),e=r._getSoundIds(e);for(var u=0;u<e.length;u++)if(n=r._soundById(e[u])){r.playing(e[u])&&(n._rateSeek=r.seek(e[u]),n._playStart=r._webAudio?i.ctx.currentTime:n._playStart),n._rate=t,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(t,i.ctx.currentTime):n._node&&(n._node.playbackRate=t);var l=r.seek(e[u]),c=(r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-l,h=1e3*c/Math.abs(n._rate);!r._endTimers[e[u]]&&n._paused||(r._clearTimer(e[u]),r._endTimers[e[u]]=setTimeout(r._ended.bind(r,n),h)),r._emit("rate",n._id)}return r},seek:function(){var t,e,n=this,r=arguments;if(0===r.length)e=n._sounds[0]._id;else if(1===r.length){var o=n._getSoundIds(),a=o.indexOf(r[0]);a>=0?e=parseInt(r[0],10):n._sounds.length&&(e=n._sounds[0]._id,t=parseFloat(r[0]))}else 2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if(void 0===e)return n;if("number"==typeof t&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var s=n._soundById(e);if(s){if(!("number"==typeof t&&t>=0)){if(n._webAudio){var u=n.playing(e)?i.ctx.currentTime-s._playStart:0,l=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(l+u*Math.abs(s._rate))}return s._node.currentTime}var c=n.playing(e);c&&n.pause(e,!0),s._seek=t,s._ended=!1,n._clearTimer(e),n._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=t);var h=function(){n._emit("seek",e),c&&n.play(e,!0)};if(c&&!n._webAudio){var f=function(){n._playLock?setTimeout(f,0):h()};setTimeout(f,0)}else h()}return n},playing:function(t){var e=this;if("number"==typeof t){var n=e._soundById(t);return!!n&&!n._paused}for(var r=0;r<e._sounds.length;r++)if(!e._sounds[r]._paused)return!0;return!1},duration:function(t){var e=this,n=e._duration,r=e._soundById(t);return r&&(n=e._sprite[r._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,n=0;n<e.length;n++)e[n]._paused||t.stop(e[n]._id),t._webAudio||(t._clearSound(e[n]._node),e[n]._node.removeEventListener("error",e[n]._errorFn,!1),e[n]._node.removeEventListener(i._canPlayEvent,e[n]._loadFn,!1),e[n]._node.removeEventListener("ended",e[n]._endFn,!1),i._releaseHtml5Audio(e[n]._node)),delete e[n]._node,t._clearTimer(e[n]._id);var r=i._howls.indexOf(t);r>=0&&i._howls.splice(r,1);var o=!0;for(n=0;n<i._howls.length;n++)if(i._howls[n]._src===t._src||t._src.indexOf(i._howls[n]._src)>=0){o=!1;break}return u&&o&&delete u[t._src],i.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,n,r){var o=this["_on"+t];return"function"==typeof e&&o.push(r?{id:n,fn:e,once:r}:{id:n,fn:e}),this},off:function(t,e,n){var r=this,o=r["_on"+t],i=0;if("number"==typeof e&&(n=e,e=null),e||n)for(i=0;i<o.length;i++){var a=n===o[i].id;if(e===o[i].fn&&a||!e&&a){o.splice(i,1);break}}else if(t)r["_on"+t]=[];else{var s=Object.keys(r);for(i=0;i<s.length;i++)0===s[i].indexOf("_on")&&Array.isArray(r[s[i]])&&(r[s[i]]=[])}return r},once:function(t,e,n){return this.on(t,e,n,1),this},_emit:function(t,e,n){for(var r=this,o=r["_on"+t],i=o.length-1;i>=0;i--)o[i].id&&o[i].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,n)}.bind(r,o[i].fn),0),o[i].once&&r.off(t,o[i].fn,o[i].id));return r._loadQueue(t),r},_loadQueue:function(t){var e=this;if(e._queue.length>0){var n=e._queue[0];n.event===t&&(e._queue.shift(),e._loadQueue()),t||n.action()}return e},_ended:function(t){var e=this,n=t._sprite;if(!e._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(e._ended.bind(e,t),100),e;var r=!(!t._loop&&!e._sprite[n][2]);if(e._emit("end",t._id),!e._webAudio&&r&&e.stop(t._id,!0).play(t._id),e._webAudio&&r){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=i.ctx.currentTime;var o=1e3*(t._stop-t._start)/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),o)}return e._webAudio&&!r&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),i._autoSuspend()),e._webAudio||r||e.stop(t._id,!0),e},_clearTimer:function(t){var e=this;if(e._endTimers[t]){if("function"!=typeof e._endTimers[t])clearTimeout(e._endTimers[t]);else{var n=e._soundById(t);n&&n._node&&n._node.removeEventListener("ended",e._endTimers[t],!1)}delete e._endTimers[t]}return e},_soundById:function(t){for(var e=this,n=0;n<e._sounds.length;n++)if(t===e._sounds[n]._id)return e._sounds[n];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new s(t)},_drain:function(){var t=this,e=t._pool,n=0,r=0;if(!(t._sounds.length<e)){for(r=0;r<t._sounds.length;r++)t._sounds[r]._ended&&n++;for(r=t._sounds.length-1;r>=0;r--){if(n<=e)return;t._sounds[r]._ended&&(t._webAudio&&t._sounds[r]._node&&t._sounds[r]._node.disconnect(0),t._sounds.splice(r,1),n--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],n=0;n<this._sounds.length;n++)e.push(this._sounds[n]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=i.ctx.createBufferSource(),t._node.bufferSource.buffer=u[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,i.ctx.currentTime),this},_cleanBuffer:function(t){var e=i._navigator&&i._navigator.vendor.indexOf("Apple")>=0;if(i._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=i._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(i._navigator&&i._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(t){this._parent=t,this.init()};s.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++i._counter,e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,n=i._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node=void 0===i.ctx.createGain?i.ctx.createGainNode():i.ctx.createGain(),t._node.gain.setValueAtTime(n,i.ctx.currentTime),t._node.paused=!0,t._node.connect(i.masterGain)):i.noAudio||(t._node=i._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(i._canPlayEvent,t._loadFn,!1),t._endFn=t._endListener.bind(t),t._node.addEventListener("ended",t._endFn,!1),t._node.src=e._src,t._node.preload=!0===e._preload?"auto":e._preload,t._node.volume=n*i.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++i._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,e=t._parent;e._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),t._node.removeEventListener(i._canPlayEvent,t._loadFn,!1)},_endListener:function(){var t=this,e=t._parent;e._duration===1/0&&(e._duration=Math.ceil(10*t._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(t)),t._node.removeEventListener("ended",t._endFn,!1)}};var u={},l=function(t){var e=t._src;if(u[e])return t._duration=u[e].duration,void f(t);if(/^data:[^;]+;base64,/.test(e)){for(var n=atob(e.split(",")[1]),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);h(r.buffer,t)}else{var i=new XMLHttpRequest;i.open(t._xhr.method,e,!0),i.withCredentials=t._xhr.withCredentials,i.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach((function(e){i.setRequestHeader(e,t._xhr.headers[e])})),i.onload=function(){var e=(i.status+"")[0];"0"===e||"2"===e||"3"===e?h(i.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+i.status+".")},i.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete u[e],t.load())},c(i)}},c=function(t){try{t.send()}catch(e){t.onerror()}},h=function(t,e){var n=function(){e._emit("loaderror",null,"Decoding audio data failed.")},r=function(t){t&&e._sounds.length>0?(u[e._src]=t,f(e,t)):n()};"undefined"!=typeof Promise&&1===i.ctx.decodeAudioData.length?i.ctx.decodeAudioData(t).then(r).catch(n):i.ctx.decodeAudioData(t,r,n)},f=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},d=function(){if(i.usingWebAudio){try{"undefined"!=typeof AudioContext?i.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?i.ctx=new webkitAudioContext:i.usingWebAudio=!1}catch(t){i.usingWebAudio=!1}i.ctx||(i.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(i._navigator&&i._navigator.platform),e=i._navigator&&i._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=e?parseInt(e[1],10):null;if(t&&n&&n<9){var r=/safari/.test(i._navigator&&i._navigator.userAgent.toLowerCase());i._navigator&&!r&&(i.usingWebAudio=!1)}i.usingWebAudio&&(i.masterGain=void 0===i.ctx.createGain?i.ctx.createGainNode():i.ctx.createGain(),i.masterGain.gain.setValueAtTime(i._muted?0:i._volume,i.ctx.currentTime),i.masterGain.connect(i.ctx.destination)),i._setup()}};void 0===(r=function(){return{Howler:i,Howl:a}}.apply(e,[]))||(t.exports=r),e.Howler=i,e.Howl=a,void 0!==n.g?(n.g.HowlerGlobal=o,n.g.Howler=i,n.g.Howl=a,n.g.Sound=s):"undefined"!=typeof window&&(window.HowlerGlobal=o,window.Howler=i,window.Howl=a,window.Sound=s)}(),function(){"use strict";var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var n=e._howls.length-1;n>=0;n--)e._howls[n].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,n){var r=this;return r.ctx&&r.ctx.listener?(e="number"!=typeof e?r._pos[1]:e,n="number"!=typeof n?r._pos[2]:n,"number"!=typeof t?r._pos:(r._pos=[t,e,n],void 0!==r.ctx.listener.positionX?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]),r)):r},HowlerGlobal.prototype.orientation=function(t,e,n,r,o,i){var a=this;if(!a.ctx||!a.ctx.listener)return a;var s=a._orientation;return e="number"!=typeof e?s[1]:e,n="number"!=typeof n?s[2]:n,r="number"!=typeof r?s[3]:r,o="number"!=typeof o?s[4]:o,i="number"!=typeof i?s[5]:i,"number"!=typeof t?s:(a._orientation=[t,e,n,r,o,i],void 0!==a.ctx.listener.forwardX?(a.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),a.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),a.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),a.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),a.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),a.ctx.listener.upZ.setTargetAtTime(i,Howler.ctx.currentTime,.1)):a.ctx.listener.setOrientation(t,e,n,r,o,i),a)},Howl.prototype.init=(t=Howl.prototype.init,function(e){var n=this;return n._orientation=e.orientation||[1,0,0],n._stereo=e.stereo||null,n._pos=e.pos||null,n._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},n._onstereo=e.onstereo?[{fn:e.onstereo}]:[],n._onpos=e.onpos?[{fn:e.onpos}]:[],n._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(t,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(t,n)}}),r;var o=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof t)return r._stereo;r._stereo=t,r._pos=[t,0,0]}for(var i=r._getSoundIds(n),a=0;a<i.length;a++){var s=r._soundById(i[a]);if(s){if("number"!=typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||e(s,o),"spatial"===o?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(t,0,0):s._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",s._id)}}return r},Howl.prototype.pos=function(t,n,r,o){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(t,n,r,o)}}),i;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,void 0===o){if("number"!=typeof t)return i._pos;i._pos=[t,n,r]}for(var a=i._getSoundIds(o),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if("number"!=typeof t)return u._pos;u._pos=[t,n,r],u._node&&(u._panner&&!u._panner.pan||e(u,"spatial"),void 0!==u._panner.positionX?(u._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setPosition(t,n,r)),i._emit("pos",u._id)}}return i},Howl.prototype.orientation=function(t,n,r,o){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(t,n,r,o)}}),i;if(n="number"!=typeof n?i._orientation[1]:n,r="number"!=typeof r?i._orientation[2]:r,void 0===o){if("number"!=typeof t)return i._orientation;i._orientation=[t,n,r]}for(var a=i._getSoundIds(o),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if("number"!=typeof t)return u._orientation;u._orientation=[t,n,r],u._node&&(u._panner||(u._pos||(u._pos=i._pos||[0,0,-.5]),e(u,"spatial")),void 0!==u._panner.orientationX?(u._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setOrientation(t,n,r)),i._emit("orientation",u._id)}}return i},Howl.prototype.pannerAttr=function(){var t,n,r,o=this,i=arguments;if(!o._webAudio)return o;if(0===i.length)return o._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return(r=o._soundById(parseInt(i[0],10)))?r._pannerAttr:o._pannerAttr;t=i[0],void 0===n&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),o._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:o._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:o._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:o._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:o._panningModel})}else 2===i.length&&(t=i[0],n=parseInt(i[1],10));for(var a=o._getSoundIds(n),s=0;s<a.length;s++)if(r=o._soundById(a[s])){var u=r._pannerAttr;u={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:u.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:u.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:u.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:u.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:u.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:u.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:u.panningModel};var l=r._panner;l?(l.coneInnerAngle=u.coneInnerAngle,l.coneOuterAngle=u.coneOuterAngle,l.coneOuterGain=u.coneOuterGain,l.distanceModel=u.distanceModel,l.maxDistance=u.maxDistance,l.refDistance=u.refDistance,l.rolloffFactor=u.rolloffFactor,l.panningModel=u.panningModel):(r._pos||(r._pos=o._pos||[0,0,-.5]),e(r,"spatial"))}return o},Sound.prototype.init=function(t){return function(){var e=this,n=e._parent;e._orientation=n._orientation,e._stereo=n._stereo,e._pos=n._pos,e._pannerAttr=n._pannerAttr,t.call(this),e._stereo?n.stereo(e._stereo):e._pos&&n.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this,n=e._parent;return e._orientation=n._orientation,e._stereo=n._stereo,e._pos=n._pos,e._pannerAttr=n._pannerAttr,e._stereo?n.stereo(e._stereo):e._pos?n.pos(e._pos[0],e._pos[1],e._pos[2],e._id):e._panner&&(e._panner.disconnect(0),e._panner=void 0,n._refreshBuffer(e)),t.call(this)}}(Sound.prototype.reset);var e=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()},486:function(t,e,n){var r;t=n.nmd(t),function(){var o,i="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",u=32,l=128,c=1/0,h=9007199254740991,f=NaN,d=4294967295,p=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],g="[object Arguments]",m="[object Array]",y="[object Boolean]",v="[object Date]",_="[object Error]",x="[object Function]",b="[object GeneratorFunction]",w="[object Map]",k="[object Number]",S="[object Object]",A="[object Promise]",D="[object RegExp]",C="[object Set]",L="[object String]",R="[object Symbol]",T="[object WeakMap]",O="[object ArrayBuffer]",P="[object DataView]",M="[object Float32Array]",E="[object Float64Array]",I="[object Int8Array]",j="[object Int16Array]",F="[object Int32Array]",H="[object Uint8Array]",B="[object Uint8ClampedArray]",N="[object Uint16Array]",U="[object Uint32Array]",z=/\b__p \+= '';/g,K=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y=/&(?:amp|lt|gt|quot|#39);/g,G=/[&<>"']/g,V=RegExp(Y.source),X=RegExp(G.source),q=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,$=/<%=([\s\S]+?)%>/g,Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,ot=/\s/,it=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,at=/\{\n\/\* \[wrapped with (.+)\] \*/,st=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,lt=/[()=,{}\[\]\/\s]/,ct=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,dt=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,mt=/^0o[0-7]+$/i,yt=/^(?:0|[1-9]\d*)$/,vt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_t=/($^)/,xt=/['\n\r\u2028\u2029\\]/g,bt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",wt="a-z\\xdf-\\xf6\\xf8-\\xff",kt="A-Z\\xc0-\\xd6\\xd8-\\xde",St="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",At="["+St+"]",Dt="["+bt+"]",Ct="\\d+",Lt="["+wt+"]",Rt="[^\\ud800-\\udfff"+St+Ct+"\\u2700-\\u27bf"+wt+kt+"]",Tt="\\ud83c[\\udffb-\\udfff]",Ot="[^\\ud800-\\udfff]",Pt="(?:\\ud83c[\\udde6-\\uddff]){2}",Mt="[\\ud800-\\udbff][\\udc00-\\udfff]",Et="["+kt+"]",It="(?:"+Lt+"|"+Rt+")",jt="(?:"+Et+"|"+Rt+")",Ft="(?:['’](?:d|ll|m|re|s|t|ve))?",Ht="(?:['’](?:D|LL|M|RE|S|T|VE))?",Bt="(?:"+Dt+"|"+Tt+")?",Nt="[\\ufe0e\\ufe0f]?",Ut=Nt+Bt+"(?:\\u200d(?:"+[Ot,Pt,Mt].join("|")+")"+Nt+Bt+")*",zt="(?:"+["[\\u2700-\\u27bf]",Pt,Mt].join("|")+")"+Ut,Kt="(?:"+[Ot+Dt+"?",Dt,Pt,Mt,"[\\ud800-\\udfff]"].join("|")+")",Wt=RegExp("['’]","g"),Yt=RegExp(Dt,"g"),Gt=RegExp(Tt+"(?="+Tt+")|"+Kt+Ut,"g"),Vt=RegExp([Et+"?"+Lt+"+"+Ft+"(?="+[At,Et,"$"].join("|")+")",jt+"+"+Ht+"(?="+[At,Et+It,"$"].join("|")+")",Et+"?"+It+"+"+Ft,Et+"+"+Ht,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ct,zt].join("|"),"g"),Xt=RegExp("[\\u200d\\ud800-\\udfff"+bt+"\\ufe0e\\ufe0f]"),qt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Qt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],$t=-1,Zt={};Zt[M]=Zt[E]=Zt[I]=Zt[j]=Zt[F]=Zt[H]=Zt[B]=Zt[N]=Zt[U]=!0,Zt[g]=Zt[m]=Zt[O]=Zt[y]=Zt[P]=Zt[v]=Zt[_]=Zt[x]=Zt[w]=Zt[k]=Zt[S]=Zt[D]=Zt[C]=Zt[L]=Zt[T]=!1;var Jt={};Jt[g]=Jt[m]=Jt[O]=Jt[P]=Jt[y]=Jt[v]=Jt[M]=Jt[E]=Jt[I]=Jt[j]=Jt[F]=Jt[w]=Jt[k]=Jt[S]=Jt[D]=Jt[C]=Jt[L]=Jt[R]=Jt[H]=Jt[B]=Jt[N]=Jt[U]=!0,Jt[_]=Jt[x]=Jt[T]=!1;var te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ee=parseFloat,ne=parseInt,re="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,oe="object"==typeof self&&self&&self.Object===Object&&self,ie=re||oe||Function("return this")(),ae=e&&!e.nodeType&&e,se=ae&&t&&!t.nodeType&&t,ue=se&&se.exports===ae,le=ue&&re.process,ce=function(){try{return se&&se.require&&se.require("util").types||le&&le.binding&&le.binding("util")}catch(t){}}(),he=ce&&ce.isArrayBuffer,fe=ce&&ce.isDate,de=ce&&ce.isMap,pe=ce&&ce.isRegExp,ge=ce&&ce.isSet,me=ce&&ce.isTypedArray;function ye(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ve(t,e,n,r){for(var o=-1,i=null==t?0:t.length;++o<i;){var a=t[o];e(r,a,n(a),t)}return r}function _e(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function xe(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function be(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function we(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}function ke(t,e){return!(null==t||!t.length)&&Me(t,e,0)>-1}function Se(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}function Ae(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}function De(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}function Ce(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function Le(t,e,n,r){var o=null==t?0:t.length;for(r&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function Re(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Te=Fe("length");function Oe(t,e,n){var r;return n(t,(function(t,n,o){if(e(t,n,o))return r=n,!1})),r}function Pe(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}function Me(t,e,n){return e==e?function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}(t,e,n):Pe(t,Ie,n)}function Ee(t,e,n,r){for(var o=n-1,i=t.length;++o<i;)if(r(t[o],e))return o;return-1}function Ie(t){return t!=t}function je(t,e){var n=null==t?0:t.length;return n?Ne(t,e)/n:f}function Fe(t){return function(e){return null==e?o:e[t]}}function He(t){return function(e){return null==t?o:t[e]}}function Be(t,e,n,r,o){return o(t,(function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)})),n}function Ne(t,e){for(var n,r=-1,i=t.length;++r<i;){var a=e(t[r]);a!==o&&(n=n===o?a:n+a)}return n}function Ue(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function ze(t){return t?t.slice(0,sn(t)+1).replace(rt,""):t}function Ke(t){return function(e){return t(e)}}function We(t,e){return Ae(e,(function(e){return t[e]}))}function Ye(t,e){return t.has(e)}function Ge(t,e){for(var n=-1,r=t.length;++n<r&&Me(e,t[n],0)>-1;);return n}function Ve(t,e){for(var n=t.length;n--&&Me(e,t[n],0)>-1;);return n}function Xe(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var qe=He({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Qe=He({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function $e(t){return"\\"+te[t]}function Ze(t){return Xt.test(t)}function Je(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function tn(t,e){return function(n){return t(e(n))}}function en(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var a=t[n];a!==e&&a!==s||(t[n]=s,i[o++]=n)}return i}function nn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function rn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function on(t){return Ze(t)?function(t){for(var e=Gt.lastIndex=0;Gt.test(t);)++e;return e}(t):Te(t)}function an(t){return Ze(t)?function(t){return t.match(Gt)||[]}(t):function(t){return t.split("")}(t)}function sn(t){for(var e=t.length;e--&&ot.test(t.charAt(e)););return e}var un=He({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),ln=function t(e){var n,r=(e=null==e?ie:ln.defaults(ie.Object(),e,ln.pick(ie,Qt))).Array,ot=e.Date,bt=e.Error,wt=e.Function,kt=e.Math,St=e.Object,At=e.RegExp,Dt=e.String,Ct=e.TypeError,Lt=r.prototype,Rt=wt.prototype,Tt=St.prototype,Ot=e["__core-js_shared__"],Pt=Rt.toString,Mt=Tt.hasOwnProperty,Et=0,It=(n=/[^.]+$/.exec(Ot&&Ot.keys&&Ot.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",jt=Tt.toString,Ft=Pt.call(St),Ht=ie._,Bt=At("^"+Pt.call(Mt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nt=ue?e.Buffer:o,Ut=e.Symbol,zt=e.Uint8Array,Kt=Nt?Nt.allocUnsafe:o,Gt=tn(St.getPrototypeOf,St),Xt=St.create,te=Tt.propertyIsEnumerable,re=Lt.splice,oe=Ut?Ut.isConcatSpreadable:o,ae=Ut?Ut.iterator:o,se=Ut?Ut.toStringTag:o,le=function(){try{var t=ci(St,"defineProperty");return t({},"",{}),t}catch(t){}}(),ce=e.clearTimeout!==ie.clearTimeout&&e.clearTimeout,Te=ot&&ot.now!==ie.Date.now&&ot.now,He=e.setTimeout!==ie.setTimeout&&e.setTimeout,cn=kt.ceil,hn=kt.floor,fn=St.getOwnPropertySymbols,dn=Nt?Nt.isBuffer:o,pn=e.isFinite,gn=Lt.join,mn=tn(St.keys,St),yn=kt.max,vn=kt.min,_n=ot.now,xn=e.parseInt,bn=kt.random,wn=Lt.reverse,kn=ci(e,"DataView"),Sn=ci(e,"Map"),An=ci(e,"Promise"),Dn=ci(e,"Set"),Cn=ci(e,"WeakMap"),Ln=ci(St,"create"),Rn=Cn&&new Cn,Tn={},On=Bi(kn),Pn=Bi(Sn),Mn=Bi(An),En=Bi(Dn),In=Bi(Cn),jn=Ut?Ut.prototype:o,Fn=jn?jn.valueOf:o,Hn=jn?jn.toString:o;function Bn(t){if(ns(t)&&!Ya(t)&&!(t instanceof Kn)){if(t instanceof zn)return t;if(Mt.call(t,"__wrapped__"))return Ni(t)}return new zn(t)}var Nn=function(){function t(){}return function(e){if(!es(e))return{};if(Xt)return Xt(e);t.prototype=e;var n=new t;return t.prototype=o,n}}();function Un(){}function zn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=o}function Kn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Yn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Vn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Gn;++e<n;)this.add(t[e])}function Xn(t){var e=this.__data__=new Yn(t);this.size=e.size}function qn(t,e){var n=Ya(t),r=!n&&Wa(t),o=!n&&!r&&qa(t),i=!n&&!r&&!o&&cs(t),a=n||r||o||i,s=a?Ue(t.length,Dt):[],u=s.length;for(var l in t)!e&&!Mt.call(t,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||yi(l,u))||s.push(l);return s}function Qn(t){var e=t.length;return e?t[Gr(0,e-1)]:o}function $n(t,e){return Ei(Lo(t),ar(e,0,t.length))}function Zn(t){return Ei(Lo(t))}function Jn(t,e,n){(n!==o&&!Ua(t[e],n)||n===o&&!(e in t))&&or(t,e,n)}function tr(t,e,n){var r=t[e];Mt.call(t,e)&&Ua(r,n)&&(n!==o||e in t)||or(t,e,n)}function er(t,e){for(var n=t.length;n--;)if(Ua(t[n][0],e))return n;return-1}function nr(t,e,n,r){return hr(t,(function(t,o,i){e(r,t,n(t),i)})),r}function rr(t,e){return t&&Ro(e,Ps(e),t)}function or(t,e,n){"__proto__"==e&&le?le(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ir(t,e){for(var n=-1,i=e.length,a=r(i),s=null==t;++n<i;)a[n]=s?o:Cs(t,e[n]);return a}function ar(t,e,n){return t==t&&(n!==o&&(t=t<=n?t:n),e!==o&&(t=t>=e?t:e)),t}function sr(t,e,n,r,i,a){var s,u=1&e,l=2&e,c=4&e;if(n&&(s=i?n(t,r,i,a):n(t)),s!==o)return s;if(!es(t))return t;var h=Ya(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Mt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return Lo(t,s)}else{var f=di(t),d=f==x||f==b;if(qa(t))return wo(t,u);if(f==S||f==g||d&&!i){if(s=l||d?{}:gi(t),!u)return l?function(t,e){return Ro(t,fi(t),e)}(t,function(t,e){return t&&Ro(e,Ms(e),t)}(s,t)):function(t,e){return Ro(t,hi(t),e)}(t,rr(s,t))}else{if(!Jt[f])return i?t:{};s=function(t,e,n){var r,o=t.constructor;switch(e){case O:return ko(t);case y:case v:return new o(+t);case P:return function(t,e){var n=e?ko(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case M:case E:case I:case j:case F:case H:case B:case N:case U:return So(t,n);case w:return new o;case k:case L:return new o(t);case D:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case C:return new o;case R:return r=t,Fn?St(Fn.call(r)):{}}}(t,f,u)}}a||(a=new Xn);var p=a.get(t);if(p)return p;a.set(t,s),ss(t)?t.forEach((function(r){s.add(sr(r,e,n,r,t,a))})):rs(t)&&t.forEach((function(r,o){s.set(o,sr(r,e,n,o,t,a))}));var m=h?o:(c?l?ri:ni:l?Ms:Ps)(t);return _e(m||t,(function(r,o){m&&(r=t[o=r]),tr(s,o,sr(r,e,n,o,t,a))})),s}function ur(t,e,n){var r=n.length;if(null==t)return!r;for(t=St(t);r--;){var i=n[r],a=e[i],s=t[i];if(s===o&&!(i in t)||!a(s))return!1}return!0}function lr(t,e,n){if("function"!=typeof t)throw new Ct(i);return Ti((function(){t.apply(o,n)}),e)}function cr(t,e,n,r){var o=-1,i=ke,a=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=Ae(e,Ke(n))),r?(i=Se,a=!1):e.length>=200&&(i=Ye,a=!1,e=new Vn(e));t:for(;++o<s;){var c=t[o],h=null==n?c:n(c);if(c=r||0!==c?c:0,a&&h==h){for(var f=l;f--;)if(e[f]===h)continue t;u.push(c)}else i(e,h,r)||u.push(c)}return u}Bn.templateSettings={escape:q,evaluate:Q,interpolate:$,variable:"",imports:{_:Bn}},Bn.prototype=Un.prototype,Bn.prototype.constructor=Bn,zn.prototype=Nn(Un.prototype),zn.prototype.constructor=zn,Kn.prototype=Nn(Un.prototype),Kn.prototype.constructor=Kn,Wn.prototype.clear=function(){this.__data__=Ln?Ln(null):{},this.size=0},Wn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Wn.prototype.get=function(t){var e=this.__data__;if(Ln){var n=e[t];return n===a?o:n}return Mt.call(e,t)?e[t]:o},Wn.prototype.has=function(t){var e=this.__data__;return Ln?e[t]!==o:Mt.call(e,t)},Wn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ln&&e===o?a:e,this},Yn.prototype.clear=function(){this.__data__=[],this.size=0},Yn.prototype.delete=function(t){var e=this.__data__,n=er(e,t);return!(n<0||(n==e.length-1?e.pop():re.call(e,n,1),--this.size,0))},Yn.prototype.get=function(t){var e=this.__data__,n=er(e,t);return n<0?o:e[n][1]},Yn.prototype.has=function(t){return er(this.__data__,t)>-1},Yn.prototype.set=function(t,e){var n=this.__data__,r=er(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(Sn||Yn),string:new Wn}},Gn.prototype.delete=function(t){var e=ui(this,t).delete(t);return this.size-=e?1:0,e},Gn.prototype.get=function(t){return ui(this,t).get(t)},Gn.prototype.has=function(t){return ui(this,t).has(t)},Gn.prototype.set=function(t,e){var n=ui(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Vn.prototype.add=Vn.prototype.push=function(t){return this.__data__.set(t,a),this},Vn.prototype.has=function(t){return this.__data__.has(t)},Xn.prototype.clear=function(){this.__data__=new Yn,this.size=0},Xn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Xn.prototype.get=function(t){return this.__data__.get(t)},Xn.prototype.has=function(t){return this.__data__.has(t)},Xn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Yn){var r=n.__data__;if(!Sn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Gn(r)}return n.set(t,e),this.size=n.size,this};var hr=Po(_r),fr=Po(xr,!0);function dr(t,e){var n=!0;return hr(t,(function(t,r,o){return n=!!e(t,r,o)})),n}function pr(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],s=e(a);if(null!=s&&(u===o?s==s&&!ls(s):n(s,u)))var u=s,l=a}return l}function gr(t,e){var n=[];return hr(t,(function(t,r,o){e(t,r,o)&&n.push(t)})),n}function mr(t,e,n,r,o){var i=-1,a=t.length;for(n||(n=mi),o||(o=[]);++i<a;){var s=t[i];e>0&&n(s)?e>1?mr(s,e-1,n,r,o):De(o,s):r||(o[o.length]=s)}return o}var yr=Mo(),vr=Mo(!0);function _r(t,e){return t&&yr(t,e,Ps)}function xr(t,e){return t&&vr(t,e,Ps)}function br(t,e){return we(e,(function(e){return Za(t[e])}))}function wr(t,e){for(var n=0,r=(e=vo(e,t)).length;null!=t&&n<r;)t=t[Hi(e[n++])];return n&&n==r?t:o}function kr(t,e,n){var r=e(t);return Ya(t)?r:De(r,n(t))}function Sr(t){return null==t?t===o?"[object Undefined]":"[object Null]":se&&se in St(t)?function(t){var e=Mt.call(t,se),n=t[se];try{t[se]=o;var r=!0}catch(t){}var i=jt.call(t);return r&&(e?t[se]=n:delete t[se]),i}(t):function(t){return jt.call(t)}(t)}function Ar(t,e){return t>e}function Dr(t,e){return null!=t&&Mt.call(t,e)}function Cr(t,e){return null!=t&&e in St(t)}function Lr(t,e,n){for(var i=n?Se:ke,a=t[0].length,s=t.length,u=s,l=r(s),c=1/0,h=[];u--;){var f=t[u];u&&e&&(f=Ae(f,Ke(e))),c=vn(f.length,c),l[u]=!n&&(e||a>=120&&f.length>=120)?new Vn(u&&f):o}f=t[0];var d=-1,p=l[0];t:for(;++d<a&&h.length<c;){var g=f[d],m=e?e(g):g;if(g=n||0!==g?g:0,!(p?Ye(p,m):i(h,m,n))){for(u=s;--u;){var y=l[u];if(!(y?Ye(y,m):i(t[u],m,n)))continue t}p&&p.push(m),h.push(g)}}return h}function Rr(t,e,n){var r=null==(t=Di(t,e=vo(e,t)))?t:t[Hi($i(e))];return null==r?o:ye(r,t,n)}function Tr(t){return ns(t)&&Sr(t)==g}function Or(t,e,n,r,i){return t===e||(null==t||null==e||!ns(t)&&!ns(e)?t!=t&&e!=e:function(t,e,n,r,i,a){var s=Ya(t),u=Ya(e),l=s?m:di(t),c=u?m:di(e),h=(l=l==g?S:l)==S,f=(c=c==g?S:c)==S,d=l==c;if(d&&qa(t)){if(!qa(e))return!1;s=!0,h=!1}if(d&&!h)return a||(a=new Xn),s||cs(t)?ti(t,e,n,r,i,a):function(t,e,n,r,o,i,a){switch(n){case P:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case O:return!(t.byteLength!=e.byteLength||!i(new zt(t),new zt(e)));case y:case v:case k:return Ua(+t,+e);case _:return t.name==e.name&&t.message==e.message;case D:case L:return t==e+"";case w:var s=Je;case C:var u=1&r;if(s||(s=nn),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=2,a.set(t,e);var c=ti(s(t),s(e),r,o,i,a);return a.delete(t),c;case R:if(Fn)return Fn.call(t)==Fn.call(e)}return!1}(t,e,l,n,r,i,a);if(!(1&n)){var p=h&&Mt.call(t,"__wrapped__"),x=f&&Mt.call(e,"__wrapped__");if(p||x){var b=p?t.value():t,A=x?e.value():e;return a||(a=new Xn),i(b,A,n,r,a)}}return!!d&&(a||(a=new Xn),function(t,e,n,r,i,a){var s=1&n,u=ni(t),l=u.length;if(l!=ni(e).length&&!s)return!1;for(var c=l;c--;){var h=u[c];if(!(s?h in e:Mt.call(e,h)))return!1}var f=a.get(t),d=a.get(e);if(f&&d)return f==e&&d==t;var p=!0;a.set(t,e),a.set(e,t);for(var g=s;++c<l;){var m=t[h=u[c]],y=e[h];if(r)var v=s?r(y,m,h,e,t,a):r(m,y,h,t,e,a);if(!(v===o?m===y||i(m,y,n,r,a):v)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var _=t.constructor,x=e.constructor;_==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(p=!1)}return a.delete(t),a.delete(e),p}(t,e,n,r,i,a))}(t,e,n,r,Or,i))}function Pr(t,e,n,r){var i=n.length,a=i,s=!r;if(null==t)return!a;for(t=St(t);i--;){var u=n[i];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<a;){var l=(u=n[i])[0],c=t[l],h=u[1];if(s&&u[2]){if(c===o&&!(l in t))return!1}else{var f=new Xn;if(r)var d=r(c,h,l,t,e,f);if(!(d===o?Or(h,c,3,r,f):d))return!1}}return!0}function Mr(t){return!(!es(t)||(e=t,It&&It in e))&&(Za(t)?Bt:gt).test(Bi(t));var e}function Er(t){return"function"==typeof t?t:null==t?ou:"object"==typeof t?Ya(t)?Br(t[0],t[1]):Hr(t):du(t)}function Ir(t){if(!wi(t))return mn(t);var e=[];for(var n in St(t))Mt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function jr(t,e){return t<e}function Fr(t,e){var n=-1,o=Va(t)?r(t.length):[];return hr(t,(function(t,r,i){o[++n]=e(t,r,i)})),o}function Hr(t){var e=li(t);return 1==e.length&&e[0][2]?Si(e[0][0],e[0][1]):function(n){return n===t||Pr(n,t,e)}}function Br(t,e){return _i(t)&&ki(e)?Si(Hi(t),e):function(n){var r=Cs(n,t);return r===o&&r===e?Ls(n,t):Or(e,r,3)}}function Nr(t,e,n,r,i){t!==e&&yr(e,(function(a,s){if(i||(i=new Xn),es(a))!function(t,e,n,r,i,a,s){var u=Li(t,n),l=Li(e,n),c=s.get(l);if(c)Jn(t,n,c);else{var h=a?a(u,l,n+"",t,e,s):o,f=h===o;if(f){var d=Ya(l),p=!d&&qa(l),g=!d&&!p&&cs(l);h=l,d||p||g?Ya(u)?h=u:Xa(u)?h=Lo(u):p?(f=!1,h=wo(l,!0)):g?(f=!1,h=So(l,!0)):h=[]:is(l)||Wa(l)?(h=u,Wa(u)?h=vs(u):es(u)&&!Za(u)||(h=gi(l))):f=!1}f&&(s.set(l,h),i(h,l,r,a,s),s.delete(l)),Jn(t,n,h)}}(t,e,s,n,Nr,r,i);else{var u=r?r(Li(t,s),a,s+"",t,e,i):o;u===o&&(u=a),Jn(t,s,u)}}),Ms)}function Ur(t,e){var n=t.length;if(n)return yi(e+=e<0?n:0,n)?t[e]:o}function zr(t,e,n){e=e.length?Ae(e,(function(t){return Ya(t)?function(e){return wr(e,1===t.length?t[0]:t)}:t})):[ou];var r=-1;return e=Ae(e,Ke(si())),function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,o=t.criteria,i=e.criteria,a=o.length,s=n.length;++r<a;){var u=Ao(o[r],i[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(Fr(t,(function(t,n,o){return{criteria:Ae(e,(function(e){return e(t)})),index:++r,value:t}})))}function Kr(t,e,n){for(var r=-1,o=e.length,i={};++r<o;){var a=e[r],s=wr(t,a);n(s,a)&&$r(i,vo(a,t),s)}return i}function Wr(t,e,n,r){var o=r?Ee:Me,i=-1,a=e.length,s=t;for(t===e&&(e=Lo(e)),n&&(s=Ae(t,Ke(n)));++i<a;)for(var u=0,l=e[i],c=n?n(l):l;(u=o(s,c,u,r))>-1;)s!==t&&re.call(s,u,1),re.call(t,u,1);return t}function Yr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var o=e[n];if(n==r||o!==i){var i=o;yi(o)?re.call(t,o,1):lo(t,o)}}return t}function Gr(t,e){return t+hn(bn()*(e-t+1))}function Vr(t,e){var n="";if(!t||e<1||e>h)return n;do{e%2&&(n+=t),(e=hn(e/2))&&(t+=t)}while(e);return n}function Xr(t,e){return Oi(Ai(t,e,ou),t+"")}function qr(t){return Qn(Us(t))}function Qr(t,e){var n=Us(t);return Ei(n,ar(e,0,n.length))}function $r(t,e,n,r){if(!es(t))return t;for(var i=-1,a=(e=vo(e,t)).length,s=a-1,u=t;null!=u&&++i<a;){var l=Hi(e[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(i!=s){var h=u[l];(c=r?r(h,l,u):o)===o&&(c=es(h)?h:yi(e[i+1])?[]:{})}tr(u,l,c),u=u[l]}return t}var Zr=Rn?function(t,e){return Rn.set(t,e),t}:ou,Jr=le?function(t,e){return le(t,"toString",{configurable:!0,enumerable:!1,value:eu(e),writable:!0})}:ou;function to(t){return Ei(Us(t))}function eo(t,e,n){var o=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=r(i);++o<i;)a[o]=t[o+e];return a}function no(t,e){var n;return hr(t,(function(t,r,o){return!(n=e(t,r,o))})),!!n}function ro(t,e,n){var r=0,o=null==t?r:t.length;if("number"==typeof e&&e==e&&o<=2147483647){for(;r<o;){var i=r+o>>>1,a=t[i];null!==a&&!ls(a)&&(n?a<=e:a<e)?r=i+1:o=i}return o}return oo(t,e,ou,n)}function oo(t,e,n,r){var i=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!=e,u=null===e,l=ls(e),c=e===o;i<a;){var h=hn((i+a)/2),f=n(t[h]),d=f!==o,p=null===f,g=f==f,m=ls(f);if(s)var y=r||g;else y=c?g&&(r||d):u?g&&d&&(r||!p):l?g&&d&&!p&&(r||!m):!p&&!m&&(r?f<=e:f<e);y?i=h+1:a=h}return vn(a,4294967294)}function io(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Ua(s,u)){var u=s;i[o++]=0===a?0:a}}return i}function ao(t){return"number"==typeof t?t:ls(t)?f:+t}function so(t){if("string"==typeof t)return t;if(Ya(t))return Ae(t,so)+"";if(ls(t))return Hn?Hn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function uo(t,e,n){var r=-1,o=ke,i=t.length,a=!0,s=[],u=s;if(n)a=!1,o=Se;else if(i>=200){var l=e?null:Xo(t);if(l)return nn(l);a=!1,o=Ye,u=new Vn}else u=e?[]:s;t:for(;++r<i;){var c=t[r],h=e?e(c):c;if(c=n||0!==c?c:0,a&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),s.push(c)}else o(u,h,n)||(u!==s&&u.push(h),s.push(c))}return s}function lo(t,e){return null==(t=Di(t,e=vo(e,t)))||delete t[Hi($i(e))]}function co(t,e,n,r){return $r(t,e,n(wr(t,e)),r)}function ho(t,e,n,r){for(var o=t.length,i=r?o:-1;(r?i--:++i<o)&&e(t[i],i,t););return n?eo(t,r?0:i,r?i+1:o):eo(t,r?i+1:0,r?o:i)}function fo(t,e){var n=t;return n instanceof Kn&&(n=n.value()),Ce(e,(function(t,e){return e.func.apply(e.thisArg,De([t],e.args))}),n)}function po(t,e,n){var o=t.length;if(o<2)return o?uo(t[0]):[];for(var i=-1,a=r(o);++i<o;)for(var s=t[i],u=-1;++u<o;)u!=i&&(a[i]=cr(a[i]||s,t[u],e,n));return uo(mr(a,1),e,n)}function go(t,e,n){for(var r=-1,i=t.length,a=e.length,s={};++r<i;){var u=r<a?e[r]:o;n(s,t[r],u)}return s}function mo(t){return Xa(t)?t:[]}function yo(t){return"function"==typeof t?t:ou}function vo(t,e){return Ya(t)?t:_i(t,e)?[t]:Fi(_s(t))}var _o=Xr;function xo(t,e,n){var r=t.length;return n=n===o?r:n,!e&&n>=r?t:eo(t,e,n)}var bo=ce||function(t){return ie.clearTimeout(t)};function wo(t,e){if(e)return t.slice();var n=t.length,r=Kt?Kt(n):new t.constructor(n);return t.copy(r),r}function ko(t){var e=new t.constructor(t.byteLength);return new zt(e).set(new zt(t)),e}function So(t,e){var n=e?ko(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ao(t,e){if(t!==e){var n=t!==o,r=null===t,i=t==t,a=ls(t),s=e!==o,u=null===e,l=e==e,c=ls(e);if(!u&&!c&&!a&&t>e||a&&s&&l&&!u&&!c||r&&s&&l||!n&&l||!i)return 1;if(!r&&!a&&!c&&t<e||c&&n&&i&&!r&&!a||u&&n&&i||!s&&i||!l)return-1}return 0}function Do(t,e,n,o){for(var i=-1,a=t.length,s=n.length,u=-1,l=e.length,c=yn(a-s,0),h=r(l+c),f=!o;++u<l;)h[u]=e[u];for(;++i<s;)(f||i<a)&&(h[n[i]]=t[i]);for(;c--;)h[u++]=t[i++];return h}function Co(t,e,n,o){for(var i=-1,a=t.length,s=-1,u=n.length,l=-1,c=e.length,h=yn(a-u,0),f=r(h+c),d=!o;++i<h;)f[i]=t[i];for(var p=i;++l<c;)f[p+l]=e[l];for(;++s<u;)(d||i<a)&&(f[p+n[s]]=t[i++]);return f}function Lo(t,e){var n=-1,o=t.length;for(e||(e=r(o));++n<o;)e[n]=t[n];return e}function Ro(t,e,n,r){var i=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var u=e[a],l=r?r(n[u],t[u],u,n,t):o;l===o&&(l=t[u]),i?or(n,u,l):tr(n,u,l)}return n}function To(t,e){return function(n,r){var o=Ya(n)?ve:nr,i=e?e():{};return o(n,t,si(r,2),i)}}function Oo(t){return Xr((function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:o,s=i>2?n[2]:o;for(a=t.length>3&&"function"==typeof a?(i--,a):o,s&&vi(n[0],n[1],s)&&(a=i<3?o:a,i=1),e=St(e);++r<i;){var u=n[r];u&&t(e,u,r,a)}return e}))}function Po(t,e){return function(n,r){if(null==n)return n;if(!Va(n))return t(n,r);for(var o=n.length,i=e?o:-1,a=St(n);(e?i--:++i<o)&&!1!==r(a[i],i,a););return n}}function Mo(t){return function(e,n,r){for(var o=-1,i=St(e),a=r(e),s=a.length;s--;){var u=a[t?s:++o];if(!1===n(i[u],u,i))break}return e}}function Eo(t){return function(e){var n=Ze(e=_s(e))?an(e):o,r=n?n[0]:e.charAt(0),i=n?xo(n,1).join(""):e.slice(1);return r[t]()+i}}function Io(t){return function(e){return Ce(Zs(Ws(e).replace(Wt,"")),t,"")}}function jo(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Nn(t.prototype),r=t.apply(n,e);return es(r)?r:n}}function Fo(t){return function(e,n,r){var i=St(e);if(!Va(e)){var a=si(n,3);e=Ps(e),n=function(t){return a(i[t],t,i)}}var s=t(e,n,r);return s>-1?i[a?e[s]:s]:o}}function Ho(t){return ei((function(e){var n=e.length,r=n,a=zn.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new Ct(i);if(a&&!u&&"wrapper"==ii(s))var u=new zn([],!0)}for(r=u?r:n;++r<n;){var l=ii(s=e[r]),c="wrapper"==l?oi(s):o;u=c&&xi(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[ii(c[0])].apply(u,c[3]):1==s.length&&xi(s)?u[l]():u.thru(s)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&Ya(r))return u.plant(r).value();for(var o=0,i=n?e[o].apply(this,t):r;++o<n;)i=e[o].call(this,i);return i}}))}function Bo(t,e,n,i,a,s,u,c,h,f){var d=e&l,p=1&e,g=2&e,m=24&e,y=512&e,v=g?o:jo(t);return function o(){for(var l=arguments.length,_=r(l),x=l;x--;)_[x]=arguments[x];if(m)var b=ai(o),w=Xe(_,b);if(i&&(_=Do(_,i,a,m)),s&&(_=Co(_,s,u,m)),l-=w,m&&l<f){var k=en(_,b);return Go(t,e,Bo,o.placeholder,n,_,k,c,h,f-l)}var S=p?n:this,A=g?S[t]:t;return l=_.length,c?_=Ci(_,c):y&&l>1&&_.reverse(),d&&h<l&&(_.length=h),this&&this!==ie&&this instanceof o&&(A=v||jo(A)),A.apply(S,_)}}function No(t,e){return function(n,r){return function(t,e,n,r){return _r(t,(function(t,o,i){e(r,n(t),o,i)})),r}(n,t,e(r),{})}}function Uo(t,e){return function(n,r){var i;if(n===o&&r===o)return e;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=so(n),r=so(r)):(n=ao(n),r=ao(r)),i=t(n,r)}return i}}function zo(t){return ei((function(e){return e=Ae(e,Ke(si())),Xr((function(n){var r=this;return t(e,(function(t){return ye(t,r,n)}))}))}))}function Ko(t,e){var n=(e=e===o?" ":so(e)).length;if(n<2)return n?Vr(e,t):e;var r=Vr(e,cn(t/on(e)));return Ze(e)?xo(an(r),0,t).join(""):r.slice(0,t)}function Wo(t){return function(e,n,i){return i&&"number"!=typeof i&&vi(e,n,i)&&(n=i=o),e=ps(e),n===o?(n=e,e=0):n=ps(n),function(t,e,n,o){for(var i=-1,a=yn(cn((e-t)/(n||1)),0),s=r(a);a--;)s[o?a:++i]=t,t+=n;return s}(e,n,i=i===o?e<n?1:-1:ps(i),t)}}function Yo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ys(e),n=ys(n)),t(e,n)}}function Go(t,e,n,r,i,a,s,l,c,h){var f=8&e;e|=f?u:64,4&(e&=~(f?64:u))||(e&=-4);var d=[t,e,i,f?a:o,f?s:o,f?o:a,f?o:s,l,c,h],p=n.apply(o,d);return xi(t)&&Ri(p,d),p.placeholder=r,Pi(p,t,e)}function Vo(t){var e=kt[t];return function(t,n){if(t=ys(t),(n=null==n?0:vn(gs(n),292))&&pn(t)){var r=(_s(t)+"e").split("e");return+((r=(_s(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Xo=Dn&&1/nn(new Dn([,-0]))[1]==c?function(t){return new Dn(t)}:lu;function qo(t){return function(e){var n=di(e);return n==w?Je(e):n==C?rn(e):function(t,e){return Ae(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Qo(t,e,n,a,c,h,f,d){var p=2&e;if(!p&&"function"!=typeof t)throw new Ct(i);var g=a?a.length:0;if(g||(e&=-97,a=c=o),f=f===o?f:yn(gs(f),0),d=d===o?d:gs(d),g-=c?c.length:0,64&e){var m=a,y=c;a=c=o}var v=p?o:oi(t),_=[t,e,n,a,c,m,y,h,f,d];if(v&&function(t,e){var n=t[1],r=e[1],o=n|r,i=o<131,a=r==l&&8==n||r==l&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!i&&!a)return t;1&r&&(t[2]=e[2],o|=1&n?0:4);var u=e[3];if(u){var c=t[3];t[3]=c?Do(c,u,e[4]):u,t[4]=c?en(t[3],s):e[4]}(u=e[5])&&(c=t[5],t[5]=c?Co(c,u,e[6]):u,t[6]=c?en(t[5],s):e[6]),(u=e[7])&&(t[7]=u),r&l&&(t[8]=null==t[8]?e[8]:vn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o}(_,v),t=_[0],e=_[1],n=_[2],a=_[3],c=_[4],!(d=_[9]=_[9]===o?p?0:t.length:yn(_[9]-g,0))&&24&e&&(e&=-25),e&&1!=e)x=8==e||16==e?function(t,e,n){var i=jo(t);return function a(){for(var s=arguments.length,u=r(s),l=s,c=ai(a);l--;)u[l]=arguments[l];var h=s<3&&u[0]!==c&&u[s-1]!==c?[]:en(u,c);return(s-=h.length)<n?Go(t,e,Bo,a.placeholder,o,u,h,o,o,n-s):ye(this&&this!==ie&&this instanceof a?i:t,this,u)}}(t,e,d):e!=u&&33!=e||c.length?Bo.apply(o,_):function(t,e,n,o){var i=1&e,a=jo(t);return function e(){for(var s=-1,u=arguments.length,l=-1,c=o.length,h=r(c+u),f=this&&this!==ie&&this instanceof e?a:t;++l<c;)h[l]=o[l];for(;u--;)h[l++]=arguments[++s];return ye(f,i?n:this,h)}}(t,e,n,a);else var x=function(t,e,n){var r=1&e,o=jo(t);return function e(){return(this&&this!==ie&&this instanceof e?o:t).apply(r?n:this,arguments)}}(t,e,n);return Pi((v?Zr:Ri)(x,_),t,e)}function $o(t,e,n,r){return t===o||Ua(t,Tt[n])&&!Mt.call(r,n)?e:t}function Zo(t,e,n,r,i,a){return es(t)&&es(e)&&(a.set(e,t),Nr(t,e,o,Zo,a),a.delete(e)),t}function Jo(t){return is(t)?o:t}function ti(t,e,n,r,i,a){var s=1&n,u=t.length,l=e.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(t),h=a.get(e);if(c&&h)return c==e&&h==t;var f=-1,d=!0,p=2&n?new Vn:o;for(a.set(t,e),a.set(e,t);++f<u;){var g=t[f],m=e[f];if(r)var y=s?r(m,g,f,e,t,a):r(g,m,f,t,e,a);if(y!==o){if(y)continue;d=!1;break}if(p){if(!Re(e,(function(t,e){if(!Ye(p,e)&&(g===t||i(g,t,n,r,a)))return p.push(e)}))){d=!1;break}}else if(g!==m&&!i(g,m,n,r,a)){d=!1;break}}return a.delete(t),a.delete(e),d}function ei(t){return Oi(Ai(t,o,Gi),t+"")}function ni(t){return kr(t,Ps,hi)}function ri(t){return kr(t,Ms,fi)}var oi=Rn?function(t){return Rn.get(t)}:lu;function ii(t){for(var e=t.name+"",n=Tn[e],r=Mt.call(Tn,e)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==t)return o.name}return e}function ai(t){return(Mt.call(Bn,"placeholder")?Bn:t).placeholder}function si(){var t=Bn.iteratee||iu;return t=t===iu?Er:t,arguments.length?t(arguments[0],arguments[1]):t}function ui(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function li(t){for(var e=Ps(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,ki(o)]}return e}function ci(t,e){var n=function(t,e){return null==t?o:t[e]}(t,e);return Mr(n)?n:o}var hi=fn?function(t){return null==t?[]:(t=St(t),we(fn(t),(function(e){return te.call(t,e)})))}:mu,fi=fn?function(t){for(var e=[];t;)De(e,hi(t)),t=Gt(t);return e}:mu,di=Sr;function pi(t,e,n){for(var r=-1,o=(e=vo(e,t)).length,i=!1;++r<o;){var a=Hi(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&ts(o)&&yi(a,o)&&(Ya(t)||Wa(t))}function gi(t){return"function"!=typeof t.constructor||wi(t)?{}:Nn(Gt(t))}function mi(t){return Ya(t)||Wa(t)||!!(oe&&t&&t[oe])}function yi(t,e){var n=typeof t;return!!(e=null==e?h:e)&&("number"==n||"symbol"!=n&&yt.test(t))&&t>-1&&t%1==0&&t<e}function vi(t,e,n){if(!es(n))return!1;var r=typeof e;return!!("number"==r?Va(n)&&yi(e,n.length):"string"==r&&e in n)&&Ua(n[e],t)}function _i(t,e){if(Ya(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ls(t))||J.test(t)||!Z.test(t)||null!=e&&t in St(e)}function xi(t){var e=ii(t),n=Bn[e];if("function"!=typeof n||!(e in Kn.prototype))return!1;if(t===n)return!0;var r=oi(n);return!!r&&t===r[0]}(kn&&di(new kn(new ArrayBuffer(1)))!=P||Sn&&di(new Sn)!=w||An&&di(An.resolve())!=A||Dn&&di(new Dn)!=C||Cn&&di(new Cn)!=T)&&(di=function(t){var e=Sr(t),n=e==S?t.constructor:o,r=n?Bi(n):"";if(r)switch(r){case On:return P;case Pn:return w;case Mn:return A;case En:return C;case In:return T}return e});var bi=Ot?Za:yu;function wi(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Tt)}function ki(t){return t==t&&!es(t)}function Si(t,e){return function(n){return null!=n&&n[t]===e&&(e!==o||t in St(n))}}function Ai(t,e,n){return e=yn(e===o?t.length-1:e,0),function(){for(var o=arguments,i=-1,a=yn(o.length-e,0),s=r(a);++i<a;)s[i]=o[e+i];i=-1;for(var u=r(e+1);++i<e;)u[i]=o[i];return u[e]=n(s),ye(t,this,u)}}function Di(t,e){return e.length<2?t:wr(t,eo(e,0,-1))}function Ci(t,e){for(var n=t.length,r=vn(e.length,n),i=Lo(t);r--;){var a=e[r];t[r]=yi(a,n)?i[a]:o}return t}function Li(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Ri=Mi(Zr),Ti=He||function(t,e){return ie.setTimeout(t,e)},Oi=Mi(Jr);function Pi(t,e,n){var r=e+"";return Oi(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(it,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return _e(p,(function(n){var r="_."+n[0];e&n[1]&&!ke(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(at);return e?e[1].split(st):[]}(r),n)))}function Mi(t){var e=0,n=0;return function(){var r=_n(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(o,arguments)}}function Ei(t,e){var n=-1,r=t.length,i=r-1;for(e=e===o?r:e;++n<e;){var a=Gr(n,i),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var Ii,ji,Fi=(Ii=Ia((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,o){e.push(r?o.replace(ct,"$1"):n||t)})),e}),(function(t){return 500===ji.size&&ji.clear(),t})),ji=Ii.cache,Ii);function Hi(t){if("string"==typeof t||ls(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Bi(t){if(null!=t){try{return Pt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ni(t){if(t instanceof Kn)return t.clone();var e=new zn(t.__wrapped__,t.__chain__);return e.__actions__=Lo(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ui=Xr((function(t,e){return Xa(t)?cr(t,mr(e,1,Xa,!0)):[]})),zi=Xr((function(t,e){var n=$i(e);return Xa(n)&&(n=o),Xa(t)?cr(t,mr(e,1,Xa,!0),si(n,2)):[]})),Ki=Xr((function(t,e){var n=$i(e);return Xa(n)&&(n=o),Xa(t)?cr(t,mr(e,1,Xa,!0),o,n):[]}));function Wi(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:gs(n);return o<0&&(o=yn(r+o,0)),Pe(t,si(e,3),o)}function Yi(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==o&&(i=gs(n),i=n<0?yn(r+i,0):vn(i,r-1)),Pe(t,si(e,3),i,!0)}function Gi(t){return null!=t&&t.length?mr(t,1):[]}function Vi(t){return t&&t.length?t[0]:o}var Xi=Xr((function(t){var e=Ae(t,mo);return e.length&&e[0]===t[0]?Lr(e):[]})),qi=Xr((function(t){var e=$i(t),n=Ae(t,mo);return e===$i(n)?e=o:n.pop(),n.length&&n[0]===t[0]?Lr(n,si(e,2)):[]})),Qi=Xr((function(t){var e=$i(t),n=Ae(t,mo);return(e="function"==typeof e?e:o)&&n.pop(),n.length&&n[0]===t[0]?Lr(n,o,e):[]}));function $i(t){var e=null==t?0:t.length;return e?t[e-1]:o}var Zi=Xr(Ji);function Ji(t,e){return t&&t.length&&e&&e.length?Wr(t,e):t}var ta=ei((function(t,e){var n=null==t?0:t.length,r=ir(t,e);return Yr(t,Ae(e,(function(t){return yi(t,n)?+t:t})).sort(Ao)),r}));function ea(t){return null==t?t:wn.call(t)}var na=Xr((function(t){return uo(mr(t,1,Xa,!0))})),ra=Xr((function(t){var e=$i(t);return Xa(e)&&(e=o),uo(mr(t,1,Xa,!0),si(e,2))})),oa=Xr((function(t){var e=$i(t);return e="function"==typeof e?e:o,uo(mr(t,1,Xa,!0),o,e)}));function ia(t){if(!t||!t.length)return[];var e=0;return t=we(t,(function(t){if(Xa(t))return e=yn(t.length,e),!0})),Ue(e,(function(e){return Ae(t,Fe(e))}))}function aa(t,e){if(!t||!t.length)return[];var n=ia(t);return null==e?n:Ae(n,(function(t){return ye(e,o,t)}))}var sa=Xr((function(t,e){return Xa(t)?cr(t,e):[]})),ua=Xr((function(t){return po(we(t,Xa))})),la=Xr((function(t){var e=$i(t);return Xa(e)&&(e=o),po(we(t,Xa),si(e,2))})),ca=Xr((function(t){var e=$i(t);return e="function"==typeof e?e:o,po(we(t,Xa),o,e)})),ha=Xr(ia),fa=Xr((function(t){var e=t.length,n=e>1?t[e-1]:o;return n="function"==typeof n?(t.pop(),n):o,aa(t,n)}));function da(t){var e=Bn(t);return e.__chain__=!0,e}function pa(t,e){return e(t)}var ga=ei((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return ir(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Kn&&yi(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:pa,args:[i],thisArg:o}),new zn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(o),t}))):this.thru(i)})),ma=To((function(t,e,n){Mt.call(t,n)?++t[n]:or(t,n,1)})),ya=Fo(Wi),va=Fo(Yi);function _a(t,e){return(Ya(t)?_e:hr)(t,si(e,3))}function xa(t,e){return(Ya(t)?xe:fr)(t,si(e,3))}var ba=To((function(t,e,n){Mt.call(t,n)?t[n].push(e):or(t,n,[e])})),wa=Xr((function(t,e,n){var o=-1,i="function"==typeof e,a=Va(t)?r(t.length):[];return hr(t,(function(t){a[++o]=i?ye(e,t,n):Rr(t,e,n)})),a})),ka=To((function(t,e,n){or(t,n,e)}));function Sa(t,e){return(Ya(t)?Ae:Fr)(t,si(e,3))}var Aa=To((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Da=Xr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&vi(t,e[0],e[1])?e=[]:n>2&&vi(e[0],e[1],e[2])&&(e=[e[0]]),zr(t,mr(e,1),[])})),Ca=Te||function(){return ie.Date.now()};function La(t,e,n){return e=n?o:e,e=t&&null==e?t.length:e,Qo(t,l,o,o,o,o,e)}function Ra(t,e){var n;if("function"!=typeof e)throw new Ct(i);return t=gs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=o),n}}var Ta=Xr((function(t,e,n){var r=1;if(n.length){var o=en(n,ai(Ta));r|=u}return Qo(t,r,e,n,o)})),Oa=Xr((function(t,e,n){var r=3;if(n.length){var o=en(n,ai(Oa));r|=u}return Qo(e,r,t,n,o)}));function Pa(t,e,n){var r,a,s,u,l,c,h=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new Ct(i);function g(e){var n=r,i=a;return r=a=o,h=e,u=t.apply(i,n)}function m(t){return h=t,l=Ti(v,e),f?g(t):u}function y(t){var n=t-c;return c===o||n>=e||n<0||d&&t-h>=s}function v(){var t=Ca();if(y(t))return _(t);l=Ti(v,function(t){var n=e-(t-c);return d?vn(n,s-(t-h)):n}(t))}function _(t){return l=o,p&&r?g(t):(r=a=o,u)}function x(){var t=Ca(),n=y(t);if(r=arguments,a=this,c=t,n){if(l===o)return m(c);if(d)return bo(l),l=Ti(v,e),g(c)}return l===o&&(l=Ti(v,e)),u}return e=ys(e)||0,es(n)&&(f=!!n.leading,s=(d="maxWait"in n)?yn(ys(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p),x.cancel=function(){l!==o&&bo(l),h=0,r=c=a=l=o},x.flush=function(){return l===o?u:_(Ca())},x}var Ma=Xr((function(t,e){return lr(t,1,e)})),Ea=Xr((function(t,e,n){return lr(t,ys(e)||0,n)}));function Ia(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Ct(i);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(Ia.Cache||Gn),n}function ja(t){if("function"!=typeof t)throw new Ct(i);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ia.Cache=Gn;var Fa=_o((function(t,e){var n=(e=1==e.length&&Ya(e[0])?Ae(e[0],Ke(si())):Ae(mr(e,1),Ke(si()))).length;return Xr((function(r){for(var o=-1,i=vn(r.length,n);++o<i;)r[o]=e[o].call(this,r[o]);return ye(t,this,r)}))})),Ha=Xr((function(t,e){var n=en(e,ai(Ha));return Qo(t,u,o,e,n)})),Ba=Xr((function(t,e){var n=en(e,ai(Ba));return Qo(t,64,o,e,n)})),Na=ei((function(t,e){return Qo(t,256,o,o,o,e)}));function Ua(t,e){return t===e||t!=t&&e!=e}var za=Yo(Ar),Ka=Yo((function(t,e){return t>=e})),Wa=Tr(function(){return arguments}())?Tr:function(t){return ns(t)&&Mt.call(t,"callee")&&!te.call(t,"callee")},Ya=r.isArray,Ga=he?Ke(he):function(t){return ns(t)&&Sr(t)==O};function Va(t){return null!=t&&ts(t.length)&&!Za(t)}function Xa(t){return ns(t)&&Va(t)}var qa=dn||yu,Qa=fe?Ke(fe):function(t){return ns(t)&&Sr(t)==v};function $a(t){if(!ns(t))return!1;var e=Sr(t);return e==_||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!is(t)}function Za(t){if(!es(t))return!1;var e=Sr(t);return e==x||e==b||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ja(t){return"number"==typeof t&&t==gs(t)}function ts(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function es(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ns(t){return null!=t&&"object"==typeof t}var rs=de?Ke(de):function(t){return ns(t)&&di(t)==w};function os(t){return"number"==typeof t||ns(t)&&Sr(t)==k}function is(t){if(!ns(t)||Sr(t)!=S)return!1;var e=Gt(t);if(null===e)return!0;var n=Mt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Pt.call(n)==Ft}var as=pe?Ke(pe):function(t){return ns(t)&&Sr(t)==D},ss=ge?Ke(ge):function(t){return ns(t)&&di(t)==C};function us(t){return"string"==typeof t||!Ya(t)&&ns(t)&&Sr(t)==L}function ls(t){return"symbol"==typeof t||ns(t)&&Sr(t)==R}var cs=me?Ke(me):function(t){return ns(t)&&ts(t.length)&&!!Zt[Sr(t)]},hs=Yo(jr),fs=Yo((function(t,e){return t<=e}));function ds(t){if(!t)return[];if(Va(t))return us(t)?an(t):Lo(t);if(ae&&t[ae])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ae]());var e=di(t);return(e==w?Je:e==C?nn:Us)(t)}function ps(t){return t?(t=ys(t))===c||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function gs(t){var e=ps(t),n=e%1;return e==e?n?e-n:e:0}function ms(t){return t?ar(gs(t),0,d):0}function ys(t){if("number"==typeof t)return t;if(ls(t))return f;if(es(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=es(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=ze(t);var n=pt.test(t);return n||mt.test(t)?ne(t.slice(2),n?2:8):dt.test(t)?f:+t}function vs(t){return Ro(t,Ms(t))}function _s(t){return null==t?"":so(t)}var xs=Oo((function(t,e){if(wi(e)||Va(e))Ro(e,Ps(e),t);else for(var n in e)Mt.call(e,n)&&tr(t,n,e[n])})),bs=Oo((function(t,e){Ro(e,Ms(e),t)})),ws=Oo((function(t,e,n,r){Ro(e,Ms(e),t,r)})),ks=Oo((function(t,e,n,r){Ro(e,Ps(e),t,r)})),Ss=ei(ir),As=Xr((function(t,e){t=St(t);var n=-1,r=e.length,i=r>2?e[2]:o;for(i&&vi(e[0],e[1],i)&&(r=1);++n<r;)for(var a=e[n],s=Ms(a),u=-1,l=s.length;++u<l;){var c=s[u],h=t[c];(h===o||Ua(h,Tt[c])&&!Mt.call(t,c))&&(t[c]=a[c])}return t})),Ds=Xr((function(t){return t.push(o,Zo),ye(Is,o,t)}));function Cs(t,e,n){var r=null==t?o:wr(t,e);return r===o?n:r}function Ls(t,e){return null!=t&&pi(t,e,Cr)}var Rs=No((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=jt.call(e)),t[e]=n}),eu(ou)),Ts=No((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=jt.call(e)),Mt.call(t,e)?t[e].push(n):t[e]=[n]}),si),Os=Xr(Rr);function Ps(t){return Va(t)?qn(t):Ir(t)}function Ms(t){return Va(t)?qn(t,!0):function(t){if(!es(t))return function(t){var e=[];if(null!=t)for(var n in St(t))e.push(n);return e}(t);var e=wi(t),n=[];for(var r in t)("constructor"!=r||!e&&Mt.call(t,r))&&n.push(r);return n}(t)}var Es=Oo((function(t,e,n){Nr(t,e,n)})),Is=Oo((function(t,e,n,r){Nr(t,e,n,r)})),js=ei((function(t,e){var n={};if(null==t)return n;var r=!1;e=Ae(e,(function(e){return e=vo(e,t),r||(r=e.length>1),e})),Ro(t,ri(t),n),r&&(n=sr(n,7,Jo));for(var o=e.length;o--;)lo(n,e[o]);return n})),Fs=ei((function(t,e){return null==t?{}:function(t,e){return Kr(t,e,(function(e,n){return Ls(t,n)}))}(t,e)}));function Hs(t,e){if(null==t)return{};var n=Ae(ri(t),(function(t){return[t]}));return e=si(e),Kr(t,n,(function(t,n){return e(t,n[0])}))}var Bs=qo(Ps),Ns=qo(Ms);function Us(t){return null==t?[]:We(t,Ps(t))}var zs=Io((function(t,e,n){return e=e.toLowerCase(),t+(n?Ks(e):e)}));function Ks(t){return $s(_s(t).toLowerCase())}function Ws(t){return(t=_s(t))&&t.replace(vt,qe).replace(Yt,"")}var Ys=Io((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Gs=Io((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Vs=Eo("toLowerCase"),Xs=Io((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),qs=Io((function(t,e,n){return t+(n?" ":"")+$s(e)})),Qs=Io((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),$s=Eo("toUpperCase");function Zs(t,e,n){return t=_s(t),(e=n?o:e)===o?function(t){return qt.test(t)}(t)?function(t){return t.match(Vt)||[]}(t):function(t){return t.match(ut)||[]}(t):t.match(e)||[]}var Js=Xr((function(t,e){try{return ye(t,o,e)}catch(t){return $a(t)?t:new bt(t)}})),tu=ei((function(t,e){return _e(e,(function(e){e=Hi(e),or(t,e,Ta(t[e],t))})),t}));function eu(t){return function(){return t}}var nu=Ho(),ru=Ho(!0);function ou(t){return t}function iu(t){return Er("function"==typeof t?t:sr(t,1))}var au=Xr((function(t,e){return function(n){return Rr(n,t,e)}})),su=Xr((function(t,e){return function(n){return Rr(t,n,e)}}));function uu(t,e,n){var r=Ps(e),o=br(e,r);null!=n||es(e)&&(o.length||!r.length)||(n=e,e=t,t=this,o=br(e,Ps(e)));var i=!(es(n)&&"chain"in n&&!n.chain),a=Za(t);return _e(o,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(i||e){var n=t(this.__wrapped__),o=n.__actions__=Lo(this.__actions__);return o.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,De([this.value()],arguments))})})),t}function lu(){}var cu=zo(Ae),hu=zo(be),fu=zo(Re);function du(t){return _i(t)?Fe(Hi(t)):function(t){return function(e){return wr(e,t)}}(t)}var pu=Wo(),gu=Wo(!0);function mu(){return[]}function yu(){return!1}var vu,_u=Uo((function(t,e){return t+e}),0),xu=Vo("ceil"),bu=Uo((function(t,e){return t/e}),1),wu=Vo("floor"),ku=Uo((function(t,e){return t*e}),1),Su=Vo("round"),Au=Uo((function(t,e){return t-e}),0);return Bn.after=function(t,e){if("function"!=typeof e)throw new Ct(i);return t=gs(t),function(){if(--t<1)return e.apply(this,arguments)}},Bn.ary=La,Bn.assign=xs,Bn.assignIn=bs,Bn.assignInWith=ws,Bn.assignWith=ks,Bn.at=Ss,Bn.before=Ra,Bn.bind=Ta,Bn.bindAll=tu,Bn.bindKey=Oa,Bn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ya(t)?t:[t]},Bn.chain=da,Bn.chunk=function(t,e,n){e=(n?vi(t,e,n):e===o)?1:yn(gs(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var a=0,s=0,u=r(cn(i/e));a<i;)u[s++]=eo(t,a,a+=e);return u},Bn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,o=[];++e<n;){var i=t[e];i&&(o[r++]=i)}return o},Bn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],o=t;o--;)e[o-1]=arguments[o];return De(Ya(n)?Lo(n):[n],mr(e,1))},Bn.cond=function(t){var e=null==t?0:t.length,n=si();return t=e?Ae(t,(function(t){if("function"!=typeof t[1])throw new Ct(i);return[n(t[0]),t[1]]})):[],Xr((function(n){for(var r=-1;++r<e;){var o=t[r];if(ye(o[0],this,n))return ye(o[1],this,n)}}))},Bn.conforms=function(t){return function(t){var e=Ps(t);return function(n){return ur(n,t,e)}}(sr(t,1))},Bn.constant=eu,Bn.countBy=ma,Bn.create=function(t,e){var n=Nn(t);return null==e?n:rr(n,e)},Bn.curry=function t(e,n,r){var i=Qo(e,8,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},Bn.curryRight=function t(e,n,r){var i=Qo(e,16,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},Bn.debounce=Pa,Bn.defaults=As,Bn.defaultsDeep=Ds,Bn.defer=Ma,Bn.delay=Ea,Bn.difference=Ui,Bn.differenceBy=zi,Bn.differenceWith=Ki,Bn.drop=function(t,e,n){var r=null==t?0:t.length;return r?eo(t,(e=n||e===o?1:gs(e))<0?0:e,r):[]},Bn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?eo(t,0,(e=r-(e=n||e===o?1:gs(e)))<0?0:e):[]},Bn.dropRightWhile=function(t,e){return t&&t.length?ho(t,si(e,3),!0,!0):[]},Bn.dropWhile=function(t,e){return t&&t.length?ho(t,si(e,3),!0):[]},Bn.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&vi(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=gs(n))<0&&(n=-n>i?0:i+n),(r=r===o||r>i?i:gs(r))<0&&(r+=i),r=n>r?0:ms(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Bn.filter=function(t,e){return(Ya(t)?we:gr)(t,si(e,3))},Bn.flatMap=function(t,e){return mr(Sa(t,e),1)},Bn.flatMapDeep=function(t,e){return mr(Sa(t,e),c)},Bn.flatMapDepth=function(t,e,n){return n=n===o?1:gs(n),mr(Sa(t,e),n)},Bn.flatten=Gi,Bn.flattenDeep=function(t){return null!=t&&t.length?mr(t,c):[]},Bn.flattenDepth=function(t,e){return null!=t&&t.length?mr(t,e=e===o?1:gs(e)):[]},Bn.flip=function(t){return Qo(t,512)},Bn.flow=nu,Bn.flowRight=ru,Bn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var o=t[e];r[o[0]]=o[1]}return r},Bn.functions=function(t){return null==t?[]:br(t,Ps(t))},Bn.functionsIn=function(t){return null==t?[]:br(t,Ms(t))},Bn.groupBy=ba,Bn.initial=function(t){return null!=t&&t.length?eo(t,0,-1):[]},Bn.intersection=Xi,Bn.intersectionBy=qi,Bn.intersectionWith=Qi,Bn.invert=Rs,Bn.invertBy=Ts,Bn.invokeMap=wa,Bn.iteratee=iu,Bn.keyBy=ka,Bn.keys=Ps,Bn.keysIn=Ms,Bn.map=Sa,Bn.mapKeys=function(t,e){var n={};return e=si(e,3),_r(t,(function(t,r,o){or(n,e(t,r,o),t)})),n},Bn.mapValues=function(t,e){var n={};return e=si(e,3),_r(t,(function(t,r,o){or(n,r,e(t,r,o))})),n},Bn.matches=function(t){return Hr(sr(t,1))},Bn.matchesProperty=function(t,e){return Br(t,sr(e,1))},Bn.memoize=Ia,Bn.merge=Es,Bn.mergeWith=Is,Bn.method=au,Bn.methodOf=su,Bn.mixin=uu,Bn.negate=ja,Bn.nthArg=function(t){return t=gs(t),Xr((function(e){return Ur(e,t)}))},Bn.omit=js,Bn.omitBy=function(t,e){return Hs(t,ja(si(e)))},Bn.once=function(t){return Ra(2,t)},Bn.orderBy=function(t,e,n,r){return null==t?[]:(Ya(e)||(e=null==e?[]:[e]),Ya(n=r?o:n)||(n=null==n?[]:[n]),zr(t,e,n))},Bn.over=cu,Bn.overArgs=Fa,Bn.overEvery=hu,Bn.overSome=fu,Bn.partial=Ha,Bn.partialRight=Ba,Bn.partition=Aa,Bn.pick=Fs,Bn.pickBy=Hs,Bn.property=du,Bn.propertyOf=function(t){return function(e){return null==t?o:wr(t,e)}},Bn.pull=Zi,Bn.pullAll=Ji,Bn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Wr(t,e,si(n,2)):t},Bn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Wr(t,e,o,n):t},Bn.pullAt=ta,Bn.range=pu,Bn.rangeRight=gu,Bn.rearg=Na,Bn.reject=function(t,e){return(Ya(t)?we:gr)(t,ja(si(e,3)))},Bn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,o=[],i=t.length;for(e=si(e,3);++r<i;){var a=t[r];e(a,r,t)&&(n.push(a),o.push(r))}return Yr(t,o),n},Bn.rest=function(t,e){if("function"!=typeof t)throw new Ct(i);return Xr(t,e=e===o?e:gs(e))},Bn.reverse=ea,Bn.sampleSize=function(t,e,n){return e=(n?vi(t,e,n):e===o)?1:gs(e),(Ya(t)?$n:Qr)(t,e)},Bn.set=function(t,e,n){return null==t?t:$r(t,e,n)},Bn.setWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:$r(t,e,n,r)},Bn.shuffle=function(t){return(Ya(t)?Zn:to)(t)},Bn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&vi(t,e,n)?(e=0,n=r):(e=null==e?0:gs(e),n=n===o?r:gs(n)),eo(t,e,n)):[]},Bn.sortBy=Da,Bn.sortedUniq=function(t){return t&&t.length?io(t):[]},Bn.sortedUniqBy=function(t,e){return t&&t.length?io(t,si(e,2)):[]},Bn.split=function(t,e,n){return n&&"number"!=typeof n&&vi(t,e,n)&&(e=n=o),(n=n===o?d:n>>>0)?(t=_s(t))&&("string"==typeof e||null!=e&&!as(e))&&!(e=so(e))&&Ze(t)?xo(an(t),0,n):t.split(e,n):[]},Bn.spread=function(t,e){if("function"!=typeof t)throw new Ct(i);return e=null==e?0:yn(gs(e),0),Xr((function(n){var r=n[e],o=xo(n,0,e);return r&&De(o,r),ye(t,this,o)}))},Bn.tail=function(t){var e=null==t?0:t.length;return e?eo(t,1,e):[]},Bn.take=function(t,e,n){return t&&t.length?eo(t,0,(e=n||e===o?1:gs(e))<0?0:e):[]},Bn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?eo(t,(e=r-(e=n||e===o?1:gs(e)))<0?0:e,r):[]},Bn.takeRightWhile=function(t,e){return t&&t.length?ho(t,si(e,3),!1,!0):[]},Bn.takeWhile=function(t,e){return t&&t.length?ho(t,si(e,3)):[]},Bn.tap=function(t,e){return e(t),t},Bn.throttle=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new Ct(i);return es(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Pa(t,e,{leading:r,maxWait:e,trailing:o})},Bn.thru=pa,Bn.toArray=ds,Bn.toPairs=Bs,Bn.toPairsIn=Ns,Bn.toPath=function(t){return Ya(t)?Ae(t,Hi):ls(t)?[t]:Lo(Fi(_s(t)))},Bn.toPlainObject=vs,Bn.transform=function(t,e,n){var r=Ya(t),o=r||qa(t)||cs(t);if(e=si(e,4),null==n){var i=t&&t.constructor;n=o?r?new i:[]:es(t)&&Za(i)?Nn(Gt(t)):{}}return(o?_e:_r)(t,(function(t,r,o){return e(n,t,r,o)})),n},Bn.unary=function(t){return La(t,1)},Bn.union=na,Bn.unionBy=ra,Bn.unionWith=oa,Bn.uniq=function(t){return t&&t.length?uo(t):[]},Bn.uniqBy=function(t,e){return t&&t.length?uo(t,si(e,2)):[]},Bn.uniqWith=function(t,e){return e="function"==typeof e?e:o,t&&t.length?uo(t,o,e):[]},Bn.unset=function(t,e){return null==t||lo(t,e)},Bn.unzip=ia,Bn.unzipWith=aa,Bn.update=function(t,e,n){return null==t?t:co(t,e,yo(n))},Bn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:co(t,e,yo(n),r)},Bn.values=Us,Bn.valuesIn=function(t){return null==t?[]:We(t,Ms(t))},Bn.without=sa,Bn.words=Zs,Bn.wrap=function(t,e){return Ha(yo(e),t)},Bn.xor=ua,Bn.xorBy=la,Bn.xorWith=ca,Bn.zip=ha,Bn.zipObject=function(t,e){return go(t||[],e||[],tr)},Bn.zipObjectDeep=function(t,e){return go(t||[],e||[],$r)},Bn.zipWith=fa,Bn.entries=Bs,Bn.entriesIn=Ns,Bn.extend=bs,Bn.extendWith=ws,uu(Bn,Bn),Bn.add=_u,Bn.attempt=Js,Bn.camelCase=zs,Bn.capitalize=Ks,Bn.ceil=xu,Bn.clamp=function(t,e,n){return n===o&&(n=e,e=o),n!==o&&(n=(n=ys(n))==n?n:0),e!==o&&(e=(e=ys(e))==e?e:0),ar(ys(t),e,n)},Bn.clone=function(t){return sr(t,4)},Bn.cloneDeep=function(t){return sr(t,5)},Bn.cloneDeepWith=function(t,e){return sr(t,5,e="function"==typeof e?e:o)},Bn.cloneWith=function(t,e){return sr(t,4,e="function"==typeof e?e:o)},Bn.conformsTo=function(t,e){return null==e||ur(t,e,Ps(e))},Bn.deburr=Ws,Bn.defaultTo=function(t,e){return null==t||t!=t?e:t},Bn.divide=bu,Bn.endsWith=function(t,e,n){t=_s(t),e=so(e);var r=t.length,i=n=n===o?r:ar(gs(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},Bn.eq=Ua,Bn.escape=function(t){return(t=_s(t))&&X.test(t)?t.replace(G,Qe):t},Bn.escapeRegExp=function(t){return(t=_s(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Bn.every=function(t,e,n){var r=Ya(t)?be:dr;return n&&vi(t,e,n)&&(e=o),r(t,si(e,3))},Bn.find=ya,Bn.findIndex=Wi,Bn.findKey=function(t,e){return Oe(t,si(e,3),_r)},Bn.findLast=va,Bn.findLastIndex=Yi,Bn.findLastKey=function(t,e){return Oe(t,si(e,3),xr)},Bn.floor=wu,Bn.forEach=_a,Bn.forEachRight=xa,Bn.forIn=function(t,e){return null==t?t:yr(t,si(e,3),Ms)},Bn.forInRight=function(t,e){return null==t?t:vr(t,si(e,3),Ms)},Bn.forOwn=function(t,e){return t&&_r(t,si(e,3))},Bn.forOwnRight=function(t,e){return t&&xr(t,si(e,3))},Bn.get=Cs,Bn.gt=za,Bn.gte=Ka,Bn.has=function(t,e){return null!=t&&pi(t,e,Dr)},Bn.hasIn=Ls,Bn.head=Vi,Bn.identity=ou,Bn.includes=function(t,e,n,r){t=Va(t)?t:Us(t),n=n&&!r?gs(n):0;var o=t.length;return n<0&&(n=yn(o+n,0)),us(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&Me(t,e,n)>-1},Bn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:gs(n);return o<0&&(o=yn(r+o,0)),Me(t,e,o)},Bn.inRange=function(t,e,n){return e=ps(e),n===o?(n=e,e=0):n=ps(n),function(t,e,n){return t>=vn(e,n)&&t<yn(e,n)}(t=ys(t),e,n)},Bn.invoke=Os,Bn.isArguments=Wa,Bn.isArray=Ya,Bn.isArrayBuffer=Ga,Bn.isArrayLike=Va,Bn.isArrayLikeObject=Xa,Bn.isBoolean=function(t){return!0===t||!1===t||ns(t)&&Sr(t)==y},Bn.isBuffer=qa,Bn.isDate=Qa,Bn.isElement=function(t){return ns(t)&&1===t.nodeType&&!is(t)},Bn.isEmpty=function(t){if(null==t)return!0;if(Va(t)&&(Ya(t)||"string"==typeof t||"function"==typeof t.splice||qa(t)||cs(t)||Wa(t)))return!t.length;var e=di(t);if(e==w||e==C)return!t.size;if(wi(t))return!Ir(t).length;for(var n in t)if(Mt.call(t,n))return!1;return!0},Bn.isEqual=function(t,e){return Or(t,e)},Bn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:o)?n(t,e):o;return r===o?Or(t,e,o,n):!!r},Bn.isError=$a,Bn.isFinite=function(t){return"number"==typeof t&&pn(t)},Bn.isFunction=Za,Bn.isInteger=Ja,Bn.isLength=ts,Bn.isMap=rs,Bn.isMatch=function(t,e){return t===e||Pr(t,e,li(e))},Bn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:o,Pr(t,e,li(e),n)},Bn.isNaN=function(t){return os(t)&&t!=+t},Bn.isNative=function(t){if(bi(t))throw new bt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Mr(t)},Bn.isNil=function(t){return null==t},Bn.isNull=function(t){return null===t},Bn.isNumber=os,Bn.isObject=es,Bn.isObjectLike=ns,Bn.isPlainObject=is,Bn.isRegExp=as,Bn.isSafeInteger=function(t){return Ja(t)&&t>=-9007199254740991&&t<=h},Bn.isSet=ss,Bn.isString=us,Bn.isSymbol=ls,Bn.isTypedArray=cs,Bn.isUndefined=function(t){return t===o},Bn.isWeakMap=function(t){return ns(t)&&di(t)==T},Bn.isWeakSet=function(t){return ns(t)&&"[object WeakSet]"==Sr(t)},Bn.join=function(t,e){return null==t?"":gn.call(t,e)},Bn.kebabCase=Ys,Bn.last=$i,Bn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==o&&(i=(i=gs(n))<0?yn(r+i,0):vn(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):Pe(t,Ie,i,!0)},Bn.lowerCase=Gs,Bn.lowerFirst=Vs,Bn.lt=hs,Bn.lte=fs,Bn.max=function(t){return t&&t.length?pr(t,ou,Ar):o},Bn.maxBy=function(t,e){return t&&t.length?pr(t,si(e,2),Ar):o},Bn.mean=function(t){return je(t,ou)},Bn.meanBy=function(t,e){return je(t,si(e,2))},Bn.min=function(t){return t&&t.length?pr(t,ou,jr):o},Bn.minBy=function(t,e){return t&&t.length?pr(t,si(e,2),jr):o},Bn.stubArray=mu,Bn.stubFalse=yu,Bn.stubObject=function(){return{}},Bn.stubString=function(){return""},Bn.stubTrue=function(){return!0},Bn.multiply=ku,Bn.nth=function(t,e){return t&&t.length?Ur(t,gs(e)):o},Bn.noConflict=function(){return ie._===this&&(ie._=Ht),this},Bn.noop=lu,Bn.now=Ca,Bn.pad=function(t,e,n){t=_s(t);var r=(e=gs(e))?on(t):0;if(!e||r>=e)return t;var o=(e-r)/2;return Ko(hn(o),n)+t+Ko(cn(o),n)},Bn.padEnd=function(t,e,n){t=_s(t);var r=(e=gs(e))?on(t):0;return e&&r<e?t+Ko(e-r,n):t},Bn.padStart=function(t,e,n){t=_s(t);var r=(e=gs(e))?on(t):0;return e&&r<e?Ko(e-r,n)+t:t},Bn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),xn(_s(t).replace(rt,""),e||0)},Bn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&vi(t,e,n)&&(e=n=o),n===o&&("boolean"==typeof e?(n=e,e=o):"boolean"==typeof t&&(n=t,t=o)),t===o&&e===o?(t=0,e=1):(t=ps(t),e===o?(e=t,t=0):e=ps(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=bn();return vn(t+i*(e-t+ee("1e-"+((i+"").length-1))),e)}return Gr(t,e)},Bn.reduce=function(t,e,n){var r=Ya(t)?Ce:Be,o=arguments.length<3;return r(t,si(e,4),n,o,hr)},Bn.reduceRight=function(t,e,n){var r=Ya(t)?Le:Be,o=arguments.length<3;return r(t,si(e,4),n,o,fr)},Bn.repeat=function(t,e,n){return e=(n?vi(t,e,n):e===o)?1:gs(e),Vr(_s(t),e)},Bn.replace=function(){var t=arguments,e=_s(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Bn.result=function(t,e,n){var r=-1,i=(e=vo(e,t)).length;for(i||(i=1,t=o);++r<i;){var a=null==t?o:t[Hi(e[r])];a===o&&(r=i,a=n),t=Za(a)?a.call(t):a}return t},Bn.round=Su,Bn.runInContext=t,Bn.sample=function(t){return(Ya(t)?Qn:qr)(t)},Bn.size=function(t){if(null==t)return 0;if(Va(t))return us(t)?on(t):t.length;var e=di(t);return e==w||e==C?t.size:Ir(t).length},Bn.snakeCase=Xs,Bn.some=function(t,e,n){var r=Ya(t)?Re:no;return n&&vi(t,e,n)&&(e=o),r(t,si(e,3))},Bn.sortedIndex=function(t,e){return ro(t,e)},Bn.sortedIndexBy=function(t,e,n){return oo(t,e,si(n,2))},Bn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ro(t,e);if(r<n&&Ua(t[r],e))return r}return-1},Bn.sortedLastIndex=function(t,e){return ro(t,e,!0)},Bn.sortedLastIndexBy=function(t,e,n){return oo(t,e,si(n,2),!0)},Bn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ro(t,e,!0)-1;if(Ua(t[n],e))return n}return-1},Bn.startCase=qs,Bn.startsWith=function(t,e,n){return t=_s(t),n=null==n?0:ar(gs(n),0,t.length),e=so(e),t.slice(n,n+e.length)==e},Bn.subtract=Au,Bn.sum=function(t){return t&&t.length?Ne(t,ou):0},Bn.sumBy=function(t,e){return t&&t.length?Ne(t,si(e,2)):0},Bn.template=function(t,e,n){var r=Bn.templateSettings;n&&vi(t,e,n)&&(e=o),t=_s(t),e=ws({},e,r,$o);var i,a,s=ws({},e.imports,r.imports,$o),u=Ps(s),l=We(s,u),c=0,h=e.interpolate||_t,f="__p += '",d=At((e.escape||_t).source+"|"+h.source+"|"+(h===$?ht:_t).source+"|"+(e.evaluate||_t).source+"|$","g"),p="//# sourceURL="+(Mt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++$t+"]")+"\n";t.replace(d,(function(e,n,r,o,s,u){return r||(r=o),f+=t.slice(c,u).replace(xt,$e),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e})),f+="';\n";var g=Mt.call(e,"variable")&&e.variable;if(g){if(lt.test(g))throw new bt("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(a?f.replace(z,""):f).replace(K,"$1").replace(W,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=Js((function(){return wt(u,p+"return "+f).apply(o,l)}));if(m.source=f,$a(m))throw m;return m},Bn.times=function(t,e){if((t=gs(t))<1||t>h)return[];var n=d,r=vn(t,d);e=si(e),t-=d;for(var o=Ue(r,e);++n<t;)e(n);return o},Bn.toFinite=ps,Bn.toInteger=gs,Bn.toLength=ms,Bn.toLower=function(t){return _s(t).toLowerCase()},Bn.toNumber=ys,Bn.toSafeInteger=function(t){return t?ar(gs(t),-9007199254740991,h):0===t?t:0},Bn.toString=_s,Bn.toUpper=function(t){return _s(t).toUpperCase()},Bn.trim=function(t,e,n){if((t=_s(t))&&(n||e===o))return ze(t);if(!t||!(e=so(e)))return t;var r=an(t),i=an(e);return xo(r,Ge(r,i),Ve(r,i)+1).join("")},Bn.trimEnd=function(t,e,n){if((t=_s(t))&&(n||e===o))return t.slice(0,sn(t)+1);if(!t||!(e=so(e)))return t;var r=an(t);return xo(r,0,Ve(r,an(e))+1).join("")},Bn.trimStart=function(t,e,n){if((t=_s(t))&&(n||e===o))return t.replace(rt,"");if(!t||!(e=so(e)))return t;var r=an(t);return xo(r,Ge(r,an(e))).join("")},Bn.truncate=function(t,e){var n=30,r="...";if(es(e)){var i="separator"in e?e.separator:i;n="length"in e?gs(e.length):n,r="omission"in e?so(e.omission):r}var a=(t=_s(t)).length;if(Ze(t)){var s=an(t);a=s.length}if(n>=a)return t;var u=n-on(r);if(u<1)return r;var l=s?xo(s,0,u).join(""):t.slice(0,u);if(i===o)return l+r;if(s&&(u+=l.length-u),as(i)){if(t.slice(u).search(i)){var c,h=l;for(i.global||(i=At(i.source,_s(ft.exec(i))+"g")),i.lastIndex=0;c=i.exec(h);)var f=c.index;l=l.slice(0,f===o?u:f)}}else if(t.indexOf(so(i),u)!=u){var d=l.lastIndexOf(i);d>-1&&(l=l.slice(0,d))}return l+r},Bn.unescape=function(t){return(t=_s(t))&&V.test(t)?t.replace(Y,un):t},Bn.uniqueId=function(t){var e=++Et;return _s(t)+e},Bn.upperCase=Qs,Bn.upperFirst=$s,Bn.each=_a,Bn.eachRight=xa,Bn.first=Vi,uu(Bn,(vu={},_r(Bn,(function(t,e){Mt.call(Bn.prototype,e)||(vu[e]=t)})),vu),{chain:!1}),Bn.VERSION="4.17.21",_e(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Bn[t].placeholder=Bn})),_e(["drop","take"],(function(t,e){Kn.prototype[t]=function(n){n=n===o?1:yn(gs(n),0);var r=this.__filtered__&&!e?new Kn(this):this.clone();return r.__filtered__?r.__takeCount__=vn(n,r.__takeCount__):r.__views__.push({size:vn(n,d),type:t+(r.__dir__<0?"Right":"")}),r},Kn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),_e(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Kn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:si(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),_e(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Kn.prototype[t]=function(){return this[n](1).value()[0]}})),_e(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Kn.prototype[t]=function(){return this.__filtered__?new Kn(this):this[n](1)}})),Kn.prototype.compact=function(){return this.filter(ou)},Kn.prototype.find=function(t){return this.filter(t).head()},Kn.prototype.findLast=function(t){return this.reverse().find(t)},Kn.prototype.invokeMap=Xr((function(t,e){return"function"==typeof t?new Kn(this):this.map((function(n){return Rr(n,t,e)}))})),Kn.prototype.reject=function(t){return this.filter(ja(si(t)))},Kn.prototype.slice=function(t,e){t=gs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Kn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==o&&(n=(e=gs(e))<0?n.dropRight(-e):n.take(e-t)),n)},Kn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Kn.prototype.toArray=function(){return this.take(d)},_r(Kn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=Bn[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);i&&(Bn.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof Kn,l=s[0],c=u||Ya(e),h=function(t){var e=i.apply(Bn,De([t],s));return r&&f?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var f=this.__chain__,d=!!this.__actions__.length,p=a&&!f,g=u&&!d;if(!a&&c){e=g?e:new Kn(this);var m=t.apply(e,s);return m.__actions__.push({func:pa,args:[h],thisArg:o}),new zn(m,f)}return p&&g?t.apply(this,s):(m=this.thru(h),p?r?m.value()[0]:m.value():m)})})),_e(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Lt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Bn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var o=this.value();return e.apply(Ya(o)?o:[],t)}return this[n]((function(n){return e.apply(Ya(n)?n:[],t)}))}})),_r(Kn.prototype,(function(t,e){var n=Bn[e];if(n){var r=n.name+"";Mt.call(Tn,r)||(Tn[r]=[]),Tn[r].push({name:e,func:n})}})),Tn[Bo(o,2).name]=[{name:"wrapper",func:o}],Kn.prototype.clone=function(){var t=new Kn(this.__wrapped__);return t.__actions__=Lo(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Lo(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Lo(this.__views__),t},Kn.prototype.reverse=function(){if(this.__filtered__){var t=new Kn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Kn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ya(t),r=e<0,o=n?t.length:0,i=function(t,e,n){for(var r=-1,o=n.length;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=vn(e,t+a);break;case"takeRight":t=yn(t,e-a)}}return{start:t,end:e}}(0,o,this.__views__),a=i.start,s=i.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,h=c.length,f=0,d=vn(u,this.__takeCount__);if(!n||!r&&o==u&&d==u)return fo(t,this.__actions__);var p=[];t:for(;u--&&f<d;){for(var g=-1,m=t[l+=e];++g<h;){var y=c[g],v=y.iteratee,_=y.type,x=v(m);if(2==_)m=x;else if(!x){if(1==_)continue t;break t}}p[f++]=m}return p},Bn.prototype.at=ga,Bn.prototype.chain=function(){return da(this)},Bn.prototype.commit=function(){return new zn(this.value(),this.__chain__)},Bn.prototype.next=function(){this.__values__===o&&(this.__values__=ds(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?o:this.__values__[this.__index__++]}},Bn.prototype.plant=function(t){for(var e,n=this;n instanceof Un;){var r=Ni(n);r.__index__=0,r.__values__=o,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},Bn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Kn){var e=t;return this.__actions__.length&&(e=new Kn(this)),(e=e.reverse()).__actions__.push({func:pa,args:[ea],thisArg:o}),new zn(e,this.__chain__)}return this.thru(ea)},Bn.prototype.toJSON=Bn.prototype.valueOf=Bn.prototype.value=function(){return fo(this.__wrapped__,this.__actions__)},Bn.prototype.first=Bn.prototype.head,ae&&(Bn.prototype[ae]=function(){return this}),Bn}();ie._=ln,(r=function(){return ln}.call(e,n,e,t))===o||(t.exports=r)}.call(this)},379:t=>{"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},a=[],s=0;s<t.length;s++){var u=t[s],l=r.base?u[0]+r.base:u[0],c=i[l]||0,h="".concat(l," ").concat(c);i[l]=c+1;var f=n(h),d={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==f)e[f].references++,e[f].updater(d);else{var p=o(d,r);r.byIndex=s,e.splice(s,0,{identifier:h,updater:p,references:1})}a.push(h)}return a}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var i=r(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var s=n(i[a]);e[s].references--}for(var u=r(t,o),l=0;l<i.length;l++){var c=n(i[l]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}i=u}}},569:t=>{"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},290:(t,e,n)=>{"use strict";var r=n(766);const o={src:[n(479),n(443),n(83),n(89)],sprite:{alarm:[0,1017.8684807256235],b2bContinue:[3e3,2218.7528344671196],bufferedHold:[7e3,1453.2653061224482],bufferedRotate:[1e4,890.8390022675743],bufferedSkip:[12e3,1918.9795918367345],collapse:[15e3,1698.2312925170077],combo01:[18e3,2477.68707482993],combo02:[22e3,2477.68707482993],combo03:[26e3,2477.68707482993],combo04:[3e4,2477.68707482993],combo05:[34e3,2477.68707482993],combo06:[38e3,2477.68707482993],combo07:[42e3,2477.68707482993],combo08:[46e3,2473.2199546485276],combo09:[5e4,2473.2199546485276],combo10:[54e3,1928.5714285714307],combo11:[57e3,1901.7913832199583],combo12:[6e4,1879.455782312924],combo13:[63e3,1861.6099773242638],combo14:[66e3,3315.8730158730095],combo15:[71e3,3417.1428571428632],combo16:[76e3,3564.557823129249],combo17:[81e3,3495.1020408163204],combo18:[86e3,3490.8163265306057],combo19:[91e3,3489.841269841264],deathWarning:[96e3,810.8163265306132],erase1:[98e3,1454.6258503401361],erase2:[101e3,1586.1904761904811],erase3:[104e3,1688.0498866213145],erase4:[107e3,1718.752834467125],gameDeath:[11e4,3156.780045351468],gameGo:[115e3,3210.408163265299],gameOver:[12e4,1973.2199546485276],gameReady:[123e3,3092.4716553287935],gameStart:[128e3,3101.882086167791],gameVictory:[133e3,3251.7460317460236],garbageFlyHit:[138e3,1946.4399092970552],garbageFlyReceive:[141e3,1939.31972789116],garbageFlySend:[144e3,3301.315192743772],garbageSpawn:[149e3,2287.188208616783],levelUp:[153e3,2070.3628117913695],lockWithoutHardDrop:[157e3,847.8684807256229],outOfResets:[159e3,3247.98185941043],pause:[164e3,3253.9455782312816],perfectClear:[169e3,3338.730158730158],pieceHardDrop:[174e3,970.226757369602],pieceHold:[176e3,853.6961451247294],pieceLand:[178e3,1092.5623582766377],pieceMove:[181e3,992.3356009070403],pieceRotate:[183e3,1124.8526077097551],pieceRotateT:[186e3,1667.1882086167784],pieceRotateTMini:[189e3,2221.904761904767],pieceSkip:[193e3,1108.5260770975083],pieceSlide:[196e3,370.29478458049425],pieceWallkick:[198e3,1340.5668934240396],tSpin0:[201e3,2197.9138321995606],tSpin1:[205e3,2197.9138321995606],tSpin2:[209e3,2322.9251700680325],tSpin3:[213e3,2505.215419501127],tSpinMini0:[217e3,2197.9138321995606],tSpinMini1:[221e3,2197.9138321995606],tSpinMini2:[225e3,2322.9251700680325]}};const i={src:[n(67),n(330),n(983),n(847)],sprite:{back:[0,1961.0430839002267],change:[3e3,1435.9863945578227],error:[6e3,1714.2857142857144],move:[9e3,1366.5759637188212],optionSelect:[12e3,2053.990929705215],select:[16e3,1828.9569160997737]}};class a{static loadSounds(t){null==t.instance&&(t.instance=new r.Howl(t.data.howlOptions),a.updateVolume())}static add(t,e=a.currentSoundbank){a.soundQueue[t]=e}static playQueue(){for(const t of Object.keys(a.soundQueue)){const e=a.soundQueue[t];null!=(null==e?void 0:e.data.eventAssignments[t])?(e.instance.play(e.data.eventAssignments[t]),delete a.soundQueue[t]):delete a.soundQueue[t]}}static updateVolume(){for(const t of Object.keys(a.soundbanks)){const e=a.soundbanks[t];null!=e.instance&&e.instance.volume(.25)}}static setSoundbank(t){a.loadSounds(t),a.currentSoundbank=t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){u(t,e,n[e])}))}return t}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),t}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?d(t):e}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}a.soundQueue={},a.soundbanks={tetrax:{data:new class{constructor(){this.howlOptions=o,this.eventAssignments={pieceMove:"pieceMove",pieceRotate:"pieceRotate",pieceRotateT:"pieceRotateT",pieceRotateTMini:"pieceRotateTMini",pieceWallkick:"pieceWallkick",pieceHold:"pieceHold",pieceSlide:"pieceSlide",pieceLand:"pieceLand",outOfResets:"outOfResets",bufferedHold:"bufferedHold",bufferedRotate:"bufferedRotate",bufferedSkip:"bufferedSkip",pieceHardDrop:"pieceHardDrop",lockWithoutHardDrop:"lockWithoutHardDrop",collapse:"collapse",erase1:"erase1",erase2:"erase2",erase3:"erase3",erase4:"erase4",tSpin0:"tSpin0",tSpin1:"tSpin1",tSpin2:"tSpin2",tSpin3:"tSpin3",tSpinMini0:"tSpinMini0",tSpinMini1:"tSpinMini1",tSpinMini2:"tSpinMini2",erase4b2b:"erase4",tSpin1b2b:"tSpin1",tSpin2b2b:"tSpin2",tSpin3b2b:"tSpin3",tSpinMini1b2b:"tSpinMini1",tSpinMini2b2b:"tSpinMini2",b2bContinue:"b2bContinue",perfectClear:"perfectClear",levelUp:"levelUp",pause:"pause",unpause:"pause",ready:"gameReady",start:"gameStart",gameDeath:"gameDeath",gameVictory:"gameVictory",gameOver:"gameOver",combo1:"combo01",combo2:"combo02",combo3:"combo03",combo4:"combo04",combo5:"combo05",combo6:"combo06",combo7:"combo07",combo8:"combo08",combo9:"combo09",combo10:"combo10",combo11:"combo11",combo12:"combo12",combo13:"combo13",combo14:"combo14",combo15:"combo16",combo16:"combo17",combo17:"combo18",combo18:"combo19",combo19:"combo20",combo20:"combo20"}}},instance:null},system:{data:new class{constructor(){this.howlOptions=i,this.eventAssignments={menuBack:"back",menuChange:"change",menuChoose:"optionSelect",menuConfirm:"select",menuSelect:"move"}}},instance:null}};var v={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,e){console&&console[t]&&console[t].apply(console,e)}},_=new(function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,t),this.init(e,n)}return f(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||v,this.options=e,this.debug=e.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,e,n,r){return r&&!this.debug?null:("string"==typeof t[0]&&(t[0]="".concat(n).concat(this.prefix," ").concat(t[0])),this.logger[e](t))}},{key:"create",value:function(e){return new t(this.logger,l({},{prefix:"".concat(this.prefix,":").concat(e,":")},this.options))}}]),t}()),x=function(){function t(){c(this,t),this.observers={}}return f(t,[{key:"on",value:function(t,e){var n=this;return t.split(" ").forEach((function(t){n.observers[t]=n.observers[t]||[],n.observers[t].push(e)})),this}},{key:"off",value:function(t,e){this.observers[t]&&(e?this.observers[t]=this.observers[t].filter((function(t){return t!==e})):delete this.observers[t])}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(this.observers[t]){var o=[].concat(this.observers[t]);o.forEach((function(t){t.apply(void 0,n)}))}if(this.observers["*"]){var i=[].concat(this.observers["*"]);i.forEach((function(e){e.apply(e,[t].concat(n))}))}}}]),t}();function b(){var t,e,n=new Promise((function(n,r){t=n,e=r}));return n.resolve=t,n.reject=e,n}function w(t){return null==t?"":""+t}function k(t,e,n){t.forEach((function(t){e[t]&&(n[t]=e[t])}))}function S(t,e,n){function r(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}function o(){return!t||"string"==typeof t}for(var i="string"!=typeof e?[].concat(e):e.split(".");i.length>1;){if(o())return{};var a=r(i.shift());!t[a]&&n&&(t[a]=new n),t=Object.prototype.hasOwnProperty.call(t,a)?t[a]:{}}return o()?{}:{obj:t,k:r(i.shift())}}function A(t,e,n){var r=S(t,e,Object);r.obj[r.k]=n}function D(t,e){var n=S(t,e),r=n.obj,o=n.k;if(r)return r[o]}function C(t,e,n){var r=D(t,n);return void 0!==r?r:D(e,n)}function L(t,e,n){for(var r in e)"__proto__"!==r&&"constructor"!==r&&(r in t?"string"==typeof t[r]||t[r]instanceof String||"string"==typeof e[r]||e[r]instanceof String?n&&(t[r]=e[r]):L(t[r],e[r],n):t[r]=e[r]);return t}function R(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var T={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function O(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,(function(t){return T[t]})):t}var P="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,M=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return c(this,e),n=p(this,g(e).call(this)),P&&x.call(d(n)),n.data=t||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n}return y(e,t),f(e,[{key:"addNamespaces",value:function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}},{key:"removeNamespaces",value:function(t){var e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}},{key:"getResource",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,i=[t,e];return n&&"string"!=typeof n&&(i=i.concat(n)),n&&"string"==typeof n&&(i=i.concat(o?n.split(o):n)),t.indexOf(".")>-1&&(i=t.split(".")),D(this.data,i)}},{key:"addResource",value:function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},i=this.options.keySeparator;void 0===i&&(i=".");var a=[t,e];n&&(a=a.concat(i?n.split(i):n)),t.indexOf(".")>-1&&(r=e,e=(a=t.split("."))[1]),this.addNamespaces(e),A(this.data,a,r),o.silent||this.emit("added",t,e,n,r)}},{key:"addResources",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var o in n)"string"!=typeof n[o]&&"[object Array]"!==Object.prototype.toString.apply(n[o])||this.addResource(t,e,o,n[o],{silent:!0});r.silent||this.emit("added",t,e,n)}},{key:"addResourceBundle",value:function(t,e,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[t,e];t.indexOf(".")>-1&&(r=n,n=e,e=(a=t.split("."))[1]),this.addNamespaces(e);var s=D(this.data,a)||{};r?L(s,n,o):s=l({},s,n),A(this.data,a,s),i.silent||this.emit("added",t,e,n)}},{key:"removeResourceBundle",value:function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}},{key:"hasResourceBundle",value:function(t,e){return void 0!==this.getResource(t,e)}},{key:"getResourceBundle",value:function(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?l({},{},this.getResource(t,e)):this.getResource(t,e)}},{key:"getDataByLanguage",value:function(t){return this.data[t]}},{key:"toJSON",value:function(){return this.data}}]),e}(x),E={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,n,r,o){var i=this;return t.forEach((function(t){i.processors[t]&&(e=i.processors[t].process(e,n,r,o))})),e}},I={},j=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c(this,e),n=p(this,g(e).call(this)),P&&x.call(d(n)),k(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,d(n)),n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=_.create("translator"),n}return y(e,t),f(e,[{key:"changeLanguage",value:function(t){t&&(this.language=t)}},{key:"exists",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(t,e);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(t,e){var n=void 0!==e.nsSeparator?e.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,o=e.ns||this.options.defaultNS;if(n&&t.indexOf(n)>-1){var i=t.match(this.interpolator.nestingRegexp);if(i&&i.length>0)return{key:t,namespaces:o};var a=t.split(n);(n!==r||n===r&&this.options.ns.indexOf(a[0])>-1)&&(o=a.shift()),t=a.join(r)}return"string"==typeof o&&(o=[o]),{key:t,namespaces:o}}},{key:"translate",value:function(t,n,r){var o=this;if("object"!==s(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==t)return"";Array.isArray(t)||(t=[String(t)]);var i=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,a=this.extractFromKey(t[t.length-1],n),u=a.key,c=a.namespaces,h=c[c.length-1],f=n.lng||this.language,d=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(f&&"cimode"===f.toLowerCase()){if(d){var p=n.nsSeparator||this.options.nsSeparator;return h+p+u}return u}var g=this.resolve(t,n),m=g&&g.res,y=g&&g.usedKey||u,v=g&&g.exactUsedKey||u,_=Object.prototype.toString.apply(m),x=["[object Number]","[object Function]","[object RegExp]"],b=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,k="string"!=typeof m&&"boolean"!=typeof m&&"number"!=typeof m;if(w&&m&&k&&x.indexOf(_)<0&&("string"!=typeof b||"[object Array]"!==_)){if(!n.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(y,m,n):"key '".concat(u," (").concat(this.language,")' returned an object instead of string.");if(i){var S="[object Array]"===_,A=S?[]:{},D=S?v:y;for(var C in m)if(Object.prototype.hasOwnProperty.call(m,C)){var L="".concat(D).concat(i).concat(C);A[C]=this.translate(L,l({},n,{joinArrays:!1,ns:c})),A[C]===L&&(A[C]=m[C])}m=A}}else if(w&&"string"==typeof b&&"[object Array]"===_)(m=m.join(b))&&(m=this.extendTranslation(m,t,n,r));else{var R=!1,T=!1,O=void 0!==n.count&&"string"!=typeof n.count,P=e.hasDefaultValue(n),M=O?this.pluralResolver.getSuffix(f,n.count):"",E=n["defaultValue".concat(M)]||n.defaultValue;!this.isValidLookup(m)&&P&&(R=!0,m=E),this.isValidLookup(m)||(T=!0,m=u);var I=P&&E!==m&&this.options.updateMissing;if(T||R||I){if(this.logger.log(I?"updateKey":"missingKey",f,h,u,I?E:m),i){var j=this.resolve(u,l({},n,{keySeparator:!1}));j&&j.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var F=[],H=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&H&&H[0])for(var B=0;B<H.length;B++)F.push(H[B]);else"all"===this.options.saveMissingTo?F=this.languageUtils.toResolveHierarchy(n.lng||this.language):F.push(n.lng||this.language);var N=function(t,e,r){o.options.missingKeyHandler?o.options.missingKeyHandler(t,h,e,I?r:m,I,n):o.backendConnector&&o.backendConnector.saveMissing&&o.backendConnector.saveMissing(t,h,e,I?r:m,I,n),o.emit("missingKey",t,h,e,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&O?F.forEach((function(t){o.pluralResolver.getSuffixes(t).forEach((function(e){N([t],u+e,n["defaultValue".concat(e)]||E)}))})):N(F,u,E))}m=this.extendTranslation(m,t,n,g,r),T&&m===u&&this.options.appendNamespaceToMissingKey&&(m="".concat(h,":").concat(u)),T&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(m))}return m}},{key:"extendTranslation",value:function(t,e,n,r,o){var i=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(l({},n,{interpolation:l({},this.options.interpolation,n.interpolation)}));var a,s=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(s){var u=t.match(this.interpolator.nestingRegexp);a=u&&u.length}var c=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(c=l({},this.options.interpolation.defaultVariables,c)),t=this.interpolator.interpolate(t,c,n.lng||this.language,n),s){var h=t.match(this.interpolator.nestingRegexp);a<(h&&h.length)&&(n.nest=!1)}!1!==n.nest&&(t=this.interpolator.nest(t,(function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return o&&o[0]===r[0]&&!n.context?(i.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(e[0])),null):i.translate.apply(i,r.concat([e]))}),n)),n.interpolation&&this.interpolator.reset()}var f=n.postProcess||this.options.postProcess,d="string"==typeof f?[f]:f;return null!=t&&d&&d.length&&!1!==n.applyPostProcessor&&(t=E.handle(d,t,e,this.options&&this.options.postProcessPassResolved?l({i18nResolved:r},n):n,this)),t}},{key:"resolve",value:function(t){var e,n,r,o,i,a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t&&(t=[t]),t.forEach((function(t){if(!a.isValidLookup(e)){var u=a.extractFromKey(t,s),l=u.key;n=l;var c=u.namespaces;a.options.fallbackNS&&(c=c.concat(a.options.fallbackNS));var h=void 0!==s.count&&"string"!=typeof s.count,f=void 0!==s.context&&"string"==typeof s.context&&""!==s.context,d=s.lngs?s.lngs:a.languageUtils.toResolveHierarchy(s.lng||a.language,s.fallbackLng);c.forEach((function(t){a.isValidLookup(e)||(i=t,!I["".concat(d[0],"-").concat(t)]&&a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(i)&&(I["".concat(d[0],"-").concat(t)]=!0,a.logger.warn('key "'.concat(n,'" for languages "').concat(d.join(", "),'" won\'t get resolved as namespace "').concat(i,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),d.forEach((function(n){if(!a.isValidLookup(e)){o=n;var i,u,c=l,d=[c];for(a.i18nFormat&&a.i18nFormat.addLookupKeys?a.i18nFormat.addLookupKeys(d,l,n,t,s):(h&&(i=a.pluralResolver.getSuffix(n,s.count)),h&&f&&d.push(c+i),f&&d.push(c+="".concat(a.options.contextSeparator).concat(s.context)),h&&d.push(c+=i));u=d.pop();)a.isValidLookup(e)||(r=u,e=a.getResource(n,t,u,s))}})))}))}})),{res:e,usedKey:n,exactUsedKey:r,usedLng:o,usedNS:i}}},{key:"isValidLookup",value:function(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)}},{key:"getResource",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,n,r):this.resourceStore.getResource(t,e,n,r)}}],[{key:"hasDefaultValue",value:function(t){var e="defaultValue";for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e===n.substring(0,e.length)&&void 0!==t[n])return!0;return!1}}]),e}(x);function F(t){return t.charAt(0).toUpperCase()+t.slice(1)}var H=function(){function t(e){c(this,t),this.options=e,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=_.create("languageUtils")}return f(t,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var e=t.split("-");return 2===e.length?null:(e.pop(),"x"===e[e.length-1].toLowerCase()?null:this.formatLanguageCode(e.join("-")))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var e=t.split("-");return this.formatLanguageCode(e[0])}},{key:"formatLanguageCode",value:function(t){if("string"==typeof t&&t.indexOf("-")>-1){var e=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map((function(t){return t.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=F(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=F(n[1].toLowerCase())),e.indexOf(n[2].toLowerCase())>-1&&(n[2]=F(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isWhitelisted",value:function(t){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(t)}},{key:"isSupportedCode",value:function(t){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var e,n=this;return t?(t.forEach((function(t){if(!e){var r=n.formatLanguageCode(t);n.options.supportedLngs&&!n.isSupportedCode(r)||(e=r)}})),!e&&this.options.supportedLngs&&t.forEach((function(t){if(!e){var r=n.getLanguagePartFromCode(t);if(n.isSupportedCode(r))return e=r;e=n.options.supportedLngs.find((function(t){if(0===t.indexOf(r))return t}))}})),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e):null}},{key:"getFallbackCodes",value:function(t,e){if(!t)return[];if("function"==typeof t&&(t=t(e)),"string"==typeof t&&(t=[t]),"[object Array]"===Object.prototype.toString.apply(t))return t;if(!e)return t.default||[];var n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t[this.getLanguagePartFromCode(e)]),n||(n=t.default),n||[]}},{key:"toResolveHierarchy",value:function(t,e){var n=this,r=this.getFallbackCodes(e||this.options.fallbackLng||[],t),o=[],i=function(t){t&&(n.isSupportedCode(t)?o.push(t):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(t)))};return"string"==typeof t&&t.indexOf("-")>-1?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(t))):"string"==typeof t&&i(this.formatLanguageCode(t)),r.forEach((function(t){o.indexOf(t)<0&&i(n.formatLanguageCode(t))})),o}}]),t}(),B=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],N={1:function(t){return Number(t>1)},2:function(t){return Number(1!=t)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function(t){return Number(0==t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function(t){return Number(1==t?0:t>=2&&t<=4?1:2)},7:function(t){return Number(1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(t>=2)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1&&t%100!=11?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0==t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0==t||t%100>0&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)},22:function(t){return Number(1==t?0:2==t?1:(t<0||t>10)&&t%10==0?2:3)}};function U(){var t={};return B.forEach((function(e){e.lngs.forEach((function(n){t[n]={numbers:e.nr,plurals:N[e.fc]}}))})),t}var z=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,t),this.languageUtils=e,this.options=n,this.logger=_.create("pluralResolver"),this.rules=U()}return f(t,[{key:"addRule",value:function(t,e){this.rules[t]=e}},{key:"getRule",value:function(t){return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var e=this.getRule(t);return e&&e.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,e){return this.getSuffixes(t).map((function(t){return e+t}))}},{key:"getSuffixes",value:function(t){var e=this,n=this.getRule(t);return n?n.numbers.map((function(n){return e.getSuffix(t,n)})):[]}},{key:"getSuffix",value:function(t,e){var n=this,r=this.getRule(t);if(r){var o=r.noAbs?r.plurals(e):r.plurals(Math.abs(e)),i=r.numbers[o];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===i?i="plural":1===i&&(i=""));var a=function(){return n.options.prepend&&i.toString()?n.options.prepend+i.toString():i.toString()};return"v1"===this.options.compatibilityJSON?1===i?"":"number"==typeof i?"_plural_".concat(i.toString()):a():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?a():this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString()}return this.logger.warn("no plural rule found for: ".concat(t)),""}}]),t}(),K=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(this,t),this.logger=_.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return f(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var e=t.interpolation;this.escape=void 0!==e.escape?e.escape:O,this.escapeValue=void 0===e.escapeValue||e.escapeValue,this.useRawValueToEscape=void 0!==e.useRawValueToEscape&&e.useRawValueToEscape,this.prefix=e.prefix?R(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?R(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?R(e.nestingPrefix):e.nestingPrefixEscaped||R("$t("),this.nestingSuffix=e.nestingSuffix?R(e.nestingSuffix):e.nestingSuffixEscaped||R(")"),this.nestingOptionsSeparator=e.nestingOptionsSeparator?e.nestingOptionsSeparator:e.nestingOptionsSeparator||",",this.maxReplaces=e.maxReplaces?e.maxReplaces:1e3,this.alwaysFormat=void 0!==e.alwaysFormat&&e.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var e="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(e,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(t,e,n,r){var o,i,a,s=this,u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function l(t){return t.replace(/\$/g,"$$$$")}var c=function(t){if(t.indexOf(s.formatSeparator)<0){var o=C(e,u,t);return s.alwaysFormat?s.format(o,void 0,n):o}var i=t.split(s.formatSeparator),a=i.shift().trim(),l=i.join(s.formatSeparator).trim();return s.format(C(e,u,a),l,n,r)};this.resetRegExp();var h=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,f=r&&r.interpolation&&r.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(t){return l(t)}},{regex:this.regexp,safeValue:function(t){return s.escapeValue?l(s.escape(t)):l(t)}}].forEach((function(e){for(a=0;o=e.regex.exec(t);){if(void 0===(i=c(o[1].trim())))if("function"==typeof h){var n=h(t,o,r);i="string"==typeof n?n:""}else{if(f){i=o[0];continue}s.logger.warn("missed to pass in variable ".concat(o[1]," for interpolating ").concat(t)),i=""}else"string"==typeof i||s.useRawValueToEscape||(i=w(i));if(t=t.replace(o[0],e.safeValue(i)),e.regex.lastIndex=0,++a>=s.maxReplaces)break}})),t}},{key:"nest",value:function(t,e){var n,r,o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=l({},i);function s(t,e){var n=this.nestingOptionsSeparator;if(t.indexOf(n)<0)return t;var r=t.split(new RegExp("".concat(n,"[ ]*{"))),o="{".concat(r[1]);t=r[0],o=(o=this.interpolate(o,a)).replace(/'/g,'"');try{a=JSON.parse(o),e&&(a=l({},e,a))}catch(e){return this.logger.warn("failed parsing options string in nesting for key ".concat(t),e),"".concat(t).concat(n).concat(o)}return delete a.defaultValue,t}for(a.applyPostProcessor=!1,delete a.defaultValue;n=this.nestingRegexp.exec(t);){var u=[],c=!1;if(n[0].includes(this.formatSeparator)&&!/{.*}/.test(n[1])){var h=n[1].split(this.formatSeparator).map((function(t){return t.trim()}));n[1]=h.shift(),u=h,c=!0}if((r=e(s.call(this,n[1].trim(),a),a))&&n[0]===t&&"string"!=typeof r)return r;"string"!=typeof r&&(r=w(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(t)),r=""),c&&(r=u.reduce((function(t,e){return o.format(t,e,i.lng,i)}),r.trim())),t=t.replace(n[0],r),this.regexp.lastIndex=0}return t}}]),t}(),W=function(t){function e(t,n,r){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return c(this,e),o=p(this,g(e).call(this)),P&&x.call(d(o)),o.backend=t,o.store=n,o.services=r,o.languageUtils=r.languageUtils,o.options=i,o.logger=_.create("backendConnector"),o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(r,i.backend,i),o}return y(e,t),f(e,[{key:"queueLoad",value:function(t,e,n,r){var o=this,i=[],a=[],s=[],u=[];return t.forEach((function(t){var r=!0;e.forEach((function(e){var s="".concat(t,"|").concat(e);!n.reload&&o.store.hasResourceBundle(t,e)?o.state[s]=2:o.state[s]<0||(1===o.state[s]?a.indexOf(s)<0&&a.push(s):(o.state[s]=1,r=!1,a.indexOf(s)<0&&a.push(s),i.indexOf(s)<0&&i.push(s),u.indexOf(e)<0&&u.push(e)))})),r||s.push(t)})),(i.length||a.length)&&this.queue.push({pending:a,loaded:{},errors:[],callback:r}),{toLoad:i,pending:a,toLoadLanguages:s,toLoadNamespaces:u}}},{key:"loaded",value:function(t,e,n){var r=t.split("|"),o=r[0],i=r[1];e&&this.emit("failedLoading",o,i,e),n&&this.store.addResourceBundle(o,i,n),this.state[t]=e?-1:2;var a={};this.queue.forEach((function(n){var r,s,u,l,c;r=n.loaded,s=i,(l=(u=S(r,[o],Object)).obj)[c=u.k]=l[c]||[],l[c].push(s),function(t,e){for(var n=t.indexOf(e);-1!==n;)t.splice(n,1),n=t.indexOf(e)}(n.pending,t),e&&n.errors.push(e),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(t){a[t]||(a[t]=[]),n.loaded[t].length&&n.loaded[t].forEach((function(e){a[t].indexOf(e)<0&&a[t].push(e)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((function(t){return!t.done}))}},{key:"read",value:function(t,e,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,a=arguments.length>5?arguments[5]:void 0;return t.length?this.backend[n](t,e,(function(s,u){s&&u&&o<5?setTimeout((function(){r.read.call(r,t,e,n,o+1,2*i,a)}),i):a(s,u)})):a(null,{})}},{key:"prepareLoading",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();"string"==typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);var i=this.queueLoad(t,e,r,o);if(!i.toLoad.length)return i.pending.length||o(),null;i.toLoad.forEach((function(t){n.loadOne(t)}))}},{key:"load",value:function(t,e,n){this.prepareLoading(t,e,{},n)}},{key:"reload",value:function(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}},{key:"loadOne",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=t.split("|"),o=r[0],i=r[1];this.read(o,i,"read",void 0,void 0,(function(r,a){r&&e.logger.warn("".concat(n,"loading namespace ").concat(i," for language ").concat(o," failed"),r),!r&&a&&e.logger.log("".concat(n,"loaded namespace ").concat(i," for language ").concat(o),a),e.loaded(t,r,a)}))}},{key:"saveMissing",value:function(t,e,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(e,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(t,e,n,r,null,l({},i,{isUpdate:o})),t&&t[0]&&this.store.addResource(t[0],e,n,r))}}]),e}(x);function Y(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var e={};if("object"===s(t[1])&&(e=t[1]),"string"==typeof t[1]&&(e.defaultValue=t[1]),"string"==typeof t[2]&&(e.tDescription=t[2]),"object"===s(t[2])||"object"===s(t[3])){var n=t[3]||t[2];Object.keys(n).forEach((function(t){e[t]=n[t]}))}return e},interpolation:{escapeValue:!0,format:function(t,e,n,r){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function G(t){return"string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.whitelist&&(t.whitelist&&t.whitelist.indexOf("cimode")<0&&(t.whitelist=t.whitelist.concat(["cimode"])),t.supportedLngs=t.whitelist),t.nonExplicitWhitelist&&(t.nonExplicitSupportedLngs=t.nonExplicitWhitelist),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function V(){}const X=new(function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(c(this,e),t=p(this,g(e).call(this)),P&&x.call(d(t)),t.options=G(n),t.services={},t.logger=_,t.modules={external:[]},r&&!t.isInitialized&&!n.isClone){if(!t.options.initImmediate)return t.init(n,r),p(t,d(t));setTimeout((function(){t.init(n,r)}),0)}return t}return y(e,t),f(e,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function r(t){return t?"function"==typeof t?new t:t:null}if("function"==typeof e&&(n=e,e={}),e.whitelist&&!e.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),e.nonExplicitWhitelist&&!e.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=l({},Y(),this.options,G(e)),this.format=this.options.interpolation.format,n||(n=V),!this.options.isClone){this.modules.logger?_.init(r(this.modules.logger),this.options):_.init(null,this.options);var o=new H(this.options);this.store=new M(this.options.resources,this.options);var i=this.services;i.logger=_,i.resourceStore=this.store,i.languageUtils=o,i.pluralResolver=new z(o,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),i.interpolator=new K(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new W(r(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];t.emit.apply(t,[e].concat(r))})),this.modules.languageDetector&&(i.languageDetector=r(this.modules.languageDetector),i.languageDetector.init(i,this.options.detection,this.options)),this.modules.i18nFormat&&(i.i18nFormat=r(this.modules.i18nFormat),i.i18nFormat.init&&i.i18nFormat.init(this)),this.translator=new j(this.services,this.options),this.translator.on("*",(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];t.emit.apply(t,[e].concat(r))})),this.modules.external.forEach((function(e){e.init&&e.init(t)}))}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.length>0&&"dev"!==a[0]&&(this.options.lng=a[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var s=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];s.forEach((function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments)}}));var u=["addResource","addResources","addResourceBundle","removeResourceBundle"];u.forEach((function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments),t}}));var c=b(),h=function(){var e=function(e,r){t.isInitialized&&t.logger.warn("init: i18next is already initialized. You should call init just once!"),t.isInitialized=!0,t.options.isClone||t.logger.log("initialized",t.options),t.emit("initialized",t.options),c.resolve(r),n(e,r)};if(t.languages&&"v1"!==t.options.compatibilityAPI&&!t.isInitialized)return e(null,t.t.bind(t));t.changeLanguage(t.options.lng,e)};return this.options.resources||!this.options.initImmediate?h():setTimeout(h,0),c}},{key:"loadResources",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V,r=n,o="string"==typeof t?t:this.language;if("function"==typeof t&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(o&&"cimode"===o.toLowerCase())return r();var i=[],a=function(t){t&&e.services.languageUtils.toResolveHierarchy(t).forEach((function(t){i.indexOf(t)<0&&i.push(t)}))};if(o)a(o);else{var s=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);s.forEach((function(t){return a(t)}))}this.options.preload&&this.options.preload.forEach((function(t){return a(t)})),this.services.backendConnector.load(i,this.options.ns,r)}else r(null)}},{key:"reloadResources",value:function(t,e,n){var r=b();return t||(t=this.languages),e||(e=this.options.ns),n||(n=V),this.services.backendConnector.reload(t,e,(function(t){r.resolve(),n(t)})),r}},{key:"use",value:function(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===t.type&&(this.modules.backend=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"i18nFormat"===t.type&&(this.modules.i18nFormat=t),"postProcessor"===t.type&&E.addPostProcessor(t),"3rdParty"===t.type&&this.modules.external.push(t),this}},{key:"changeLanguage",value:function(t,e){var n=this;this.isLanguageChangingTo=t;var r=b();this.emit("languageChanging",t);var o=function(t){var o="string"==typeof t?t:n.services.languageUtils.getBestMatchFromCodes(t);o&&(n.language||(n.language=o,n.languages=n.services.languageUtils.toResolveHierarchy(o)),n.translator.language||n.translator.changeLanguage(o),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(o)),n.loadResources(o,(function(t){!function(t,o){o?(n.language=o,n.languages=n.services.languageUtils.toResolveHierarchy(o),n.translator.changeLanguage(o),n.isLanguageChangingTo=void 0,n.emit("languageChanged",o),n.logger.log("languageChanged",o)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),e&&e(t,(function(){return n.t.apply(n,arguments)}))}(t,o)}))};return t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(o):o(t):o(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(t,e){var n=this,r=function t(e,r){var o;if("object"!==s(r)){for(var i=arguments.length,a=new Array(i>2?i-2:0),u=2;u<i;u++)a[u-2]=arguments[u];o=n.options.overloadTranslationOptionHandler([e,r].concat(a))}else o=l({},r);return o.lng=o.lng||t.lng,o.lngs=o.lngs||t.lngs,o.ns=o.ns||t.ns,n.t(e,o)};return"string"==typeof t?r.lng=t:r.lngs=t,r.ns=e,r}},{key:"t",value:function(){var t;return this.translator&&(t=this.translator).translate.apply(t,arguments)}},{key:"exists",value:function(){var t;return this.translator&&(t=this.translator).exists.apply(t,arguments)}},{key:"setDefaultNamespace",value:function(t){this.options.defaultNS=t}},{key:"hasLoadedNamespace",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.languages[0],o=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var a=function(t,n){var r=e.services.backendConnector.state["".concat(t,"|").concat(n)];return-1===r||2===r};if(n.precheck){var s=n.precheck(this,a);if(void 0!==s)return s}return!!this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||!(!a(r,t)||o&&!a(i,t))}},{key:"loadNamespaces",value:function(t,e){var n=this,r=b();return this.options.ns?("string"==typeof t&&(t=[t]),t.forEach((function(t){n.options.ns.indexOf(t)<0&&n.options.ns.push(t)})),this.loadResources((function(t){r.resolve(),e&&e(t)})),r):(e&&e(),Promise.resolve())}},{key:"loadLanguages",value:function(t,e){var n=b();"string"==typeof t&&(t=[t]);var r=this.options.preload||[],o=t.filter((function(t){return r.indexOf(t)<0}));return o.length?(this.options.preload=r.concat(o),this.loadResources((function(t){n.resolve(),e&&e(t)})),n):(e&&e(),Promise.resolve())}},{key:"dir",value:function(t){return t||(t=this.languages&&this.languages.length>0?this.languages[0]:this.language),t?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(t))>=0?"rtl":"ltr":"rtl"}},{key:"createInstance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new e(t,n)}},{key:"cloneInstance",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V,o=l({},this.options,n,{isClone:!0}),i=new e(o),a=["store","services","language"];return a.forEach((function(e){i[e]=t[e]})),i.services=l({},this.services),i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i.translator=new j(i.services,i.options),i.translator.on("*",(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];i.emit.apply(i,[t].concat(n))})),i.init(o,r),i.translator.options=i.options,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}}]),e}(x)),q=JSON.parse('{"shiftLeft":{"name":"Shift Left","description":"Press to move a polyomino to the left once, or hold to engage the Autoshift."},"shiftRight":{"name":"Shift Right","description":"Press to move a polyomino to the right once, or hold to engage the Autoshift."},"hardDrop":{"name":"Hard Drop","description":"Drop a polyomino instantly the floor and lock it in place."},"softDrop":{"name":"Soft Drop","description":"Speed up the descent of a polyomino."},"rotateLeft":{"name":"Rotate Left","description":"Rotate a polyomino 90° counter-clockwise."},"rotateRight":{"name":"Rotate Right","description":"Rotate a polyomino 90° clockwise."},"rotate180":{"name":"Rotate 180°","description":"Rotate a polyomino 180°."},"hold":{"name":"Hold","description":"Send a polyomino to the HOLD Queue."},"retry":{"name":"Retry","description":"Instantly have another attempt in the current mode."},"pause":{"name":"Pause","description":"Pause the game."},"sonicDrop":{"name":"Sonic Drop"},"softDropWithLock":{"name":"Soft Drop with Lock"}}');var Q=n.t(q,2);const $=JSON.parse('{"createdBy":"Created by {{author}}","style":{"categoryName":"Game Styles","guideline":{"name":"Guideline","description":"The standard variant found in most modern games."},"tetraX":{"name":"Tetra-X","description":"The custom variant designed by Dr Ocelot."},"retro":{"name":"Retro","description":"The classic variant loved by oldschool players."},"arcade":{"name":"Arcade","description":"The difficult variant loved by hardcore players."}},"settings":{"categoryName":"Settings","controls":{"name":"Controls","description":"Customize how the game controls."},"tuning":{"name":"Tuning","description":"Customize how the game handles."},"audio":{"name":"Audio","description":"Customize how the game sounds."},"video":{"name":"Video","description":"Customize how the game looks."}}}');var Z=n.t($,2);const J=JSON.parse('{"next":"NEXT","hold":"HOLD","ready":"Ready?","start":"Start!","pause":"Pause","gameOver":"Game Over","blockOut":"Block Out","lockOut":"Lock Out","topOut":"Top Out","timeUp":"Time Up","excellent":"Excellent","continue":"Continue","retry":"Retry","quit":"Quit"}');var tt=n.t(J,2);const et=JSON.parse('{"marathon":{"name":"Marathon"},"sprint":{"name":"Sprint"}}');var nt=n.t(et,2);const rt=JSON.parse('{"level":"Level","lines":"Lines","placed":"Placed"}');var ot=n.t(rt,2);class it{}it.config=new class{constructor(){this.autoshiftDelay=170,this.autoshiftRate=30,this.autoshiftBuffering="charge"}},it.controls=new class{constructor(){this.shiftLeft=["ArrowLeft"],this.shiftRight=["ArrowRight"],this.hardDrop=["Space"],this.softDrop=["ArrowDown"],this.rotateLeft=["KeyZ","ControlLeft"],this.rotateRight=["KeyX","ArrowUp"],this.rotate180=["KeyD"],this.hold=["KeyC","ShiftLeft"],this.retry=["KeyR"],this.pause=["Escape","KeyP"],this.menuUp=["ArrowUp"],this.menuDown=["ArrowDown"],this.menuLeft=["ArrowLeft"],this.menuRight=["ArrowRight"],this.menuSelect=["Enter"],this.menuBack=["Backspace"]}};class at{static init(){if(at.hasInitiated)throw new Error("Do not initiate Input more than once.");for(const t of Object.keys(it.controls))at.currentKeys[t]=new Set,at.lastKeys[t]=new Set;document.addEventListener("keydown",at.keyDownListener),document.addEventListener("keyup",at.keyUpListener),at.hasInitiated=!0}static keyDownListener(t){for(const e of Object.keys(it.controls))-1!==it.controls[e].indexOf(t.code)&&at.currentKeys[e].add(t.code)}static keyUpListener(t){for(const e of Object.keys(it.controls))-1!==it.controls[e].indexOf(t.code)&&at.currentKeys[e].delete(t.code)}static updateLastKeys(){for(const t of Object.keys(at.currentKeys))at.lastKeys[t]=new Set(at.currentKeys[t])}static getKeyDown(t){return at.currentKeys[t].size>0}static getKeyPressed(t){return at.currentKeys[t].size>at.lastKeys[t].size}static getKeyReleased(t){return at.currentKeys[t].size<at.lastKeys[t].size}static getKeyPressedAsNum(t){return Math.max(0,at.currentKeys[t].size-at.lastKeys[t].size)}static getControlChange(){const t=[];for(const e of Object.keys(at.currentKeys))t.push({control:e,change:at.currentKeys[e].size-at.lastKeys[e].size});return t}}at.currentKeys={},at.lastKeys={},at.hasInitiated=!1,at.GAME_KEYS=["shiftLeft","shiftRight","hardDrop","softDrop","rotateLeft","rotateRight","rotate180","hold"],at.init();const st={i8:"0.4.1"};class ut{static getVersion(){return st.i8}static isDevBuild(){return st.i8.includes("dev")}static getRendererContainer(){return this.rendererContainer}static setRender(t){var e;null===(e=this.renderer)||void 0===e||e.destroy(),ut.renderer=t,this.renderer.construct()}static init(){ut.rendererContainer=document.createElement("div"),ut.rendererContainer.classList.add("renderer"),document.body.prepend(ut.rendererContainer),ut.isDevBuild()&&ut.createDevBuildWatermark(),ut.last=performance.now(),window.onresize=ut.onResize.bind(ut),window.requestAnimationFrame(ut.animFrameLoop.bind(ut))}static createDevBuildWatermark(){const t=document.createElement("div");t.classList.add("dev"),document.body.prepend(t);const e=document.createElement("div");e.classList.add("development-watermark"),e.textContent=`Development Build: ${ut.getVersion()}`,t.appendChild(e),ut.fpsContainer=document.createElement("div"),ut.fpsContainer.classList.add("fps-dev"),ut.fpsContainer.textContent="00 FPS",t.appendChild(ut.fpsContainer)}static onResize(){this.renderer.onResize()}static animFrameLoop(){ut.now=window.performance.now();const t=ut.now-ut.last;if(ut.doLogicTick(t),ut.doDrawTick(t),at.updateLastKeys(),a.playQueue(),ut.isDevBuild()){const t=500;ut.fpsCounterRefreshAccum+=ut.now-ut.last,ut.fpsCounterRefreshAccum>=t&&(ut.fpsCounterRefreshAccum-=t,ut.fpsContainer.textContent=`${Math.round(1e3/(ut.now-ut.last))} FPS`)}ut.last=ut.now,window.requestAnimationFrame(ut.animFrameLoop.bind(ut))}static doLogicTick(t){null!=ut.renderer&&ut.renderer.doLogicTick(t)}static doDrawTick(t){null!=ut.renderer&&ut.renderer.doDrawTick(t)}}ut.fpsCounterRefreshAccum=0;function lt(t){return t.getContext("2d")}function ct(t){t.clearRect(0,0,t.canvas.clientWidth,t.canvas.clientHeight)}function ht(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ft(t){t.offsetWidth}function dt(t,e){t.classList.remove(e),ft(t),t.classList.add(e)}class pt{construct(){}destroy(){ht(ut.getRendererContainer())}doDrawTick(t){}doLogicTick(t){}onResize(){}}var gt=n(486);class mt{constructor({rule:t}){this.markedForDeath=[],this.rule=t,this.width=this.rule.matrixWidth,this.height=this.rule.matrixHeight,this.hiddenHeight=this.rule.matrixHiddenHeight,this.resetGrid()}resetGrid(){const t=new Array(this.getHeight()).fill([]);for(let e=0;e<t.length;e++)t[e]=new Array(this.width).fill(null);this.grid=t}getGridWithPolyomino(t,e,n){const r=(0,gt.cloneDeep)(this.grid);if(null==n)return r;for(let o=0;o<n.getTotalMonominos();o++){const i=n.getMonominos()[o],a=t+n.getCurrentCoordinates()[o].x;r[e+n.getCurrentCoordinates()[o].y][a]=i}return r}getWidth(){return this.width}getHeight(){return this.height+this.hiddenHeight}getVisibleHeight(){return this.height}getHiddenHeight(){return this.hiddenHeight}getCoordinateType(t,e){return e<0&&this.rule.matrixHasCeiling||t<0||t>=this.width||e>=this.getHeight()?"wall":e>=this.hiddenHeight?"normal":"hidden"}hasObstructionAt(t,e){return"wall"===this.getCoordinateType(t,e)||this.hasMonominoAt(t,e)}hasMonominoAt(t,e){return null!=this.grid[e][t]}addMonominoTo(t,e,n){null!=this.grid&&(this.grid[e][t]=n)}getFilledRows(t=this.grid){const e=[];for(let n=0;n<t.length;n++)for(let r=0;r<=t.length;r++){if(r===t[n].length){e.push(n);break}if(null==t[n][r])break}return e}getRowsMarkedForDeath(){return this.markedForDeath}markFilledRowsForDeath(){this.markedForDeath=[...this.getFilledRows()]}killRowsMarkedForDeath(){for(const t of this.markedForDeath)for(let e=0;e<this.grid[t].length;e++)this.grid[t][e]=null}collapseRowsMarkedForDeath(){let t=!1;for(const e of this.markedForDeath)for(let n=e;n>=0;n--)if(0!==n){this.grid[n]=this.grid[n-1];for(const e of this.grid[n])null!=e&&(t=!0);this.markedForDeath.splice(e,1)}else this.grid[n]=new Array(this.width).fill(null);return this.markedForDeath=[],t}isEmpty(){if(null==this.grid)return!0;for(const t of this.grid)for(const e of t)if(null!=e)return!1;return!0}isCloseToSkyline(){return this.getHighest()-this.hiddenHeight-4<0}getHighest(){for(let t=0;t<this.grid.length;t++)for(const e of this.grid[t])if(null!==e)return t;return this.getHeight()}getDrawData(){const t=[];for(let e=0;e<this.grid.length;e++)for(let n=0;n<this.grid[e].length;n++){const r=this.grid[e][n];null==r?t.push({x:n,y:e-this.getHiddenHeight(),color:"invalid",timeLocked:Number.MIN_SAFE_INTEGER,shape:"none",skin:null}):t.push({x:n,y:e-this.getHiddenHeight(),color:r.getColor(),timeLocked:r.getLockedTime(),shape:r.getShape(),skin:r.getSkin()})}return t}}class yt{constructor({color:t="invalid",connectionsByte:e=0}={}){this.timeLocked=Number.MIN_SAFE_INTEGER,this.shape="none",this.skin=null,this.color=t,this.connectionsByte=e}getColor(){return this.color}setColor(t){this.color=t}getLockedTime(){return this.timeLocked}setLockedTime(){this.timeLocked=performance.now()}setShape(t){this.shape=t}getShape(){return this.shape}setSkin(t){this.skin=t}getSkin(){return this.skin}getConnectionState(t){return 0!=(this.connectionsByte&t)}setConnectionState(t,e){e?this.connectionsByte|=t:this.connectionsByte&=~t}setConnectionsByte(t){if(t<0||t>255)throw new Error("The connection byte specified is not within 0-255");this.connectionsByte=t}}class vt{constructor({shape:t}){this.shape="none",this.orientation=0,this.data=null,this.monominos=[],this.setShape(t);for(let t=0;t<this.getTotalMonominos();t++)this.monominos.push(new yt);this.setShape(t)}getMonominos(){return this.monominos}setShape(t){this.shape=t;for(const e of this.monominos)e.setShape(t);this.data=vt.DATA[this.shape]}setOrientation(t){this.orientation=t}getOrientation(){return this.orientation}getCurrentCoordinates(){return this.data[this.orientation]}getCoordinates(t){return this.data[t]}getShape(){return this.shape}getVisualData(t=this.orientation){return vt.VISUAL_LENGTHS[this.shape][t]}setColor(t){for(const e of this.monominos)e.setColor(t)}setSkin(t){for(const e of this.monominos)e.setSkin(t)}getTotalMonominos(){return vt.DATA[this.shape][this.orientation].length}placeToMatrix({x:t,y:e,matrix:n}){for(let r=0;r<this.getTotalMonominos();r++){const o=this.monominos[r],i=t+this.getCurrentCoordinates()[r].x,a=e+this.getCurrentCoordinates()[r].y;o.setLockedTime(),n.addMonominoTo(i,a,o)}}assignDefaultsFromRule(t){this.setOrientation(t.rotationSystem.initialOrientation[this.getShape()]),this.setColor(t.colors[this.getShape()]),this.setSkin(t.skin)}}function _t(t){return 60/t*1e3}vt.DATA={i:[[{x:0,y:1,connections:8},{x:1,y:1,connections:12},{x:2,y:1,connections:12},{x:3,y:1,connections:4}],[{x:2,y:0,connections:2},{x:2,y:1,connections:3},{x:2,y:2,connections:3},{x:2,y:3,connections:1}],[{x:3,y:2,connections:4},{x:2,y:2,connections:12},{x:1,y:2,connections:12},{x:0,y:2,connections:8}],[{x:1,y:3,connections:1},{x:1,y:2,connections:3},{x:1,y:1,connections:3},{x:1,y:0,connections:2}]],j:[[{x:0,y:0,connections:2},{x:0,y:1,connections:9},{x:1,y:1,connections:12},{x:2,y:1,connections:4}],[{x:2,y:0,connections:4},{x:1,y:0,connections:10},{x:1,y:1,connections:3},{x:1,y:2,connections:1}],[{x:2,y:2,connections:1},{x:2,y:1,connections:6},{x:1,y:1,connections:12},{x:0,y:1,connections:8}],[{x:0,y:2,connections:8},{x:1,y:2,connections:5},{x:1,y:1,connections:3},{x:1,y:0,connections:2}]],l:[[{x:2,y:0,connections:2},{x:2,y:1,connections:5},{x:1,y:1,connections:12},{x:0,y:1,connections:8}],[{x:2,y:2,connections:4},{x:1,y:2,connections:9},{x:1,y:1,connections:3},{x:1,y:0,connections:2}],[{x:0,y:2,connections:1},{x:0,y:1,connections:10},{x:1,y:1,connections:12},{x:2,y:1,connections:4}],[{x:0,y:0,connections:8},{x:1,y:0,connections:6},{x:1,y:1,connections:3},{x:1,y:2,connections:1}]],o:[[{x:0,y:0,connections:138},{x:1,y:0,connections:70},{x:1,y:1,connections:21},{x:0,y:1,connections:41}],[{x:1,y:0,connections:70},{x:1,y:1,connections:21},{x:0,y:1,connections:41},{x:0,y:0,connections:138}],[{x:1,y:1,connections:21},{x:0,y:1,connections:41},{x:0,y:0,connections:138},{x:1,y:0,connections:70}],[{x:0,y:1,connections:41},{x:0,y:0,connections:138},{x:1,y:0,connections:70},{x:1,y:1,connections:21}]],s:[[{x:2,y:0,connections:4},{x:1,y:0,connections:10},{x:1,y:1,connections:5},{x:0,y:1,connections:8}],[{x:2,y:2,connections:1},{x:2,y:1,connections:6},{x:1,y:1,connections:9},{x:1,y:0,connections:2}],[{x:0,y:2,connections:8},{x:1,y:2,connections:5},{x:1,y:1,connections:10},{x:2,y:1,connections:4}],[{x:0,y:0,connections:2},{x:0,y:1,connections:9},{x:1,y:1,connections:6},{x:1,y:2,connections:1}]],t:[[{x:1,y:0,connections:2},{x:0,y:1,connections:8},{x:1,y:1,connections:13},{x:2,y:1,connections:4}],[{x:2,y:1,connections:4},{x:1,y:0,connections:2},{x:1,y:1,connections:11},{x:1,y:2,connections:1}],[{x:1,y:2,connections:1},{x:2,y:1,connections:4},{x:1,y:1,connections:14},{x:0,y:1,connections:8}],[{x:0,y:1,connections:8},{x:1,y:2,connections:1},{x:1,y:1,connections:7},{x:1,y:0,connections:2}]],z:[[{x:0,y:0,connections:8},{x:1,y:0,connections:6},{x:1,y:1,connections:9},{x:2,y:1,connections:4}],[{x:2,y:0,connections:2},{x:2,y:1,connections:5},{x:1,y:1,connections:10},{x:1,y:2,connections:1}],[{x:2,y:2,connections:4},{x:1,y:2,connections:9},{x:1,y:1,connections:6},{x:0,y:1,connections:8}],[{x:0,y:2,connections:1},{x:0,y:1,connections:10},{x:1,y:1,connections:5},{x:1,y:0,connections:2}]]},vt.VISUAL_LENGTHS={i:[{startX:0,endX:3,startY:1,endY:1},{startX:2,endX:2,startY:0,endY:3},{startX:0,endX:3,startY:2,endY:2},{startX:1,endX:1,startY:0,endY:3}],j:[{startX:0,endX:2,startY:0,endY:1},{startX:1,endX:2,startY:0,endY:2},{startX:0,endX:2,startY:1,endY:2},{startX:0,endX:1,startY:0,endY:2}],l:[{startX:0,endX:2,startY:0,endY:1},{startX:1,endX:2,startY:0,endY:2},{startX:0,endX:2,startY:1,endY:2},{startX:0,endX:1,startY:0,endY:2}],o:[{startX:0,endX:1,startY:0,endY:1},{startX:0,endX:1,startY:0,endY:1},{startX:0,endX:1,startY:0,endY:1},{startX:0,endX:1,startY:0,endY:1}],s:[{startX:0,endX:2,startY:0,endY:1},{startX:1,endX:2,startY:0,endY:2},{startX:0,endX:2,startY:1,endY:2},{startX:0,endX:1,startY:0,endY:2}],t:[{startX:0,endX:2,startY:0,endY:1},{startX:1,endX:2,startY:0,endY:2},{startX:0,endX:2,startY:1,endY:2},{startX:0,endX:1,startY:0,endY:2}],z:[{startX:0,endX:2,startY:0,endY:1},{startX:1,endX:2,startY:0,endY:2},{startX:0,endX:2,startY:1,endY:2},{startX:0,endX:1,startY:0,endY:2}]},vt.SPIN_POINTS={i:[{major1:[{x:1,y:0},{x:2,y:0}],major2:[{x:2,y:2},{x:1,y:2}],minor1:[{x:-1,y:1}],minor2:[{x:4,y:1}]},{major1:[{x:1,y:1},{x:1,y:2}],major2:[{x:3,y:2},{x:3,y:1}],minor1:[{x:2,y:-1}],minor2:[{x:2,y:4}]},{major1:[{x:1,y:1},{x:2,y:1}],major2:[{x:2,y:3},{x:1,y:3}],minor1:[{x:-1,y:2}],minor2:[{x:4,y:2}]},{major1:[{x:0,y:1},{x:0,y:2}],major2:[{x:2,y:2},{x:2,y:1}],minor1:[{x:1,y:-1}],minor2:[{x:1,y:4}]}],j:[{major1:[{x:1,y:0}],major2:[{x:2,y:0}],minor1:[{x:0,y:2}],minor2:[{x:2,y:2}]},{major1:[{x:2,y:1}],major2:[{x:2,y:2}],minor1:[{x:0,y:0}],minor2:[{x:0,y:2}]},{major1:[{x:1,y:2}],major2:[{x:0,y:2}],minor1:[{x:2,y:0}],minor2:[{x:0,y:0}]},{major1:[{x:0,y:1}],major2:[{x:0,y:0}],minor1:[{x:2,y:2}],minor2:[{x:2,y:0}]}],l:[{major1:[{x:1,y:0}],major2:[{x:0,y:0}],minor1:[{x:2,y:2}],minor2:[{x:0,y:2}]},{major1:[{x:2,y:1}],major2:[{x:2,y:0}],minor1:[{x:0,y:2}],minor2:[{x:0,y:0}]},{major1:[{x:1,y:2}],major2:[{x:2,y:2}],minor1:[{x:0,y:0}],minor2:[{x:2,y:0}]},{major1:[{x:0,y:1}],major2:[{x:0,y:2}],minor1:[{x:2,y:0}],minor2:[{x:2,y:2}]}],o:[{major1:[],major2:[],minor1:[],minor2:[]},{major1:[],major2:[],minor1:[],minor2:[]},{major1:[],major2:[],minor1:[],minor2:[]},{major1:[],major2:[],minor1:[],minor2:[]}],s:[{major1:[{x:0,y:0}],major2:[{x:2,y:1}],minor1:[{x:3,y:0}],minor2:[{x:-1,y:1}]},{major1:[{x:1,y:2}],major2:[{x:2,y:0}],minor1:[{x:1,y:-1}],minor2:[{x:2,y:3}]},{major1:[{x:2,y:2}],major2:[{x:0,y:1}],minor1:[{x:-1,y:2}],minor2:[{x:3,y:1}]},{major1:[{x:1,y:0}],major2:[{x:0,y:2}],minor1:[{x:1,y:3}],minor2:[{x:0,y:-1}]}],t:[{major1:[{x:0,y:0}],major2:[{x:2,y:0}],minor1:[{x:0,y:2}],minor2:[{x:2,y:2}]},{major1:[{x:2,y:0}],major2:[{x:2,y:2}],minor1:[{x:0,y:0}],minor2:[{x:0,y:2}]},{major1:[{x:0,y:2}],major2:[{x:2,y:2}],minor1:[{x:0,y:0}],minor2:[{x:2,y:0}]},{major1:[{x:0,y:0}],major2:[{x:0,y:2}],minor1:[{x:2,y:0}],minor2:[{x:2,y:2}]}],z:[{major1:[{x:2,y:0}],major2:[{x:0,y:1}],minor1:[{x:-1,y:0}],minor2:[{x:3,y:1}]},{major1:[{x:2,y:2}],major2:[{x:1,y:0}],minor1:[{x:2,y:-1}],minor2:[{x:1,y:3}]},{major1:[{x:0,y:2}],major2:[{x:2,y:1}],minor1:[{x:3,y:2}],minor2:[{x:-1,y:1}]},{major1:[{x:0,y:0}],major2:[{x:1,y:2}],minor1:[{x:0,y:3}],minor2:[{x:1,y:-1}]}]},vt.TETROMINOES=["i","j","l","o","s","t","z"];class xt{constructor({matrix:t,rule:e,mode:n}){this._isDirty=!0,this.lastY=0,this.lowestY=0,this.inSoftDrop=!1,this.fallSpeed=1e3,this.mustUpgradeSpin=!1,this.matrix=t,this.rule=e,this.mode=n}lockdown(){this.polyomino.placeToMatrix({x:this.x,y:this.getIntY(),matrix:this.matrix}),this.polyomino=null,this.needsRedrawing()}isDead(){return null==this.polyomino}isDirty(){var t;return!(!this.isOnGround()||"retro"===this.rule.lockDelayType)||this.lastPolyomino!==this.polyomino||this.lastDrawnX!==this.x||this.lastDrawnY!==this.getIntY()||this.lastDrawnOrientation!==(null===(t=this.polyomino)||void 0===t?void 0:t.getOrientation())}updateDirtyLasts(){var t;this.lastPolyomino=this.polyomino,this.lastDrawnX=this.x,this.lastDrawnY=this.getIntY(),this.lastDrawnOrientation=null===(t=this.polyomino)||void 0===t?void 0:t.getOrientation()}wasDrawn(){this._isDirty=!1}needsRedrawing(){this._isDirty=!0}init(t){this.polyomino=t;const e=this.rule.spawnOffsets[this.polyomino.getShape()],n=this.rule.rotationSystem.offsets[this.polyomino.getShape()][this.polyomino.getOrientation()];this.x=e.x+n.x,this.y=e.y+this.matrix.getHiddenHeight()+n.y,this.shift(0,this.rule.immediateDropOnSpawn),this.is20G()&&!this.rule.suspendPieceUntilAction&&this.slamToFloor(),this.lowestY=0,this.updateLowestAndLastY(),this.resetLockDelay(),this.needsRedrawing(),this.needsToDie=!1,this.lastAction="spawn"}collidesWith(t,e,n){var r;if(void 0===n&&(n=null===(r=this.polyomino)||void 0===r?void 0:r.getOrientation()),this.isDead())return;const[o,i]=[this.x+t,this.getIntY()+e];for(let t=0;t<this.polyomino.getTotalMonominos();t++){const e=o+this.polyomino.getCoordinates(n)[t].x,r=i+this.polyomino.getCoordinates(n)[t].y;if("wall"===this.matrix.getCoordinateType(e,r))return!0;if(this.matrix.hasMonominoAt(e,r))return!0}return!1}updateLowestAndLastY(){var t;this.lowestY=Math.max(this.getIntY()+(null===(t=this.polyomino)||void 0===t?void 0:t.getVisualData().endY),this.lowestY),this.lastY=this.y}isOnGround(){return this.collidesWith(0,1)}isStuck(){return this.collidesWith(0,0)}canShiftLeft(){return!this.collidesWith(-1,0)}canShiftRight(){return!this.collidesWith(1,0)}shift(t,e){this.collidesWith(t,e)||(this.x+=t,this.y+=e,0===t&&0===e||this.needsRedrawing())}shiftLeft(){this.canShiftLeft()&&null!=this.polyomino&&(a.add("pieceMove"),this.lastAction="move",this.movementsAccum++,(this.collidesWith(-1,1)||this.isOnGround())&&a.add("pieceSlide")),this.shift(-1,0)}shiftRight(){this.canShiftRight()&&null!=this.polyomino&&(a.add("pieceMove"),this.lastAction="move",this.movementsAccum++,(this.collidesWith(1,1)||this.isOnGround())&&a.add("pieceSlide")),this.shift(1,0)}rotate(t){if(this.isDead())return;const e=(this.polyomino.getOrientation()+t)%4,n=this.rule.rotationSystem.offsets[this.getPolyominoShape()],r=n[e].x-n[this.polyomino.getOrientation()].x,o=n[e].y-n[this.polyomino.getOrientation()].y,i=this.rule.rotationSystem.wallkick.executeWallkick({xOffset:r,yOffset:o,rotateDirection:t,oldOrientation:this.polyomino.getOrientation(),newOrientation:e,allowFloorKicks:!0,polyominoController:this,matrix:this.matrix});if(null!=i){if(i.usedKick&&"disable-wallkick"===this.rule.resetExpirationPenalty&&this.hasExhaustedResets())return;this.polyomino.setOrientation(i.orientation),this.x+=i.xOffset+r,this.y+=i.yOffset+o,i.usedKick&&this.rule.resetLockDelayByKicking&&(this.lockDelayAccum=0),this.lastAction="rotate",this.mustUpgradeSpin=i.mustUpgradeSpin;const t=this.checkIfSpin();t.isSpin?t.isMini?a.add("pieceRotateTMini"):a.add("pieceRotateT"):a.add("pieceRotate"),i.usedKick&&a.add("pieceWallkick"),this.rotationsAccum++,this.needsRedrawing()}}checkIfSpin(){if("rotate"!==this.lastAction)return{isSpin:!1,isMini:!1};if(!this.collidesWith(0,1))return{isSpin:!1,isMini:!1};const t=this.polyomino.getShape();if(-1===this.mode.scoring.spinPolyominoList.indexOf(t))return{isSpin:!1,isMini:!1};const e=this.polyomino.getOrientation();if("threeCorner"===this.mode.scoring.spinBonusType){const n=t=>{for(const e of t)if(this.matrix.hasObstructionAt(this.x+e.x,this.getIntY()+e.y))return!0},r=n(vt.SPIN_POINTS[t][e].major1),o=n(vt.SPIN_POINTS[t][e].major2),i=n(vt.SPIN_POINTS[t][e].minor1),a=n(vt.SPIN_POINTS[t][e].minor2);if(r&&o&&(i||a))return{isSpin:!0,isMini:!1};if((r||o)&&i&&a)return{isSpin:!0,isMini:!this.mustUpgradeSpin}}else if("immobile"===this.mode.scoring.spinBonusType&&this.collidesWith(-1,0)&&this.collidesWith(1,0)&&this.collidesWith(0,-1))return{isSpin:!0,isMini:!1};return{isSpin:!1,isMini:!1}}doGravity(t){if(this.isDead())return;if(this.rule.suspendPieceUntilAction&&"spawn"===this.lastAction)return;const e=t/this.getFallSpeed();if("retro"===this.rule.lockDelayType)if(this.hasEnoughSpaceBelow(e)){const t=this.y;this.y+=e,this.isStuck()&&(this.y=t,this.slamToFloor(),this.needsToDie=!0)}else this.slamToFloor(),this.needsToDie=!0;else this.isOnGround()?this.y=this.getIntY():this.hasEnoughSpaceBelow(e)?this.y+=Math.min(e,this.getDropDistance(e+1)):this.slamToFloor();this.getIntY()>Math.floor(this.lastY)&&(this.isOnGround()&&a.add("pieceLand"),this.needsRedrawing(),this.lastAction="fall")}resetLockDelay(){this.resetLockDelayResets(),this.lockDelayAccum=0}resetLockDelayResets(){this.movementsAccum=0,this.rotationsAccum=0,this.movementsAccommodated=0,this.rotationsAccommodated=0}doLockDelay(t){var e;this.getIntY()+(null===(e=this.polyomino)||void 0===e?void 0:e.getVisualData().endY)>Math.floor(this.lowestY)&&(this.rule.resetLockDelayByFalling&&(this.lockDelayAccum=0),this.rule.resetResetsByFalling&&this.resetLockDelayResets()),this.isOnGround()&&(this.lockDelayAccum+=t,this.needsRedrawing()),this.hasExhaustedResets()&&"disable-resets"===this.rule.resetExpirationPenalty||(this.rule.resetLockDelayByMoving&&this.movementsAccum>this.movementsAccommodated&&(this.movementsAccommodated=this.movementsAccum,this.lockDelayAccum=0,this.needsRedrawing()),this.rule.resetLockDelayByRotating&&this.rotationsAccum>this.rotationsAccommodated&&(this.rotationsAccommodated=this.rotationsAccum,this.lockDelayAccum=0,this.needsRedrawing()))}getMoveResets(){return this.movementsAccum}getRotationResets(){return this.rotationsAccum}hasExhaustedResets(){return!!(this.rule.moveAndRotateResetsAreShared&&this.movementsAccum+this.rotationsAccum>=Math.min(this.rule.moveResets,this.rule.rotationResets)&&this.rule.resetLockDelayByMoving&&this.rule.resetLockDelayByRotating)||!(!(()=>this.movementsAccum>=this.rule.moveResets&&this.rule.resetLockDelayByMoving)()&&!(()=>this.rotationsAccum>=this.rule.rotationResets&&this.rule.resetLockDelayByRotating)())}lockDelayHasExpired(){return"retro"===this.rule.lockDelayType?this.needsToDie:!("limited"!==this.rule.lockDelayType||!this.isOnGround()||!this.hasExhaustedResets()||"instant-lock"!==this.rule.resetExpirationPenalty)||this.lockDelayAccum>=this.rule.lockDelay&&this.isOnGround()}getLockDelayAccumulated(){return this.lockDelayAccum}hasPolyomino(){return null!=this.polyomino}isAboveSkyline(){return this.y+this.polyomino.getVisualData().endY<this.matrix.getHiddenHeight()}isPartiallyAboveSkyline(){return this.y+this.polyomino.getVisualData().endY<this.matrix.getHiddenHeight()}getIntY(){return Math.floor(this.y)}getVisibleY(){return this.getIntY()-this.matrix.getHiddenHeight()}hasEnoughSpaceBelow(t){return t<1||this.getDropDistance(t)===Math.floor(t)}getDropDistance(t){if(this.isStuck()||this.isDead())return 0;let e;for(e=1;e<=t;e++)if(this.collidesWith(0,e))return e-1;return e-1}getDistanceToFloor(){return this.getDropDistance(this.matrix.getHeight()+Math.abs(this.getIntY()))}slamToFloor(){if(this.isDead())return;const t=this.getDistanceToFloor();this.y+=t,t>0&&(this.lastAction="fall")}getFallSpeed(){if(this.inSoftDrop)switch(this.rule.softDropType){case"multiplicative":return this.fallSpeed/this.rule.softDropSpeed;case"additive":return this.fallSpeed+this.rule.softDropSpeed;case"absolute":return Math.min(this.fallSpeed,this.rule.softDropSpeed);default:throw new Error("Unhandled soft drop type")}return this.fallSpeed}setFallSpeedAsMsPerLine(t){this.fallSpeed=t}setFallSpeedAsG(t){this.fallSpeed=1/t/60*1e3}setFallSpeedTo20G(){this.fallSpeed=.09}is20G(){return this.fallSpeed<.1}sendToHoldQueue(t){this.rule.holdResetsPieceOrientation&&this.polyomino.setOrientation(this.rule.rotationSystem.initialOrientation[this.polyomino.getShape()]),t.setPolyomino(this.polyomino),this.polyomino=null}swapWithHoldQueue(t){const e=t.getPolyomino();this.sendToHoldQueue(t),this.init(e)}getPolyominoShape(){return this.polyomino.getShape()}getHardDropLineClearRows(){const t=this.matrix.getGridWithPolyomino(this.x,this.getIntY()+this.getDistanceToFloor(),this.polyomino);return this.matrix.getFilledRows(t)}getDrawData(){if(null==this.polyomino)return[];const t=[],e=this.polyomino.getMonominos();for(let n=0;n<this.polyomino.getTotalMonominos();n++)this.rule.allowsGhost&&t.push({x:this.x+this.polyomino.getCurrentCoordinates()[n].x,y:this.getVisibleY()+this.polyomino.getCurrentCoordinates()[n].y+this.getDistanceToFloor(),color:e[n].getColor(),shape:e[n].getShape(),isGhost:!0,skin:e[n].getSkin()}),t.push({x:this.x+this.polyomino.getCurrentCoordinates()[n].x,y:this.getVisibleY()+this.polyomino.getCurrentCoordinates()[n].y,shape:e[n].getShape(),color:e[n].getColor(),skin:e[n].getSkin()});return t}}class bt{constructor({rule:t,mode:e}){this.queue=[],this.lastPolyominoes=[],this.rule=t,this.mode=e;for(let e=0;e<t.maxPiecePreviews;e++)this.addPolyominoFromRandomizer()}addPolyominoFromRandomizer(){this.rule.randomizer.setPolyominoSet(this.mode.polyominoSet);const t=new vt({shape:this.rule.randomizer.getNextPolyomino()});t.assignDefaultsFromRule(this.rule),this.queue.push(t)}shiftNextPolyomino(){const t=this.queue.shift();return this.queue.length<Math.max(1,this.rule.maxPiecePreviews)&&this.addPolyominoFromRandomizer(),t}getNextPolyomino(){return this.queue[0]}swapFirstPolyominoWithHold(t){const e=t.getPolyomino();t.setPolyomino(this.queue[0]),this.queue[0]=e}reassignPolyominoDefaults(){for(const t of this.queue)t.assignDefaultsFromRule(this.rule)}updateDirtyLasts(){this.lastPolyominoes=[...this.queue]}forceDirty(){this.lastPolyominoes=[null]}isDirty(){for(let t=0;t<this.queue.length;t++)if(this.lastPolyominoes[t]!==this.queue[t])return!0;return!1}getDrawInfo(){const t=[],e=this.rule.maxPiecePreviews;this.populateQueue();for(let n=0;n<e;n++){const e=this.queue[n],r=e.getMonominos(),o=[];for(let t=0;t<e.getTotalMonominos();t++){const n=r[t];o.push({x:e.getCoordinates(this.rule.rotationSystem.initialOrientation[e.getShape()])[t].x,y:e.getCoordinates(this.rule.rotationSystem.initialOrientation[e.getShape()])[t].y,color:n.getColor(),shape:n.getShape(),orientation:e.getOrientation(),skin:n.getSkin()})}t.push(o)}return t}populateQueue(){for(;this.queue.length<this.rule.maxPiecePreviews;)this.addPolyominoFromRandomizer()}}bt.INIT_SIZE=9;class wt{constructor({rule:t}){this.rule=t,this.polyomino=null}setPolyomino(t){this.polyomino=t}getPolyomino(){return this.polyomino}updateDirtyLasts(){this.lastPolyomino=this.polyomino}isDirty(){return this.polyomino!==this.lastPolyomino}forceDirty(){this.lastPolyomino=null}getDrawInfo(){if(null==this.polyomino)return[];const t=this.polyomino.getMonominos(),e=[];for(let n=0;n<this.polyomino.getTotalMonominos();n++){const r=t[n];e.push({x:this.polyomino.getCurrentCoordinates()[n].x,y:this.polyomino.getCurrentCoordinates()[n].y,color:r.getColor(),shape:r.getShape(),orientation:this.polyomino.getOrientation(),skin:r.getSkin()})}return e}reassignPolyominoDefaults(){var t;null===(t=this.polyomino)||void 0===t||t.assignDefaultsFromRule(this.rule)}}class kt{constructor(t){this.lineClearAmount=0,this.hasYetToCollapseRows=!1,this.softDropIsDown=!1,this.entryDelayAccum=0,this.hasBufferedHold=!1,this.bufferedRotateDirection=null,this.bufferedMoveDirection="none",this.hasExhaustedResetsThisTick=!1,this.holdIsLocked=!1,this.combo=-1,this.b2b=-1,this.readyTime=1500,this.renderActionList=[],this.stats={linesCleared:0,polyominoesPlaced:0,scoreAccumulated:0},this.waitingOnReady=!0,this.mode=new t,this.rule=new this.mode.Rule,this.rule.randomizer.setPolyominoSet(this.mode.polyominoSet),this.nextQueue=new bt({rule:this.rule,mode:this.mode}),this.holdQueue=new wt({rule:this.rule}),this.matrix=new mt({rule:this.rule}),this.polyominoController=new xt({matrix:this.matrix,rule:this.rule,mode:this.mode}),this.resetStandardAutoshiftVars(),this.resetRetroAutoshiftVars(),this.shiftDirection="none"}getAutoshiftDelay(){return Math.max(this.rule.minAutoshiftDelay,Math.min(this.rule.maxAutoshiftDelay,it.config.autoshiftDelay))}getAutoshiftRate(){return Math.max(this.rule.minAutoshiftRate,Math.min(this.rule.maxAutoshiftRate,it.config.autoshiftRate))}resetStandardAutoshiftVars(){this.autoshiftDelayAccum=0,this.autoshiftRateAccum=this.getAutoshiftRate(),this.hasReleasedShift=!0}resetRetroAutoshiftVars(){this.softDropIsDown||(this.autoshiftAccum=0,this.hasReleasedShift=!0,this.wallCharge=!1)}doStartOfTick(t){if(this.mode.onStartOfTickBegin(this),"gameOver"!==this.state){if("playing"===this.state&&this.polyominoController.doGravity(t),"entryDelay"===this.state){if(this.entryDelayAccum+=t,this.lineClearAmount&&this.entryDelayAccum>this.rule.lineClearDelay&&this.hasYetToCollapseRows&&(this.matrix.collapseRowsMarkedForDeath()&&a.add("collapse"),this.hasYetToCollapseRows=!1),!(this.entryDelayAccum>=this.getEntryDelay()))return;if(this.waitingOnReady&&(this.renderActionList.push(["spawnFirstPiece",null]),a.add("start"),this.waitingOnReady=!1),this.hasBufferedHold&&(null==this.holdQueue.getPolyomino()?this.holdQueue.setPolyomino(this.nextQueue.shiftNextPolyomino()):this.nextQueue.swapFirstPolyominoWithHold(this.holdQueue),a.add("bufferedHold"),this.holdIsLocked=!0),null!=this.bufferedRotateDirection){const t=this.nextQueue.getNextPolyomino(),e=(t.getOrientation()+this.bufferedRotateDirection)%4;t.setOrientation(e),a.add("bufferedRotate"),this.bufferedRotateDirection=null}if(this.polyominoController.init(this.nextQueue.shiftNextPolyomino()),this.hasBufferedHold?this.hasBufferedHold=!1:this.holdIsLocked=!1,"left"===this.bufferedMoveDirection?(this.polyominoController.shiftLeft(),this.bufferedMoveDirection="none"):"right"===this.bufferedMoveDirection&&(this.polyominoController.shiftRight(),this.bufferedMoveDirection="none"),this.rule.softDropCarriesBetweenPieces||(this.polyominoController.inSoftDrop=!1),this.polyominoController.isStuck())return void this.end("blockOut");this.state="playing",this.mode.onNewPolyomino(this)}this.hasExhaustedResetsThisTick=this.polyominoController.hasExhaustedResets(),this.polyominoController.lockDelayHasExpired()&&(a.add("lockWithoutHardDrop"),this.lockdown()),this.mode.onStartOfTickEnd(this)}}doEndOfTick(t){this.mode.onEndOfTickBegin(this),"gameOver"!==this.state&&"entryDelay"!==this.state&&(this.polyominoController.doLockDelay(t),this.polyominoController.is20G()&&!this.rule.suspendPieceUntilAction&&this.polyominoController.slamToFloor(),this.polyominoController.hasExhaustedResets()&&!this.hasExhaustedResetsThisTick&&a.add("outOfResets"),this.polyominoController.lockDelayHasExpired()&&(a.add("lockWithoutHardDrop"),this.lockdown()),this.polyominoController.updateLowestAndLastY(),this.mode.onEndOfTickEnd(this))}lockdown(){a.add("lock"),this.entryDelayAccum=0,this.stats.polyominoesPlaced++;let t=!1;(this.rule.hasLockOut||this.rule.hasPartialLockOut)&&(this.rule.hasPartialLockOut&&this.polyominoController.isPartiallyAboveSkyline()&&(t=!0),this.polyominoController.isAboveSkyline()&&(t=!0));const e=this.polyominoController.checkIfSpin();if(this.polyominoController.lockdown(),t)return void this.end("lockOut");this.state="entryDelay",this.matrix.markFilledRowsForDeath(),this.matrix.killRowsMarkedForDeath(),this.matrix.isEmpty()&&a.add("perfectClear"),this.lineClearAmount=this.matrix.getRowsMarkedForDeath().length,this.stats.linesCleared+=this.lineClearAmount;let n=[];if(this.lineClearAmount>3||e.isSpin&&this.lineClearAmount>0?(this.b2b++,this.b2b>0?a.add("b2bContinue"):a.add("b2bStart")):this.lineClearAmount>0&&(this.b2b>0&&a.add("b2bEnd"),this.b2b=-1),n=this.b2b>0?e.isSpin?e.isMini?["tSpinMini0","tSpinMini1b2b","tSpinMini2b2b",null,null]:["tSpin0","tSpin1b2b","tSpin2b2b","tSpin3b2b",null]:[null,"erase1","erase2","erase3","erase4b2b"]:e.isSpin?e.isMini?["tSpinMini0","tSpinMini1","tSpinMini2",null,null]:["tSpin0","tSpin1","tSpin2","tSpin3",null]:[null,"erase1","erase2","erase3","erase4"],this.lineClearAmount>0){if(this.combo++,this.combo>0)if(this.combo>20)a.add("combo20");else{const t=`combo${this.combo}`;a.add(t)}}else this.combo=-1;null!=n[this.lineClearAmount]&&a.add(n[this.lineClearAmount]),this.rule.lineClearDelay<=0&&this.matrix.collapseRowsMarkedForDeath(),this.hasYetToCollapseRows=!0,this.mode.onLockdown(this)}getEntryDelay(){return this.waitingOnReady?this.readyTime:0===this.lineClearAmount?this.rule.entryDelay:this.rule.lineClearDelay+this.rule.entryDelayOnLineClear}getEntryDelayAccum(){return this.entryDelayAccum}doHardDrop(){"gameOver"!==this.state&&(this.polyominoController.isDead()||this.rule.allowsHardDrop&&(a.add("pieceHardDrop"),this.polyominoController.slamToFloor(),this.rule.hardDropLocksPieceInstantly&&this.lockdown()))}onHardDropPress(){this.doHardDrop()}onHardDropRelease(){"gameOver"!==this.state&&this.polyominoController.isDead()}onHardDropDown(){this.rule.hardDropExecutesOnlyOncePerPress||this.doHardDrop()}onSoftDropPress(){this.softDropIsDown=!0,"gameOver"!==this.state&&("retro"===this.rule.autoshiftType&&"none"!==this.shiftDirection||(this.rule.allowsSoftDrop?this.polyominoController.inSoftDrop=!0:this.polyominoController.inSoftDrop=!1))}onSoftDropRelease(){this.softDropIsDown=!1,"gameOver"!==this.state&&(this.polyominoController.inSoftDrop=!1)}onSoftDropDown(){this.rule.softDropLocksPieceInstantly&&this.polyominoController.isOnGround()&&(a.add("lockWithoutHardDrop"),this.lockdown())}onHoldPress(){if("gameOver"!==this.state&&this.rule.allowsHold)return"entryDelay"===this.state?(this.rule.allowsHoldBuffering&&(this.hasBufferedHold=!0),void(this.rule.skipEntryDelayOnHold&&!this.waitingOnReady&&(this.entryDelayAccum=this.getEntryDelay(),this.hasBufferedHold=!0))):void(this.holdIsLocked||(null==this.holdQueue.getPolyomino()?(this.polyominoController.sendToHoldQueue(this.holdQueue),this.polyominoController.init(this.nextQueue.shiftNextPolyomino())):(this.polyominoController.swapWithHoldQueue(this.holdQueue),this.polyominoController.isStuck()&&this.end("blockOut")),a.add("pieceHold"),this.holdIsLocked=!0))}applyRotationBuffer(t){this.rule.skipEntryDelayOnRotate&&!this.waitingOnReady&&(this.entryDelayAccum=this.getEntryDelay()),(this.rule.allowsRotateBuffering||this.rule.skipEntryDelayOnRotate)&&(this.bufferedRotateDirection=t)}onRotateLeft(){"gameOver"!==this.state&&this.rule.allowsRotateLeft&&("entryDelay"!==this.state?this.polyominoController.rotate(3):this.applyRotationBuffer(3))}onRotateRight(){"gameOver"!==this.state&&this.rule.allowsRotateRight&&("entryDelay"!==this.state?this.polyominoController.rotate(1):this.applyRotationBuffer(1))}onRotate180(){"gameOver"!==this.state&&this.rule.allowsRotate180&&("entryDelay"!==this.state?this.polyominoController.rotate(2):this.applyRotationBuffer(2))}setDirection({leftPressedAmount:t,rightPressedAmount:e,hasRightReleased:n,isLeftDown:r,hasLeftReleased:o,isRightDown:i,resetShiftOnFullRelease:a,resetVariableMethod:s}){return t>e?(s(),this.shiftDirection="left"):e&&(s(),this.shiftDirection="right"),"right"===this.shiftDirection&&n&&r?(s(),this.shiftDirection="left",t=1):"left"===this.shiftDirection&&o&&i?(s(),this.shiftDirection="right",e=1):n&&r?this.shiftDirection="left":o&&i?this.shiftDirection="right":(o||n)&&(a&&s(),this.shiftDirection="none"),{left:t,right:e}}updateShift({leftPressedAmount:t=0,rightPressedAmount:e=0,hasLeftReleased:n=!1,hasRightReleased:r=!1,isLeftDown:o=!1,isRightDown:i=!1,msPassed:a}){if("gameOver"!==this.state)switch(this.rule.autoshiftType){case"standard":{if(this.polyominoController.isStuck())return;const s=this.setDirection({leftPressedAmount:t,rightPressedAmount:e,hasRightReleased:r,isLeftDown:o,hasLeftReleased:n,isRightDown:i,resetShiftOnFullRelease:!0,resetVariableMethod:this.resetStandardAutoshiftVars.bind(this)});if(t=s.left,e=s.right,"off"===it.config.autoshiftBuffering&&"entryDelay"===this.state)return;if("none"!==this.shiftDirection){"instant"!==it.config.autoshiftBuffering||"entryDelay"!==this.state||this.rule.skipEntryDelayOnMove||(this.autoshiftDelayAccum=this.getAutoshiftDelay());const n="left"===this.shiftDirection?this.polyominoController.shiftLeft.bind(this.polyominoController):this.polyominoController.shiftRight.bind(this.polyominoController);if(this.hasReleasedShift){const r="left"===this.shiftDirection?t:e;for(let t=0;t<r;t++)n();this.rule.skipEntryDelayOnMove&&!this.waitingOnReady&&"entryDelay"===this.state&&(this.entryDelayAccum=this.getEntryDelay(),this.bufferedMoveDirection=this.shiftDirection),this.hasReleasedShift=!1}else if(this.autoshiftDelayAccum<this.getAutoshiftDelay())this.autoshiftDelayAccum+=a;else if(this.autoshiftDelayAccum>=this.getAutoshiftDelay()){if(this.getAutoshiftRate()<=0){let t=0;for(;"left"===this.shiftDirection?this.polyominoController.canShiftLeft():this.polyominoController.canShiftRight();){if(t>this.matrix.getWidth())throw new Error("There is a problem with polyomino collision checks.");n(),this.polyominoController.is20G()&&this.polyominoController.slamToFloor(),t++}}else for(;this.autoshiftRateAccum>=this.getAutoshiftRate();)n(),this.polyominoController.is20G()&&this.polyominoController.slamToFloor(),this.autoshiftRateAccum-=this.getAutoshiftRate();this.autoshiftRateAccum+=a}}break}case"retro":if(this.polyominoController.isStuck())return;if("entryDelay"===this.state)return void(o?(this.hasReleasedShift=!1,this.shiftDirection="left"):i?(this.hasReleasedShift=!1,this.shiftDirection="right"):this.shiftDirection="none");if(this.setDirection({leftPressedAmount:t,rightPressedAmount:e,hasRightReleased:r,isLeftDown:o,hasLeftReleased:n,isRightDown:i,resetShiftOnFullRelease:!1,resetVariableMethod:this.resetRetroAutoshiftVars.bind(this)}),(o&&!this.polyominoController.canShiftLeft()||i&&!this.polyominoController.canShiftRight())&&(this.wallCharge=!0),"none"!==this.shiftDirection&&!this.softDropIsDown){const t="left"===this.shiftDirection?this.polyominoController.shiftLeft.bind(this.polyominoController):this.polyominoController.shiftRight.bind(this.polyominoController);for(this.hasReleasedShift||this.wallCharge?(t(),this.hasReleasedShift=!1,("left"===this.shiftDirection?this.polyominoController.canShiftLeft():this.polyominoController.canShiftRight())&&(this.wallCharge=!1)):this.autoshiftAccum<this.getAutoshiftDelay()&&(this.autoshiftAccum+=a);this.autoshiftAccum>=this.getAutoshiftDelay();)t(),this.autoshiftAccum-=this.getAutoshiftRate()}break;default:throw new Error(`Unhandled autoshift type: ${this.rule.autoshiftType}`)}}start(){a.add("ready"),this.state="entryDelay",this.mode.onGameStart(this),this.renderActionList.push(["start",null])}end(t){switch(this.state="gameOver",t){case"cleared":a.add("gameVictory");break;default:a.add("gameDeath")}this.renderActionList.push(["end",[t]])}getStats(){return this.stats}getState(){return this.state}getPolyominoController(){return this.polyominoController}getMatrix(){return this.matrix}getNextQueue(){return this.nextQueue}getHoldQueue(){return this.holdQueue}getHoldLockedState(){return this.holdIsLocked}getControllerDrawInfo(){return this.polyominoController.getDrawData()}getControllerDirtyState(){return this.polyominoController.isDirty()}hadControllerDrawn(){this.polyominoController.wasDrawn()}getControllerLockDelay(){return this.polyominoController.getLockDelayAccumulated()}getHardDropLineClearRows(){return this.polyominoController.getHardDropLineClearRows()}getMatrixDrawInfo(){return this.matrix.getDrawData()}getMatrixHiddenHeight(){return this.matrix.getHiddenHeight()}getNextDrawInfo(){return this.nextQueue.getDrawInfo()}getHoldDrawInfo(){return this.holdQueue.getDrawInfo()}}class St{constructor(){this.data=[],this.msPassedRollover=0}record(t,e){const n=[];for(const e of t)0!==e.change&&-1!==at.GAME_KEYS.indexOf(e.control)&&n.push(e);n.length<=0?this.msPassedRollover+=e:(this.data.push([n,e+this.msPassedRollover]),this.msPassedRollover=0)}getData(){return this.data}}class At{constructor(t){this.text=t}getText(){return this.text}choose(){}}class Dt{constructor(){this.isPaused=!1,this.pauseSelection=null,this.hasQuit=!1,this.pauseMenuButtons=[],this.replay=null,this.pauseMenuButtons[0]=new At(X.t("gameUi:continue")),this.pauseMenuButtons[0].choose=()=>{this.engine.updateShift({msPassed:1,hasLeftReleased:!0,hasRightReleased:!0}),a.add("menuConfirm",a.soundbanks.system),this.isPaused=!1},this.pauseMenuButtons[1]=new At(X.t("gameUi:retry")),this.pauseMenuButtons[1].choose=()=>{this.isPaused&&(this.isPaused=!1),a.add("menuChoose",a.soundbanks.system),this.engine=new kt(this.Mode),this.engine.start()},this.pauseMenuButtons[2]=new At(X.t("gameUi:quit")),this.pauseMenuButtons[2].choose=()=>{a.add("menuBack",a.soundbanks.system),this.hasQuit=!0}}init(t){this.Mode=t,this.engine=new kt(this.Mode),this.replay=new St}doTick(t){if(this.replay.record(at.getControlChange(),t),!this.hasQuit){if(at.getKeyPressed("retry"))return this.isPaused&&(this.isPaused=!1),this.engine=new kt(this.Mode),void this.engine.start();if("gameOver"!==this.engine.getState()){if(this.isPaused)return at.getKeyPressed("menuDown")?(a.add("menuSelect",a.soundbanks.system),this.pauseSelection=this.pauseMenuButtons[(this.pauseMenuButtons.indexOf(this.pauseSelection)+1)%this.pauseMenuButtons.length]):at.getKeyPressed("menuUp")&&(a.add("menuSelect",a.soundbanks.system),this.pauseSelection=this.pauseMenuButtons[(this.pauseMenuButtons.indexOf(this.pauseSelection)+this.pauseMenuButtons.length-1)%this.pauseMenuButtons.length]),at.getKeyPressed("pause")?(this.engine.updateShift({msPassed:1,hasLeftReleased:!0,hasRightReleased:!0}),a.add("unpause"),void(this.isPaused=!1)):void(at.getKeyPressed("menuSelect")&&this.pauseSelection.choose());if(at.getKeyPressed("pause"))return a.add("pause"),this.pauseSelection=this.pauseMenuButtons[0],void(this.isPaused=!0);this.engine.doStartOfTick(t);for(let t=0;t<at.getKeyPressedAsNum("rotateLeft");t++)this.engine.onRotateLeft();for(let t=0;t<at.getKeyPressedAsNum("rotateRight");t++)this.engine.onRotateRight();for(let t=0;t<at.getKeyPressedAsNum("rotate180");t++)this.engine.onRotate180();this.engine.updateShift({msPassed:t,leftPressedAmount:at.getKeyPressedAsNum("shiftLeft"),rightPressedAmount:at.getKeyPressedAsNum("shiftRight"),isLeftDown:at.getKeyDown("shiftLeft"),isRightDown:at.getKeyDown("shiftRight"),hasLeftReleased:at.getKeyReleased("shiftLeft"),hasRightReleased:at.getKeyReleased("shiftRight")}),at.getKeyPressed("softDrop")&&this.engine.onSoftDropPress(),at.getKeyReleased("softDrop")&&this.engine.onSoftDropRelease(),at.getKeyDown("softDrop")&&this.engine.onSoftDropDown(),at.getKeyPressed("hardDrop")&&this.engine.onHardDropPress(),at.getKeyReleased("hardDrop")&&this.engine.onHardDropRelease(),at.getKeyDown("hardDrop")&&this.engine.onHardDropDown(),at.getKeyPressed("hold")&&this.engine.onHoldPress(),this.engine.doEndOfTick(t)}}}}class Ct{constructor(t){this.canvas=t,this.ctx=lt(t)}draw(t,e,n){if(ct(this.ctx),"retro"===t.rule.lockDelayType)return;const r=this.canvas.clientWidth,o=this.canvas.clientHeight,i=t.getPolyominoController().getMoveResets(),a=t.getPolyominoController().getRotationResets();if((t.rule.resetLockDelayByMoving||t.rule.resetLockDelayByRotating)&&t.rule.moveAndRotateResetsAreShared){const e=Math.min(t.rule.moveResets,t.rule.rotationResets),n=o/2,s=r/40,u=r/e-s,l=u+s+s/(e-1);for(let r=0;r<e;r++)this.ctx.fillStyle="#ffffff",(r>=e-(i+a)||!t.getPolyominoController().hasPolyomino())&&(this.ctx.fillStyle="#ffffff25"),this.ctx.fillRect(Math.floor(r*l),0,Math.floor(u),Math.floor(n))}const s=t.rule.resetLockDelayByMoving||t.rule.resetLockDelayByRotating?o/3*2:0,u=o/3;if(t.getPolyominoController().hasExhaustedResets()){this.ctx.fillStyle="#000",this.ctx.fillRect(0,Math.floor(s),r,Math.floor(u));const t=_t(n),o=("0"+Math.floor(255*(1-e%t/t)).toString(16)).slice(-2);this.ctx.fillStyle=`#ff0000${o}`,this.ctx.fillRect(0,Math.floor(s),r,u)}else this.ctx.fillStyle="#ffffff25",this.ctx.fillRect(0,Math.floor(s),r,Math.floor(u)),t.getPolyominoController().hasPolyomino()?(this.ctx.fillStyle="#ffffff",this.ctx.fillRect(0,Math.floor(s),(1-t.getControllerLockDelay()/t.rule.lockDelay)*r,Math.floor(u))):(this.ctx.fillStyle="#ffffff99",this.ctx.fillRect(0,Math.floor(s),t.getEntryDelayAccum()/t.getEntryDelay()*r,Math.floor(u)))}}class Lt extends pt{constructor(t){super(),this.pauseOptions=[],this.statElements={},this.lastControllerData={},this.lastMatrixData={},this.hardDropLineClearRows=[],this.accum=0,this.accum60check=0,this.lastHoldLocked=!1,this.initialWait=0,this.nextQueueToAnimate=-5,this.lastHoldAllowed=!0,this.containerDiv=document.createElement("div"),this.containerDiv.classList.add("game-container"),this.pauseMenuContainer=document.createElement("div"),this.pauseMenuContainer.classList.add("pause-menu-container","hidden"),this.gameOverContainer=document.createElement("div"),this.gameOverContainer.classList.add("game-over-container","hidden"),this.gameDiv=this.makeDiv(["game"],this.containerDiv),this.leftDiv=this.makeDiv(["game-left"],this.gameDiv),this.centerDiv=this.makeDiv(["game-center"],this.gameDiv),this.rightDiv=this.makeDiv(["game-right"],this.gameDiv),this.backgroundCanvas=this.makeCanvas(["game-background-canvas"],this.centerDiv),this.backgroundCtx=lt(this.backgroundCanvas),this.matrixCanvas=this.makeCanvas(["game-canvas"],this.centerDiv),this.matrixCtx=lt(this.matrixCanvas),this.controllerCanvas=this.makeCanvas(["game-canvas"],this.centerDiv),this.controllerCtx=lt(this.controllerCanvas),this.controllerCanvas.classList.add("pulse"),this.lockdownBarCanvas=this.makeCanvas(["lockdown-bar-canvas"],this.centerDiv),this.nextContainer=this.makeDiv(["next-container"],this.rightDiv),this.nextLabel=this.makeParagraph(["next-label"],this.nextContainer),this.nextCanvas=this.makeCanvas(["next-canvas"],this.nextContainer),this.nextCtx=lt(this.nextCanvas),this.holdContainer=this.makeDiv(["hold-container"],this.leftDiv),this.holdLabel=this.makeParagraph(["hold-label"],this.holdContainer),this.holdCanvas=this.makeCanvas(["hold-canvas"],this.holdContainer),this.holdCtx=lt(this.holdCanvas),this.statContainer=this.makeDiv(["stat-container"],this.leftDiv),this.modeNameLabel=this.makeDiv(["game-mode-label"],this.centerDiv),this.readyGoMessageDiv=this.makeDiv(["ready-go-message"],this.centerDiv),this.pauseText=this.makeDiv(["pause-text"],this.pauseMenuContainer),this.pauseText.textContent=X.t("gameUi:pause"),this.optionsContainer=this.makeUl(["options-list"],this.pauseMenuContainer),this.gameOverText=this.makeDiv(["game-over-text"],this.gameOverContainer),this.manager=new Dt,this.manager.init(t);for(const t of this.manager.pauseMenuButtons)t.element=this.makeLi([],this.optionsContainer),t.element.textContent=t.getText(),t.element.onclick=()=>{this.manager.isPaused&&(this.manager.hasQuit||t.choose())},t.element.onmouseenter=()=>{this.manager.isPaused&&(this.manager.hasQuit||this.manager.pauseSelection!==t&&(this.manager.pauseSelection=t,a.add("menuSelect",a.soundbanks.system)))};this.lockdownBar=new Ct(this.lockdownBarCanvas),this.createStatContainer(),this.width=this.manager.engine.getMatrix().getWidth(),this.height=this.manager.engine.getMatrix().getVisibleHeight(),this.manager.engine.start(),this.centerDiv.classList.add("board-entrance-animation"),this.leftDiv.classList.add("queue-entrance-animation"),this.rightDiv.classList.add("queue-entrance-animation"),this.bpm=140}doLogicTick(t){this.manager.doTick(t)}handleActions(){const{engine:t}=this.manager;for(const e of t.renderActionList)switch(e[0]){case"start":{this.gameOverContainer.classList.add("hidden"),this.containerDiv.classList.remove("game-over");let t=X.t("gameUi:ready");const e=.05;let n=-e;const r=t.replace(/\S/g,(t=>(n+=e,`<span class="ready-animation-letter" style="--animation-delay: ${n}s;">`+t+"</span>")));t=r,this.readyGoMessageDiv.innerHTML=r,this.readyGoMessageDiv.classList.remove("start-animation"),dt(this.readyGoMessageDiv,"ready-animation");break}case"spawnFirstPiece":this.readyGoMessageDiv.innerHTML=X.t("gameUi:start"),this.readyGoMessageDiv.classList.remove("ready-animation"),dt(this.readyGoMessageDiv,"start-animation"),this.centerDiv.classList.remove("board-entrance-animation"),this.leftDiv.classList.remove("queue-entrance-animation"),this.rightDiv.classList.remove("queue-entrance-animation");break;case"end":{console.log(JSON.stringify(this.manager.replay.getData()));const t=e[1][0];this.containerDiv.classList.add("game-over");let n="";switch(t){case"blockOut":n=X.t("gameUi:blockOut");break;case"lockOut":n=X.t("gameUi:lockOut");break;case"topOut":n=X.t("gameUi:topOut");break;case"timeUp":n=X.t("gameUi:timeUp");break;case"cleared":n=X.t("gameUi:excellent")}this.gameOverText.innerHTML=X.t("gameUi:gameOver"),this.gameOverContainer.classList.remove("hidden");break}}t.renderActionList=[]}doDrawTick(t,e=!1){const{engine:n}=this.manager;if(this.handleActions(),this.manager.hasQuit){this.containerDiv.classList.add("quit"),this.pauseText.classList.add("quit");for(const t of this.manager.pauseMenuButtons)t.element.classList.add("quit");this.manager.pauseSelection.element.classList.add("quit-selection")}else if(this.manager.isPaused){this.containerDiv.classList.add("paused"),this.pauseMenuContainer.classList.remove("hidden");for(const t of this.manager.pauseMenuButtons)t.element.classList.remove("selected");this.manager.pauseSelection.element.classList.add("selected")}else{for(const t of this.manager.pauseMenuButtons)t.element.classList.remove("selected");this.containerDiv.classList.remove("paused"),this.pauseMenuContainer.classList.add("hidden")}this.accum+=t,this.accum60check+=t,this.accum60check>1e3/60&&(this.flickerAmount=Math.random()/2+.5,this.accum60check-=1e3/60);const r=this.getCellSize();n.getPolyominoController().checkIfSpin().isSpin?this.controllerCanvas.classList.add("tspin"):this.controllerCanvas.classList.remove("tspin"),(n.getPolyominoController().isDirty()||e)&&(this.hardDropLineClearRows=n.getPolyominoController().getHardDropLineClearRows(),this.drawController(n,r)),this.drawMatrix(n,r),(n.getNextQueue().isDirty()||e||this.nextQueueToAnimate<9)&&this.drawNext(n,r),(n.getHoldQueue().isDirty()||this.lastHoldLocked!==n.getHoldLockedState()||this.lastHoldAllowed!==n.rule.allowsHold||e)&&this.drawHold(n,r),this.lockdownBar.draw(n,this.accum,this.bpm),this.updateLasts(),this.updateStats()}drawMatrix(t,e){ct(this.matrixCtx);const n=this.hardDropLineClearRows,r=t.getMatrix().getDrawData();for(const o of r){if("invalid"===o.color)continue;this.drawMonomino(this.matrixCtx,o.color,o.skin,o.shape,o.x,o.y+Lt.BUFFER_PEEK,e);const r=o.x*e,i=(o.y+Lt.BUFFER_PEEK)*e;if(this.matrixCtx.globalCompositeOperation="multiply",this.matrixCtx.fillStyle="#0003",this.matrixCtx.fillRect(Math.floor(r),Math.floor(i),e,e),-1!==n.indexOf(o.y+t.getMatrix().getHiddenHeight())){const t=("0"+Math.floor(255*(1-(this.accum+(this.width-o.x)/this.width*_t(this.bpm))%_t(this.bpm)/_t(this.bpm))).toString(16)).slice(-2);this.matrixCtx.globalCompositeOperation="overlay",this.matrixCtx.fillStyle=`#ffffff${t}`,this.matrixCtx.fillRect(Math.floor(o.x*e),Math.floor((o.y+Lt.BUFFER_PEEK)*e),e,e),this.matrixCtx.globalCompositeOperation="source-over"}if(performance.now()-o.timeLocked<400){const t=("0"+Math.floor(255*(1-(performance.now()-o.timeLocked)/400)).toString(16)).slice(-2);this.matrixCtx.globalCompositeOperation="overlay",this.matrixCtx.fillStyle=`#ffffff${t}`,this.matrixCtx.fillRect(Math.floor(r),Math.floor(i),e,e),((t,n)=>{const a=(performance.now()-o.timeLocked+0)/200,s=(t=0)=>Math.min(Math.min(Math.max(Math.max(0,2*a-1+t),0),1)*e,e),u=(t=0)=>Math.min(e-Math.min(Math.max(Math.min(2*a+t,1),0),1)*e,e),l=s(-.2),c=u(-.2),h=s(.2),f=u(.2),d=Math.min(l,h),p=Math.min(c,f);this.matrixCtx.beginPath(),this.matrixCtx.moveTo(r+l,Math.floor(i+c)),this.matrixCtx.lineTo(r+e-c,Math.floor(i+e-l)),this.matrixCtx.lineTo(r+e-p,Math.floor(i+e-d)),this.matrixCtx.lineTo(r+e-f,Math.floor(i+e-h)),this.matrixCtx.lineTo(r+h,Math.floor(i+f)),this.matrixCtx.lineTo(r+d,Math.floor(i+p)),this.matrixCtx.fillStyle="#fff",this.matrixCtx.fill()})()}performance.now()-o.timeLocked<50&&(this.matrixCtx.globalCompositeOperation="source-atop",this.matrixCtx.fillStyle="#fff",this.matrixCtx.fillRect(Math.floor(r),Math.floor(i),e,e),this.matrixCtx.globalCompositeOperation="source-over")}for(const n of t.getMatrix().getRowsMarkedForDeath()){const r=("0"+Math.floor((t.rule.lineClearDelay-t.getEntryDelayAccum())/t.rule.lineClearDelay*255).toString(16)).slice(-2);this.matrixCtx.fillStyle=`#ffffff${r}`,this.matrixCtx.fillRect(0,Math.floor((n-t.getMatrix().getHiddenHeight()+Lt.BUFFER_PEEK)*e),this.matrixCanvas.clientWidth,e)}if(t.getMatrix().isCloseToSkyline()&&t.rule.hasLockOut){this.matrixCtx.globalCompositeOperation="source-over";const t=Lt.BUFFER_PEEK*e+2;this.matrixCtx.globalAlpha=this.flickerAmount,this.matrixCtx.beginPath(),this.matrixCtx.moveTo(0,t),this.matrixCtx.lineTo(this.matrixCanvas.clientWidth,t),this.matrixCtx.strokeStyle="#f00",this.matrixCtx.lineWidth=4,this.matrixCtx.stroke(),this.matrixCtx.globalAlpha=1}const o=t.getPolyominoController().getDrawData();if(t.getHoldLockedState()){this.matrixCtx.globalAlpha=this.flickerAmount;for(const t of o){if(t.isGhost)continue;this.matrixCtx.globalCompositeOperation="source-over",this.matrixCtx.fillStyle="#ffff00";const[n,r]=[t.x*e,(t.y+Lt.BUFFER_PEEK)*e],o=e/16;this.matrixCtx.fillRect(n-o,r-o,e+2*o,e+2*o)}this.matrixCtx.globalAlpha=1}}drawController(t,e){ct(this.controllerCtx);const n=t.getPolyominoController().getLockDelayAccumulated();let r=("0"+Math.floor(n/t.rule.lockDelay*255).toString(16)).slice(-2);t.getPolyominoController().hasExhaustedResets()&&(r="ff");for(const n of t.getPolyominoController().getDrawData())n.isGhost?this.controllerCtx.globalAlpha=.5:this.controllerCtx.globalAlpha=1,this.drawMonomino(this.controllerCtx,n.color,n.skin,n.shape,n.x,n.y+Lt.BUFFER_PEEK,e),n.isGhost||"retro"===t.rule.lockDelayType||(this.controllerCtx.globalCompositeOperation="saturation",this.controllerCtx.fillStyle=`#000000${r}`,this.controllerCtx.fillRect(Math.floor(n.x*e),Math.floor((n.y+Lt.BUFFER_PEEK)*e),e,e));t.getPolyominoController().updateDirtyLasts()}drawHold(t,e){if(ct(this.holdCtx),t.rule.allowsHold){this.holdLabel.classList.remove("hidden");for(const n of t.getHoldQueue().getDrawInfo())"invalid"!==n.color&&this.drawMonomino(this.holdCtx,n.color,n.skin,n.shape,n.x+Lt.QUEUE_OFFSETS[n.shape][n.orientation].x,n.y+Lt.QUEUE_OFFSETS[n.shape][n.orientation].y,e,t.getHoldLockedState())}else this.holdLabel.classList.add("hidden");t.getHoldQueue().updateDirtyLasts()}drawNext(t,e){ct(this.nextCtx);const n=t.getNextQueue().getDrawInfo();for(let t=0;t<n.length&&!(t>this.nextQueueToAnimate);t++)for(const r of n[t])"invalid"!==r.color&&(0===t?this.drawMonomino(this.nextCtx,r.color,r.skin,r.shape,r.x+Lt.QUEUE_OFFSETS[r.shape][r.orientation].x,r.y+Lt.QUEUE_OFFSETS[r.shape][r.orientation].y,e):this.drawMonomino(this.nextCtx,r.color,r.skin,r.shape,r.x+Lt.QUEUE_OFFSETS[r.shape][r.orientation].x+2,r.y+Lt.QUEUE_OFFSETS[r.shape][r.orientation].y+4+4*t,e/2));this.nextQueueToAnimate<9&&(this.nextQueueToAnimate+=.25),t.getNextQueue().updateDirtyLasts()}updateStats(){for(const t of this.manager.engine.mode.getStatsToDraw()){const e=this.statElements[t.name];e.value.innerHTML!==t.value&&(""!==e.value.innerHTML&&dt(e.value,"stat-update"),e.value.innerHTML=t.value)}}createStatContainer(){this.statElements={};let t=.5;for(const e of this.manager.engine.mode.getStatsToDraw()){const n=document.createElement("div");n.classList.add("stat-group"),n.style.setProperty("--delay",`${t}s`),n.classList.add("stat-entrance-animation");const r=document.createElement("div");r.classList.add("label"),r.innerHTML=e.name,n.appendChild(r);const o=document.createElement("div");o.classList.add("value"),e.isLarge&&o.classList.add("large"),o.innerHTML=e.value,n.appendChild(o),this.statElements[e.name]={group:n,label:r,value:o},setTimeout((()=>{n.classList.remove("stat-entrance-animation")}),1e3*(t+.5)),t+=.25,this.statContainer.appendChild(n)}}drawMonomino(t,e,n,r,o,i,a,s){const u=n.skin.getCoordinates({color:e,holdIsLocked:s,shape:r,level:this.manager.engine.mode.getLevel()}),l=n.skin.getResolution();t.drawImage(n.img,u.x,u.y,l,l,o*a,Math.floor(i*a),a,a)}clearCell(t,e,n,r){t.clearRect(Math.floor(e*r),Math.floor(n*r),r,r)}construct(){ut.getRendererContainer().appendChild(this.gameOverContainer),ut.getRendererContainer().appendChild(this.pauseMenuContainer),ut.getRendererContainer().appendChild(this.containerDiv),this.onResize(),this.onResize()}onResize(){this.updateText();const t=document.documentElement;t.style.setProperty("--cell-size",`${this.getCellSize()}px`),t.style.setProperty("--matrix-width",this.width.toString()),t.style.setProperty("--matrix-height",this.height.toString()),t.style.setProperty("--peek-zone",Lt.BUFFER_PEEK.toString()),t.style.setProperty("--off-screen",Lt.OFF_SCREEN.toString()),t.style.setProperty("--bpm",this.bpm.toString());for(const t of[this.controllerCanvas,this.matrixCanvas,this.backgroundCanvas,this.nextCanvas,this.holdCanvas,this.lockdownBarCanvas])t.width=t.clientWidth,t.height=t.clientHeight;this.manager.engine.getPolyominoController().needsRedrawing(),this.drawBackground(),this.doDrawTick(0,!0)}makeElement(t,e){const n=document.createElement(e);for(const e of t)n.classList.add(e);return n}makeDiv(t,e){const n=this.makeElement(t,"div");return e.appendChild(n),n}makeCanvas(t,e){const n=this.makeElement(t,"canvas");return e.appendChild(n),n}makeParagraph(t,e){const n=this.makeElement(t,"p");return e.appendChild(n),n}makeUl(t,e){const n=this.makeElement(t,"ul");return e.appendChild(n),n}makeLi(t,e){const n=this.makeElement(t,"li");return e.appendChild(n),n}updateText(){const t=X.t("gameUi:next"),e=X.t("gameUi:hold");this.nextLabel.style.justifyContent=t.length<=5?"center":"flex-start",this.holdLabel.style.justifyContent=e.length<=5?"center":"flex-end",this.nextLabel.textContent=t,this.holdLabel.textContent=e,this.modeNameLabel.textContent=this.manager.engine.mode.getName()}getCellSize(){const t=(Math.max(this.leftDiv.offsetWidth,this.statContainer.offsetWidth)+this.centerDiv.offsetWidth+this.rightDiv.offsetWidth)/this.centerDiv.offsetHeight,e=Math.min(window.innerWidth/t,window.innerHeight);return Math.floor(e/1.2/this.height)}drawBackground(){const t=1/4,e=this.getCellSize(),n=this.backgroundCtx;n.strokeStyle="#ffffff7f",n.lineWidth=2;for(let r=0;r<=this.width;r++)for(let o=0;o<=this.height;o++)n.beginPath(),n.moveTo(r*e-e*t,o*e),n.lineTo(r*e+e*t,o*e),n.stroke(),n.beginPath(),n.moveTo(r*e,o*e-e*t),n.lineTo(r*e,o*e+e*t),n.stroke()}updateLasts(){this.lastHoldLocked=this.manager.engine.getHoldLockedState(),this.lastHoldAllowed=this.manager.engine.rule.allowsHold}}Lt.BUFFER_PEEK=4,Lt.OFF_SCREEN=1.75,Lt.QUEUE_OFFSETS={i:[{x:0,y:.5},{x:-.5,y:0},{x:0,y:-.5},{x:.5,y:0}],j:[{x:.5,y:1},{x:0,y:.5},{x:0,y:.5},{x:1,y:.5}],l:[{x:.5,y:1},{x:0,y:.5},{x:0,y:.5},{x:1,y:.5}],o:[{x:1,y:1},{x:1,y:1},{x:1,y:1},{x:1,y:1}],s:[{x:.5,y:1},{x:0,y:.5},{x:0,y:.5},{x:1,y:.5}],t:[{x:.5,y:1},{x:0,y:.5},{x:0,y:.5},{x:1,y:.5}],z:[{x:.5,y:1},{x:0,y:.5},{x:0,y:.5},{x:1,y:.5}]};class Rt{constructor(){this.spinPolyominoList=["t"],this.spinBonusType="threeCorner",this.hardDropRowBonus=2,this.softDropRowBonus=1}getLockdownScore({lineClearAmount:t,isSpin:e,isMini:n,levelMultiplier:r=1}){let o=0;return o+=[0,100,300,500,800][t=Math.min(4,t)],e&&(o+=[400,700,900,1100,1200][t]),n&&(o+=100),o*r}}class Tt{constructor({xOffset:t,yOffset:e,orientation:n,usedKick:r,mustUpgradeSpin:o}){this.mustUpgradeSpin=null!=o&&o,this.xOffset=t,this.yOffset=e,this.orientation=n,this.usedKick=r}getIsUpward(){return this.yOffset<0}}class Ot{getKickTable({shape:t,rotateDirection:e,oldOrientation:n}){switch(t){case"i":switch(e){case 3:return Ot.LEFT_I_KICKS[n];case 1:return Ot.RIGHT_I_KICKS[n];case 2:return Ot.DOUBLE_I_KICKS[n];default:throw new Error("Rotation direction unhandled in kick table retrieval")}case"j":case"l":case"s":case"t":case"z":switch(e){case 3:return Ot.LEFT_X_KICKS[n];case 1:return Ot.RIGHT_X_KICKS[n];case 2:return Ot.DOUBLE_X_KICKS[n];default:throw new Error("Rotation direction unhandled in kick table retrieval")}default:return null}}executeWallkick({xOffset:t,yOffset:e,polyominoController:n,rotateDirection:r,oldOrientation:o,newOrientation:i,allowFloorKicks:a}){if(!n.collidesWith(t,e,i))return new Tt({xOffset:0,yOffset:0,orientation:i,usedKick:!1});const s=this.getKickTable({shape:n.getPolyominoShape(),rotateDirection:r,oldOrientation:o});if(null!=s)for(let r=0;r<s.length;r++){const o=s[r];if((o.y>=0||a)&&!n.collidesWith(o.x+t,o.y+e,i))return new Tt({xOffset:o.x,yOffset:o.y,orientation:i,usedKick:!0,mustUpgradeSpin:r>=3})}return null}}Ot.LEFT_X_KICKS=[[{x:1,y:0},{x:1,y:-1},{x:0,y:2},{x:1,y:2}],[{x:1,y:0},{x:1,y:1},{x:0,y:-2},{x:1,y:-2}],[{x:-1,y:0},{x:-1,y:-1},{x:0,y:2},{x:-1,y:2}],[{x:-1,y:0},{x:-1,y:1},{x:0,y:-2},{x:-1,y:-2}]],Ot.RIGHT_X_KICKS=[[{x:-1,y:0},{x:-1,y:-1},{x:0,y:2},{x:-1,y:2}],[{x:1,y:0},{x:1,y:1},{x:0,y:-2},{x:1,y:-2}],[{x:1,y:0},{x:1,y:-1},{x:0,y:2},{x:1,y:2}],[{x:-1,y:0},{x:-1,y:1},{x:0,y:-2},{x:-1,y:-2}]],Ot.DOUBLE_X_KICKS=[[{x:1,y:0},{x:-1,y:0},{x:0,y:-1},{x:0,y:1},{x:0,y:-2},{x:0,y:2}],[{x:0,y:1},{x:0,y:-1},{x:0,y:-2},{x:0,y:2},{x:-1,y:0},{x:1,y:0}],[{x:-1,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1},{x:0,y:2},{x:0,y:-2}],[{x:0,y:1},{x:0,y:-1},{x:0,y:-2},{x:0,y:2},{x:1,y:0},{x:-1,y:0}]],Ot.LEFT_I_KICKS=[[{x:-1,y:0},{x:2,y:0},{x:-1,y:-2},{x:2,y:1}],[{x:2,y:0},{x:-1,y:0},{x:2,y:-1},{x:-1,y:2}],[{x:1,y:0},{x:-2,y:0},{x:1,y:2},{x:-2,y:-1}],[{x:-2,y:0},{x:1,y:0},{x:-2,y:1},{x:1,y:-2}]],Ot.RIGHT_I_KICKS=[[{x:-2,y:0},{x:1,y:0},{x:-2,y:1},{x:1,y:-2}],[{x:-1,y:0},{x:2,y:0},{x:-1,y:-2},{x:2,y:1}],[{x:2,y:0},{x:-1,y:0},{x:2,y:-1},{x:-1,y:2}],[{x:1,y:0},{x:-2,y:0},{x:1,y:2},{x:-2,y:-1}]],Ot.DOUBLE_I_KICKS=[[{x:-1,y:0},{x:-2,y:0},{x:1,y:0},{x:2,y:0}],[{x:0,y:1},{x:0,y:-1},{x:0,y:-2},{x:0,y:2}],[{x:1,y:0},{x:2,y:0},{x:-1,y:0},{x:-2,y:0}],[{x:0,y:1},{x:0,y:-1},{x:0,y:-2},{x:0,y:2}]];class Pt extends class{constructor(){this.initialOrientation={i:0,j:0,l:0,o:0,s:0,t:0,z:0},this.offsets={i:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],j:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],l:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],o:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],s:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],t:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],z:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}]}}}{constructor(){super(...arguments),this.wallkick=new Ot}}class Mt extends Array{shuffle(){for(let t=this.length-1;t>0;t--){const e=Math.floor(Math.random()*(t+1));[this[t],this[e]]=[this[e],this[t]]}}}class Et{constructor(){this.bagMultiplier=1,this.generator=this.generatorFunc()}*generatorFunc(){const t=new Mt;for(;;){if(0===t.length){for(let e=0;e<this.bagMultiplier;e++)t.push(...this.polyominoSet);t.shuffle()}yield t.pop()}}setPolyominoSet(t){this.polyominoSet=t}getNextPolyomino(){return this.generator.next().value}}var It=n(505);class jt{static load(t){if(null!==t.img)return;const e=document.createElement("img");e.src=t.skin.getUrl(),t.img=e}static loadAll(){for(const t of Object.keys(jt.skins))jt.load(jt.skins[t])}}jt.skins={standard:{skin:new class extends class extends class{constructor(){this.source="abstract",this.gutterWidth=3,this.resolution=144}getUrl(){return this.source}getCoordinates(t){const{x:e,y:n}=t.holdIsLocked?this.assignments[t.color].holdLocked:this.assignments[t.color].regular;return{x:this.gutterWidth+e*this.resolution+e*this.gutterWidth*2,y:this.gutterWidth+n*this.resolution+n*this.gutterWidth*2}}getResolution(){return this.resolution}}{constructor(){super(...arguments),this.assignments={red:{regular:{x:0,y:0},holdLocked:{x:4,y:1}},orange:{regular:{x:1,y:0},holdLocked:{x:4,y:1}},yellow:{regular:{x:2,y:0},holdLocked:{x:4,y:1}},green:{regular:{x:3,y:0},holdLocked:{x:4,y:1}},lightBlue:{regular:{x:4,y:0},holdLocked:{x:4,y:1}},blue:{regular:{x:5,y:0},holdLocked:{x:4,y:1}},purple:{regular:{x:6,y:0},holdLocked:{x:4,y:1}},white:{regular:{x:0,y:1},holdLocked:{x:4,y:1}},gray:{regular:{x:1,y:1},holdLocked:{x:4,y:1}},black:{regular:{x:2,y:1},holdLocked:{x:4,y:1}},bone:{regular:{x:3,y:1},holdLocked:{x:5,y:1}}}}}{constructor(){super(...arguments),this.source=It}},img:null}};class Ft{constructor(){this.allowsGhost=!0,this.allowsHardDrop=!0,this.allowsHold=!0,this.allowsHoldBuffering=!0,this.allowsRotate180=!0,this.allowsRotateBuffering=!0,this.allowsRotateLeft=!0,this.allowsRotateRight=!0,this.allowsSoftDrop=!0,this.autoshiftType="standard",this.colors={i:"lightBlue",j:"blue",l:"orange",o:"yellow",s:"green",t:"purple",z:"red"},this.skin=jt.skins.standard,this.entryDelay=100,this.entryDelayOnLineClear=100,this.hardDropLocksPieceInstantly=!0,this.hardDropExecutesOnlyOncePerPress=!0,this.hasLockOut=!0,this.hasPartialLockOut=!1,this.holdResetsPieceOrientation=!0,this.immediateDropOnSpawn=1,this.lineClearDelay=300,this.lockDelay=500,this.resetExpirationPenalty="instant-lock",this.lockDelayType="limited",this.matrixWidth=10,this.matrixHeight=20,this.matrixHiddenHeight=20,this.matrixHasCeiling=!1,this.maxAutoshiftDelay=Number.MAX_SAFE_INTEGER,this.maxAutoshiftRate=Number.MAX_SAFE_INTEGER,this.maxPiecePreviews=6,this.minAutoshiftDelay=-1,this.minAutoshiftRate=-1,this.moveAndRotateResetsAreShared=!0,this.moveResets=15,this.randomizer=new Et,this.resetLockDelayByFalling=!0,this.resetLockDelayByKicking=!1,this.resetLockDelayByMoving=!0,this.resetLockDelayByRotating=!0,this.resetResetsByFalling=!0,this.rotationResets=15,this.rotationSystem=new Pt,this.skipEntryDelayOnHold=!1,this.skipEntryDelayOnMove=!1,this.skipEntryDelayOnRotate=!1,this.softDropCarriesBetweenPieces=!0,this.softDropLocksPieceInstantly=!1,this.softDropSpeed=20,this.softDropType="multiplicative",this.spawnOffsets={i:{x:3,y:-2},j:{x:3,y:-2},l:{x:3,y:-2},o:{x:4,y:-2},s:{x:3,y:-2},t:{x:3,y:-2},z:{x:3,y:-2}},this.suspendPieceUntilAction=!1}}class Ht extends class{constructor(){this.name="Dummy",this.polyominoSet=vt.TETROMINOES}getName(){return this.name}getLevel(){return 1}getStatsToDraw(){return[]}onGameStart(t){}onLockdown(t){}onNewPolyomino(t){}onStartOfTickBegin(t){}onStartOfTickEnd(t){}onEndOfTickBegin(t){}onEndOfTickEnd(t){}}{constructor(){super(...arguments),this.Rule=Ft,this.scoring=new Rt,this.name=X.t("modes:marathon.name"),this.level=1,this.standardLockDelay=0,this.standardLineClearDelay=0,this.engineStats={scoreAccumulated:0,linesCleared:0,polyominoesPlaced:0}}getStatsToDraw(){var t,e;return[{name:X.t("stats:level"),value:this.level.toString(),isLarge:!0},{name:X.t("stats:lines"),value:(null===(t=this.engineStats)||void 0===t?void 0:t.linesCleared.toString())+`<small>/${10*this.level}</small>`,isLarge:!0},{name:X.t("stats:placed"),value:null===(e=this.engineStats)||void 0===e?void 0:e.polyominoesPlaced.toString(),isLarge:!0}]}getLevel(){return this.level-1}onEndOfTickEnd(t){this.engineStats=t.getStats()}onGameStart(t){this.standardLockDelay=t.rule.lockDelay,this.standardLineClearDelay=t.rule.lineClearDelay}onNewPolyomino(t){const e=this.level;this.level>=40&&(t.rule.colors={i:"bone",j:"bone",l:"bone",o:"bone",s:"bone",t:"bone",z:"bone"}),this.level=Math.floor(t.getStats().linesCleared/10+1);const n=Math.pow(.8-.007*(this.level-1),this.level-1);t.getPolyominoController().setFallSpeedAsMsPerLine(1e3*n),this.level>=20?(t.getPolyominoController().setFallSpeedTo20G(),t.rule.lockDelay=this.standardLockDelay*Math.pow(.93,Math.pow(this.level-20,.8)),t.rule.lineClearDelay=this.standardLineClearDelay*Math.pow(.93,Math.pow(this.level-20,.8))):(t.rule.lockDelay=this.standardLockDelay,t.rule.lineClearDelay=this.standardLineClearDelay),this.level>e&&a.add("levelUp")}}class Bt extends pt{constructor(){super(),this.timePassed=0,jt.loadAll()}doLogicTick(t){ut.isDevBuild()?Bt.goToNextRenderer():(this.timePassed+=t,this.timePassed>=500&&this.constructBrandLogo(),this.timePassed>=1500&&this.addFadeToBrandLogo(),this.timePassed>=2e3&&this.constructAuthorLogo(),this.timePassed>=3500&&this.addFadeToAuthorLogo(),this.timePassed>=4e3&&Bt.goToNextRenderer())}static goToNextRenderer(){ut.setRender(new Lt(Ht))}constructBrandLogo(){this.brandLogoElement=document.createElement("h1"),this.brandLogoElement.textContent="Tetra Developer Studio",ut.getRendererContainer().appendChild(this.brandLogoElement),this.constructBrandLogo=()=>{}}addFadeToBrandLogo(){this.brandLogoElement.classList.add("splash-fade-out"),this.addFadeToBrandLogo=()=>{}}constructAuthorLogo(){ht(ut.getRendererContainer()),this.authorLogoElement=document.createElement("h1"),this.authorLogoElement.innerHTML=X.t("rootMenu:createdBy",{author:"<div>Dr Ocelot</div>",interpolation:{escapeValue:!1}}),this.authorLogoElement.classList.add("splash-fade-in"),ut.getRendererContainer().appendChild(this.authorLogoElement),this.constructAuthorLogo=()=>{}}addFadeToAuthorLogo(){this.authorLogoElement.classList.remove("splash-fade-in"),ft(this.authorLogoElement),this.authorLogoElement.classList.add("splash-fade-out"),this.addFadeToAuthorLogo=()=>{}}}var Nt=n(379),Ut=n.n(Nt),zt=n(795),Kt=n.n(zt),Wt=n(569),Yt=n.n(Wt),Gt=n(565),Vt=n.n(Gt),Xt=n(216),qt=n.n(Xt),Qt=n(589),$t=n.n(Qt),Zt=n(952),Jt={};Jt.styleTagTransform=$t(),Jt.setAttributes=Vt(),Jt.insert=Yt().bind(null,"head"),Jt.domAPI=Kt(),Jt.insertStyleElement=qt(),Ut()(Zt.Z,Jt),Zt.Z&&Zt.Z.locals&&Zt.Z.locals,function(){return t=this,e=void 0,r=function*(){return yield X.init({lng:"en-US",fallbackLng:"en-US",debug:ut.isDevBuild(),resources:{"en-US":{controls:Q,rootMenu:Z,gameUi:tt,modes:nt,stats:ot}}})},new((n=void 0)||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}));var t,e,n,r}().then((()=>{ut.isDevBuild()&&(it.controls.rotateRight=["KeyX"],it.controls.hardDrop=["ArrowUp"],it.controls.rotate180=["KeyS"],it.config.autoshiftDelay=150,it.config.autoshiftRate=15,it.config.autoshiftBuffering="instant"),ut.init(),ut.setRender(new Bt),a.loadSounds(a.soundbanks.system),a.setSoundbank(a.soundbanks.tetrax)}))},847:(t,e,n)=>{"use strict";t.exports=n.p+"res/ad9d81f46f4e78d36db0.ac3"},330:(t,e,n)=>{"use strict";t.exports=n.p+"res/b11f35f55d94e5b31237.m4a"},983:(t,e,n)=>{"use strict";t.exports=n.p+"res/45b3264a5485d627d008.mp3"},67:(t,e,n)=>{"use strict";t.exports=n.p+"res/b4657ba8d222108d728c.ogg"},89:(t,e,n)=>{"use strict";t.exports=n.p+"res/a0b09cd7582d62ceea6d.ac3"},443:(t,e,n)=>{"use strict";t.exports=n.p+"res/3059a435ea996fa04863.m4a"},83:(t,e,n)=>{"use strict";t.exports=n.p+"res/91b959a34937b0760251.mp3"},479:(t,e,n)=>{"use strict";t.exports=n.p+"res/1dc310bd8096e2183eb1.ogg"},432:(t,e,n)=>{"use strict";t.exports=n.p+"res/ff070d3ef14e4fe37c56.woff2"},544:(t,e,n)=>{"use strict";t.exports=n.p+"res/58adfd7a25363586ea9d.woff2"},908:(t,e,n)=>{"use strict";t.exports=n.p+"res/ad4dfd14b55c37089f92.woff2"},291:(t,e,n)=>{"use strict";t.exports=n.p+"res/8b0a7f323c09e924d0c7.woff2"},243:(t,e,n)=>{"use strict";t.exports=n.p+"res/8a1aeb842515554a7be7.woff2"},304:(t,e,n)=>{"use strict";t.exports=n.p+"res/5f3e0bcd9f70625eaca4.woff2"},572:(t,e,n)=>{"use strict";t.exports=n.p+"res/e561d55651e466475499.woff2"},539:(t,e,n)=>{"use strict";t.exports=n.p+"res/c33bb12409ce326108c1.woff2"},37:(t,e,n)=>{"use strict";t.exports=n.p+"res/f0f272949665ad44c075.woff2"},963:(t,e,n)=>{"use strict";t.exports=n.p+"res/eb871a044e4dca8e84b0.woff2"},15:(t,e,n)=>{"use strict";t.exports=n.p+"res/42e64f0c77fe986a672a.woff2"},846:(t,e,n)=>{"use strict";t.exports=n.p+"res/78d6900ba0ce4ad9ce0e.woff2"},505:(t,e,n)=>{"use strict";t.exports=n.p+"res/3c903cab37db5fd2e5e0.png"}},r={};function o(t){var e=r[t];if(void 0!==e)return e.exports;var i=r[t]={id:t,loaded:!1,exports:{}};return n[t].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=n,o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,o.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var i=Object.create(null);o.r(i);var a={};t=t||[null,e({}),e([]),e(e)];for(var s=2&r&&n;"object"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((t=>a[t]=()=>n[t]));return a.default=()=>n,o.d(i,a),i},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;o.g.importScripts&&(t=o.g.location+"");var e=o.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t})(),o.b=document.baseURI||self.location.href,o(290)})();